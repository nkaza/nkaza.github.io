<!DOCTYPE html><html lang="en-us" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.4.0 for Hugo" />
  

  
  









  




  
  

  
  
  

  
    <meta name="google-site-verification" content="qq9qzDEmo2CWQJ-GjKaptUQs7Odqb9aHsm4k_yFaVAQ" />
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Nikhil Kaza" />

  
  
  
    
  
  <meta name="description" content="A brief introduction to network analysis." />

  
  <link rel="alternate" hreflang="en-us" href="https://nkaza.github.io/post/analysing-urban-neworks/" />

  
  
  
    <meta name="theme-color" content="#1565c0" />
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.f1ecf783c14edc00c9320c205831ad8e.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha512-W0xM4mr6dEP9nREo7Z9z+9X70wytKvMGeDsj7ps2+xg5QPrEBXC8tAW1IFnzjR6eoJ90JmCnFzerQJTLzIEHjA==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.css" integrity="" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.0d287f18ae9831e05717a040ad587d40.css" />

  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-121426944-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'UA-121426944-1', { 'anonymize_ip': true });
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  

  

  




  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu1ca6a6912ef6c300619228a995d3f134_46128_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu1ca6a6912ef6c300619228a995d3f134_46128_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://nkaza.github.io/post/analysing-urban-neworks/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
  <meta property="og:site_name" content="Nikhil Kaza" />
  <meta property="og:url" content="https://nkaza.github.io/post/analysing-urban-neworks/" />
  <meta property="og:title" content="Analysing Urban Neworks | Nikhil Kaza" />
  <meta property="og:description" content="A brief introduction to network analysis." /><meta property="og:image" content="https://nkaza.github.io/post/analysing-urban-neworks/featured.jpg" />
    <meta property="twitter:image" content="https://nkaza.github.io/post/analysing-urban-neworks/featured.jpg" /><meta property="og:locale" content="en-us" />
  
    
      <meta
        property="article:published_time"
        content="2018-09-12T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2018-09-12T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://nkaza.github.io/post/analysing-urban-neworks/"
  },
  "headline": "Analysing Urban Neworks",
  
  "image": [
    "https://nkaza.github.io/post/analysing-urban-neworks/featured.jpg"
  ],
  
  "datePublished": "2018-09-12T00:00:00Z",
  "dateModified": "2018-09-12T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Nikhil Kaza"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Nikhil Kaza",
    "logo": {
      "@type": "ImageObject",
      "url": "https://nkaza.github.io/media/icon_hu1ca6a6912ef6c300619228a995d3f134_46128_192x192_fill_lanczos_center_3.png"
    }
  },
  "description": "A brief introduction to network analysis."
}
</script>

  

  

  
  
  
  
  
    <script src="https://cdn.jsdelivr.net/gh/osano/cookieconsent@3.1.1/build/cookieconsent.min.js" integrity="sha512-yXXqOFjdjHNH1GND+1EO0jbvvebABpzGKD66djnUfiKlYME5HGMUJHoCaeE4D5PTG2YsSJf6dwqyUUvQvS0vaA==" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/osano/cookieconsent@3.1.1/build/cookieconsent.min.css" integrity="sha512-LQ97camar/lOliT/MqjcQs5kWgy6Qz/cCRzzRzUCfv0fotsCTC9ZHXaPQmJV8Xu/PVALfJZ7BDezl5lW3/qBxg==" crossorigin="anonymous">
  
  <script>
  window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#1565c0",
          "text": "rgb(255, 255, 255)"
        },
        "button": {
          "background": "rgb(255, 255, 255)",
          "text": "#1565c0"
        }
      },
      "theme": "classic",
      "content": {
        "message": "Third party cookies are used on this website. You can disable them on your browser's privacy settings without losing any functionality.",
        "dismiss": "Got it!",
        "link": "Learn more",
        "href": "/privacy/"
      }
    })});
  </script>


  





  <title>Analysing Urban Neworks | Nikhil Kaza</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="e0f23a90fa668baf5a388db433c78b2c" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.8f76bdc9e086322ed5147724ebba3d06.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    












<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">Nikhil Kaza</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">Nikhil Kaza</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>Home</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#posts"><span>Posts</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#featured"><span>Publications</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#projects"><span>Projects</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#teaching"><span>Teaching</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/files/pdfs/cv.pdf"><span>CV</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#contact"><span>Contact</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://cse.google.com/cse?cx=003304552390625136873:si-f1ne2ahe" target="_blank" rel="noopener"><span>Search</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
        

        
        

        
        
        <li class="nav-item dropdown theme-dropdown">
          <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
            <i class="fas fa-moon" aria-hidden="true"></i>
          </a>
          <div class="dropdown-menu">
            <a href="#" class="dropdown-item js-set-theme-light">
              <span>Light</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-dark">
              <span>Dark</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-auto">
              <span>Automatic</span>
            </a>
          </div>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    <article class="article">
  





















  
  


<div class="article-container pt-3">
  <h1>Analysing Urban Neworks</h1>

  

  


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Sep 12, 2018
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    13 min read
  </span>
  

  
  
  
  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/new-urban-analytics/">new-urban-analytics</a>, <a href="/category/regional-science/">regional-science</a></span>
  

</div>

  





</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 187px;">
  <div style="position: relative">
    <img src="/post/analysing-urban-neworks/featured_hud4daa403d19f17e5d9269a920ed64dd7_175925_720x2500_fit_q75_h2_lanczos.webp" width="720" height="187" alt="" class="featured-image">
    
  </div>
</div>


  <div class="article-container">
    <div class="row">
      <div class="col-12 col-lg-9 article-style">
        <script src="https://nkaza.github.io/post/analysing-urban-neworks/index_files/htmlwidgets/htmlwidgets.js"></script>
<script src="https://nkaza.github.io/post/analysing-urban-neworks/index_files/pymjs/pym.v1.js"></script>
<script src="https://nkaza.github.io/post/analysing-urban-neworks/index_files/widgetframe-binding/widgetframe.js"></script>
<script src="https://nkaza.github.io/post/analysing-urban-neworks/index_files/htmlwidgets/htmlwidgets.js"></script>
<script src="https://nkaza.github.io/post/analysing-urban-neworks/index_files/pymjs/pym.v1.js"></script>
<script src="https://nkaza.github.io/post/analysing-urban-neworks/index_files/widgetframe-binding/widgetframe.js"></script>
<h2 id="introduction">Introduction</h2>
<p>Networks are ubiquitous in a urban systems. The more obvious ones are street, rail and utility networks that undergird the city. However, as planners we also focus on less obvious networks; e.g. social networks of people that allow for community formation, the transactional activity of firms that allow us to identify clusters of firms or industries, the mismatch between job seekers and job locations to better plan for social and physical infrastructure and information flow through organisational linkages during a disaster management process. These are but a few examples of network analysis in the urban domain. The problem definition frames the analytical tools used in the process.</p>
<h2 id="acquire-data">Acquire Data</h2>
<p>Let’s begin by using the bike share data from New York, we are familiar with. We <a href="/post/geospatial-data-in-r/">already did some network analysis</a> with it (inadvertently). Let’s formalise it.
Much of the following <a href="https://www.dropbox.com/s/wbzs2qisfgc2fts/201806-citibike-tripdata.csv?dl=0" target="_blank" rel="noopener">data</a> cleaning that you should be familiar with now.</p>
<h2 id="key-nodes-in-a-network">Key nodes in a network</h2>
<p>Networks are representation of connections between two nodes. As such bike stations, could be treated a vertex/node and each trip between any two stations could be treated as a link. In another representation, you can treat all stations connected with one another, if they belong to the same company that you can check out and return these bikes and treat the number of trips as weights on that edge; so some edges will have zero weights. In other instances, you may disallow edges that have zero weights, i.e. remove the connection between two stations if there are no trips between them (or number of trips below a threshold).</p>
<pre><code class="language-r">library(tidyverse)
library(igraph)
library(here)


tripdata &lt;- here(&quot;tutorials_datasets&quot;, &quot;nycbikeshare&quot;, &quot;201806-citibike-tripdata.csv&quot;) %&gt;% read_csv()

tripdata &lt;- rename(tripdata,              #rename column names to get rid of the space
                   Slat = `start station latitude`,
                   Slon = `start station longitude`,
                   Elat = `end station latitude`,
                   Elon = `end station longitude`,
                   Sstid = `start station id`,
                   Estid = `end station id`,
                   Estname = `end station name`,
                   Sstname = `start station name`
                   
)
diffdesttrips &lt;- tripdata[tripdata$Estid != tripdata$Sstid, ] # to make sure there are no loops or self-connections. 


(trips_graph &lt;- diffdesttrips %&gt;% 
        select(Sstid,Estid) %&gt;%
        graph.data.frame(directed = T)) #We are using directed graph because the links have from and to edges. You can choose to ignore them.
# IGRAPH 2b31606 DN-- 773 1909858 -- 
# + attr: name (v/c)
# + edges from 2b31606 (vertex names):
#  [1] 72-&gt;173  72-&gt;477  72-&gt;457  72-&gt;379  72-&gt;459  72-&gt;446  72-&gt;212  72-&gt;458 
#  [9] 72-&gt;212  72-&gt;514  72-&gt;514  72-&gt;465  72-&gt;173  72-&gt;524  72-&gt;173  72-&gt;212 
# [17] 72-&gt;382  72-&gt;462  72-&gt;3141 72-&gt;456  72-&gt;519  72-&gt;328  72-&gt;426  72-&gt;3659
# [25] 72-&gt;359  72-&gt;525  72-&gt;405  72-&gt;458  72-&gt;457  72-&gt;3163 72-&gt;426  72-&gt;328 
# [33] 72-&gt;376  72-&gt;3459 72-&gt;304  72-&gt;457  72-&gt;486  72-&gt;527  72-&gt;490  72-&gt;459 
# [41] 72-&gt;459  72-&gt;3178 72-&gt;3178 72-&gt;515  72-&gt;459  72-&gt;388  72-&gt;500  72-&gt;508 
# [49] 72-&gt;173  72-&gt;426  72-&gt;368  72-&gt;3258 72-&gt;532  72-&gt;478  72-&gt;514  72-&gt;533 
# [57] 72-&gt;519  72-&gt;423  72-&gt;3457 72-&gt;525  72-&gt;525  72-&gt;490  72-&gt;529  72-&gt;405 
# + ... omitted several edges


vcount(trips_graph)
# [1] 773
ecount(trips_graph)
# [1] 1909858
is.directed(trips_graph)
# [1] TRUE
</code></pre>
<p>You can access the vertices and edges using <code>V</code> and <code>E</code> functions.</p>
<pre><code class="language-r">
V(trips_graph) %&gt;% head()
# + 6/773 vertices, named, from 2b31606:
# [1] 72  79  82  83  119 120
E(trips_graph) %&gt;% head()
# + 6/1909858 edges from 2b31606 (vertex names):
# [1] 72-&gt;173 72-&gt;477 72-&gt;457 72-&gt;379 72-&gt;459 72-&gt;446

tmp1 &lt;- diffdesttrips %&gt;%
  group_by(Sstid) %&gt;%
  summarise(
    stname = first(Sstname),
    lon = first(Slon),
    lat = first(Slat))%&gt;%
  rename(stid = Sstid)

tmp2 &lt;- diffdesttrips %&gt;%
  group_by(Estid) %&gt;%
  summarise(
    stname = first(Estname),
    lon = first(Elon),
    lat = first(Elat)) %&gt;%
  rename(stid = Estid)

station_locs &lt;- rbind(tmp1, tmp2) %&gt;% unique()
</code></pre>
<p>You can extract subgraphs for a subset of vertices</p>
<pre><code class="language-r">set.seed(200) # For reproducibility because of randomisation below
station_sample &lt;- sample(V(trips_graph), 20)
sub_trips &lt;- induced_subgraph(trips_graph, station_sample)


# plot using ggraph
library(ggraph)
ggraph(sub_trips, layout = 'kk') + 
    geom_edge_fan(show.legend = FALSE) +
    geom_node_point()
</code></pre>
<img src="https://nkaza.github.io/post/analysing-urban-neworks/index_files/figure-html/unnamed-chunk-3-1.png" width="768" />
<p>Note that the graph does not respect the geographic locations. If you want to fix the positions relative to their lat/long coordinates, you should can specify them using layout parameters.</p>
<hr>
<p><strong>Exercise</strong></p>
<ul>
<li>Use different layouts (such as star and cricle) to visualise the network.</li>
<li>Use different edge attributes to style the edges of the above graph</li>
<li>Style the vertices using for e.g. number of incoming trips per day, or their location in different boroughs.</li>
</ul>
<hr>
<h3 id="adjacency-matrix">Adjacency matrix</h3>
<p>One representation of a graph is an adjacency matrix. It is a square matrix used to represent a finite graph. The elements of the matrix indicate whether pairs of vertices are adjacent or not in the graph. Each row and each column represents a single vertex. $ A $ is and adjacency matrix, whose elements $ a_{ij} $ is 0 when vertices/nodes $ i $ and $ j $ are not adjacent. If the graph is undirected and unweighted then $ a_{ij} $ is 1 when they are adjacent. In the case of a directed graph, the matrix is not symmetric. In our case, we have a weighted directed graph with the weights representing the number of trips between two stations. To visualise a portion of this matrix try</p>
<pre><code class="language-r">as_adjacency_matrix(trips_graph)[1:6, 1:6]
# 6 x 6 sparse Matrix of class &quot;dgCMatrix&quot;
#     72 79 82 83 119 120
# 72   .  7  .  .   .   .
# 79  22  .  3  .   1   .
# 82   1  3  .  .   .   .
# 83   .  .  .  .   2  18
# 119  .  .  1  1   .   1
# 120  .  .  . 20   .   .
</code></pre>
<p>Adjacency matrix is very important as it allows us to perform matrix operations much more efficiently as we will see in <a href="/post/using-network-ananlysis-to-identify-clusters-of-deprivation/">other tutorials</a></p>
<h3 id="degrees--their-distribution">Degrees &amp; their distribution.</h3>
<p>Degree of a vertex, in graph theory, refers to the number of edges that has the vertex as one of its ends. An in-degree and out-degree qualifies it, by counting only edges that start and end at the vertex. Degree distributions are important for graphs as they tell us about how connected the graph is and which if any of the vertices are more important than others.</p>
<pre><code class="language-r">degree(trips_graph, mode = 'out') %&gt;%
  as.tibble %&gt;%
  ggplot()+
  geom_density(aes(x=value))
</code></pre>
<img src="https://nkaza.github.io/post/analysing-urban-neworks/index_files/figure-html/unnamed-chunk-5-1.png" width="768" />
<pre><code class="language-r">
degree.distribution(trips_graph) %&gt;% head() # Check out what the degree.distribution produces and how to interpret the results.
# [1] 0.000000000 0.003880983 0.005174644 0.002587322 0.001293661 0.001293661
</code></pre>
<p>In particular, you want to look for the outliers in the distribution. For example to find the stations with only end trips but no start trips, i.e stations that are solely destinations</p>
<pre><code class="language-r">V(trips_graph)$name[degree(trips_graph, mode=&quot;out&quot;) == 0 &amp; degree(trips_graph, mode=&quot;in&quot;) &gt; 0]
#  [1] &quot;3245&quot; &quot;3267&quot; &quot;3275&quot; &quot;3192&quot; &quot;3276&quot; &quot;3184&quot; &quot;3214&quot; &quot;3651&quot; &quot;3198&quot; &quot;3199&quot;
# [11] &quot;3203&quot;
</code></pre>
<p>We can also visualise these stations that are popular origins on the map. However, we need to attach the values to the station locations tibble.</p>
<pre><code class="language-r">

tmp &lt;- degree(trips_graph, mode = 'out') %&gt;%
  as.tibble() %&gt;%
  rename(Outdegree = value)%&gt;%
  mutate(stid = V(trips_graph)$name %&gt;% as.numeric()) 


station_locs &lt;- station_locs %&gt;% 
  left_join(tmp, by='stid')


library(tmap)
library(sf)

tmap_mode(&quot;view&quot;)

m1 &lt;- 
station_locs %&gt;% 
  mutate(outdegree_std = (Outdegree - mean(Outdegree))/sd(Outdegree)) %&gt;%
  filter(outdegree_std &gt;2) %&gt;% # focusing on the Outliers!
  st_as_sf(coords = c('lon', 'lat'), crs=4326) %&gt;%
  tm_shape()+
  tm_dots(size = 'outdegree_std', alpha =.5, border.lwd=0)+
  tm_basemap(leaflet::providers$CartoDB) 
 

# Showing the use of leaflet  and fillcolorfor reference 
 
# library(leaflet)
# 
#  Npal &lt;- colorNumeric(
#    palette = &quot;Reds&quot;, n = 5,
#    domain = station_locs$Outdegree
#  )
# 
#  m1 &lt;- 
# station_locs %&gt;%
#     leaflet()  %&gt;%
#   addProviderTiles(providers$CartoDB.Positron, group = &quot;Basemap&quot;) %&gt;%
#    addCircles(
#      lng = station_locs$lon,
#      lat = station_locs$lat,
#      radius = (station_locs$Outdegree - mean(station_locs$Outdegree))/sd(station_locs$Outdegree) * 30,
#      fillOpacity = .6,
#     fillColor = Npal(station_locs$Outdegree),
#      group = 'Stations',
#      stroke=FALSE
#    ) %&gt;%
#   addLegend(&quot;topleft&quot;, pal = Npal, values = ~Outdegree,
#             labFormat = function(type, cuts, p) {
#               n = length(cuts) 
#               paste0(prettyNum(cuts[-n], digits=2, big.mark = &quot;,&quot;, scientific=F), &quot; - &quot;, prettyNum(cuts[-1], digits=2, big.mark=&quot;,&quot;, scientific=F))
#             },
#             title = &quot;Out degree/Trip Starts&quot;,
#             opacity = 1
#   )

library(widgetframe)
frameWidget(tmap_leaflet(m1))
</code></pre>
<div id="htmlwidget-1" style="width:100%;height:480px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"url":"index_files/figure-html//widgets/widget_unnamed-chunk-7.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
<p>You can also find out which stations are predominantly origin stations and which are predominantly destinations. I use 20% more as a cut off (arbitrary).</p>
<pre><code class="language-r"># Careful with division. If you have a nodes that are only origins, i.e. in-degree is 0, you will have a division by 0 problem.

V(trips_graph)$name[degree(trips_graph, mode=&quot;out&quot;) / degree(trips_graph, mode=&quot;in&quot;) &gt; 1.2]
#  [1] &quot;216&quot;  &quot;258&quot;  &quot;266&quot;  &quot;289&quot;  &quot;339&quot;  &quot;356&quot;  &quot;391&quot;  &quot;397&quot;  &quot;399&quot;  &quot;443&quot; 
# [11] &quot;469&quot;  &quot;3152&quot; &quot;3161&quot; &quot;3164&quot; &quot;3177&quot; &quot;3302&quot; &quot;3316&quot; &quot;3366&quot; &quot;3536&quot; &quot;3539&quot;
# [21] &quot;3542&quot; &quot;3620&quot; &quot;3623&quot;
</code></pre>
<hr>
<p><strong>Exercise</strong></p>
<ul>
<li>Identify the popular origin stations of the trips by different times of the day and day of the week</li>
<li>Modify the above code slightly to identify the popular destinations by different times of the day and day of the week.</li>
</ul>
<hr>
<h3 id="other-centrality-measures">Other centrality measures</h3>
<h4 id="eigen-centrality">Eigen centrality</h4>
<p>If $ A = a_{ij} $ be the adjacency matrix of a graph, where $ a_{ij} = 1 $ when $ i $ and $ j $ nodes are connected, $ 0 $ otherwise. The eigenvector centrality $ x_{i} $ of node $ i $ is given by:</p>
<p>$$ x_i = \frac{1}{\lambda} \sum_{k} a_{ki} x_k $$</p>
<p>where $ $ is a constant and is the largest eigen value of the adjacency matrix.</p>
<p>Intuitively, a node is considered more central/important, if it is connected to large number of highly central/important nodes. So, a node may have a high degree score (i.e. many connections) but a relatively low eigen centrality score if many of those connections are with similarly low-scored nodes.</p>
<pre><code class="language-r">station_locs$eigencentrality &lt;- eigen_centrality(trips_graph, directed = T)$vector
</code></pre>
<p>Showing only the stations with large eigen centrality scores.</p>
<div id="htmlwidget-2" style="width:100%;height:480px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"url":"index_files/figure-html//widgets/widget_unnamed-chunk-10.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
<h3 id="page-rank-centrality">Page rank centrality</h3>
<p>Page rank is a version of eigen centrality, made popular by the founders of Google. We can use boxplot in the standard graphics package to identify the outliers. .</p>
<pre><code class="language-r">tmp  &lt;- page_rank(trips_graph)$vector %&gt;% 
    boxplot.stats() %&gt;%
    .[[&quot;out&quot;]] %&gt;% ## Box plot identifies the oultiers, outside the whiskers. The default value is 1.5 outside the box.
     names() %&gt;% 
    as.numeric()

station_locs %&gt;% 
  filter(stid %in% tmp) %&gt;%
  select('stname')
# # A tibble: 17 × 1
#    stname                       
#    &lt;chr&gt;                        
#  1 Broadway &amp; E 14 St           
#  2 Christopher St &amp; Greenwich St
#  3 Carmine St &amp; 6 Ave           
#  4 Centre St &amp; Chambers St      
#  5 Broadway &amp; E 22 St           
#  6 West St &amp; Chambers St        
#  7 W 21 St &amp; 6 Ave              
#  8 W 41 St &amp; 8 Ave              
#  9 8 Ave &amp; W 33 St              
# 10 W 33 St &amp; 7 Ave              
# 11 E 17 St &amp; Broadway           
# 12 Broadway &amp; W 60 St           
# 13 12 Ave &amp; W 40 St             
# 14 Pershing Square North        
# 15 Central Park S &amp; 6 Ave       
# 16 South End Ave &amp; Liberty St   
# 17 Kent Ave &amp; N 7 St
</code></pre>
<h4 id="closeness-centrality">Closeness centrality</h4>
<p>While the above measures of centrality depend on local neighbourhood, we can also take into account the whole graph. For example, if a station can every station within a few hops, then it is considered more central than ones that may have more localised trips within the neighbourhood.</p>
<pre><code class="language-r">tmp &lt;- closeness(trips_graph, mode='all') %&gt;% 
  boxplot.stats() %&gt;%
  .[['out']] %&gt;%
   names() %&gt;%
    as.numeric()

station_locs %&gt;% 
  filter(stid %in% tmp) %&gt;%
  select('stname')
# # A tibble: 7 × 1
#   stname                
#   &lt;chr&gt;                 
# 1 Paulus Hook           
# 2 Liberty Light Rail    
# 3 Heights Elevator      
# 4 Hamilton Park         
# 5 Essex Light Rail      
# 6 Morris Canal          
# 7 Bike Mechanics at Riis
</code></pre>
<p>These seems like unusual stations to be outliers in a centrality index (bike mechanics??) and unlike the page rank index. A closer look at the centrality using box plot reveals that these are outliers at the left end of the centrality distribution.</p>
<p>There are hundreds of centrality measures out there. Be careful to pick and choose the right ones for your problem. To assist with this, you can use <code>CINNA</code> (Central Informative Nodes in Network Analysis) package for computing, analysing and comparing centrality measures submitted to CRAN repository.</p>
<pre><code class="language-r">library(CINNA)
proper_centralities(trips_graph)
#  [1] &quot;Alpha Centrality&quot;                                
#  [2] &quot;Bonacich power centralities of positions&quot;        
#  [3] &quot;Page Rank&quot;                                       
#  [4] &quot;Average Distance&quot;                                
#  [5] &quot;Barycenter Centrality&quot;                           
#  [6] &quot;BottleNeck Centrality&quot;                           
#  [7] &quot;Centroid value&quot;                                  
#  [8] &quot;Closeness Centrality (Freeman)&quot;                  
#  [9] &quot;ClusterRank&quot;                                     
# [10] &quot;Decay Centrality&quot;                                
# [11] &quot;Degree Centrality&quot;                               
# [12] &quot;Diffusion Degree&quot;                                
# [13] &quot;DMNC - Density of Maximum Neighborhood Component&quot;
# [14] &quot;Eccentricity Centrality&quot;                         
# [15] &quot;Harary Centrality&quot;                               
# [16] &quot;eigenvector centralities&quot;                        
# [17] &quot;K-core Decomposition&quot;                            
# [18] &quot;Geodesic K-Path Centrality&quot;                      
# [19] &quot;Katz Centrality (Katz Status Index)&quot;             
# [20] &quot;Kleinberg's authority centrality scores&quot;         
# [21] &quot;Kleinberg's hub centrality scores&quot;               
# [22] &quot;clustering coefficient&quot;                          
# [23] &quot;Lin Centrality&quot;                                  
# [24] &quot;Lobby Index (Centrality)&quot;                        
# [25] &quot;Markov Centrality&quot;                               
# [26] &quot;Radiality Centrality&quot;                            
# [27] &quot;Shortest-Paths Betweenness Centrality&quot;           
# [28] &quot;Current-Flow Closeness Centrality&quot;               
# [29] &quot;Closeness centrality (Latora)&quot;                   
# [30] &quot;Communicability Betweenness Centrality&quot;          
# [31] &quot;Community Centrality&quot;                            
# [32] &quot;Cross-Clique Connectivity&quot;                       
# [33] &quot;Entropy Centrality&quot;                              
# [34] &quot;EPC - Edge Percolated Component&quot;                 
# [35] &quot;Laplacian Centrality&quot;                            
# [36] &quot;Leverage Centrality&quot;                             
# [37] &quot;MNC - Maximum Neighborhood Component&quot;            
# [38] &quot;Hubbell Index&quot;                                   
# [39] &quot;Semi Local Centrality&quot;                           
# [40] &quot;Closeness Vitality&quot;                              
# [41] &quot;Residual Closeness Centrality&quot;                   
# [42] &quot;Stress Centrality&quot;                               
# [43] &quot;Load Centrality&quot;                                 
# [44] &quot;Flow Betweenness Centrality&quot;                     
# [45] &quot;Information Centrality&quot;                          
# [46] &quot;Dangalchev Closeness Centrality&quot;                 
# [47] &quot;Group Centrality&quot;                                
# [48] &quot;Harmonic Centrality&quot;                             
# [49] &quot;Local Bridging Centrality&quot;                       
# [50] &quot;Wiener Index Centrality&quot;
</code></pre>
<h2 id="community-detection">Community Detection</h2>
<p>Finding a community structure in a network is to identify clusters of nodes that are more strongly connected within the cluster than to nodes outside the cluster. There are many algorithms that identify community structures. Some work on weighted networks and some work on digraphs. In any case it is better to convert multigraph (graph with two nodes having multiple edges) into a simple graph with edge weights, representing the number of trips.</p>
<pre><code class="language-r">E(trips_graph)$weight &lt;- 1
station_graph  &lt;- simplify(trips_graph, edge.attr.comb=&quot;sum&quot;)

ecount(station_graph) == ecount(trips_graph)
# [1] FALSE
sum(E(station_graph)$weight) == ecount(trips_graph)
# [1] TRUE
all.equal(vcount(station_graph), vcount(trips_graph))
# [1] TRUE

is.directed(station_graph)
# [1] TRUE
</code></pre>
<p>Walktrap algorithm finds the communities by random walks in the graph. The intuition is that random walks are more likely to be within a community that across communities.</p>
<pre><code class="language-r">wlktrp_mmbr &lt;- data.frame (clstrmm  = cluster_walktrap(station_graph)$membership %&gt;% as.factor, 
                          stid = V(station_graph)$name %&gt;% as.numeric()
                          ) %&gt;% as.tibble()


wlktrp_mmbr$clstrmm %&gt;% summary()
#   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15 
#  80 218 207  61   3 195   1   1   1   1   1   1   1   1   1
</code></pre>
<p>It seems like there are 5 distinct and non-trivial clusters of stations ($ n $). You can visualise these results by joining them back to tibbles with location information.</p>
<pre><code class="language-r">
station_locs &lt;- station_locs %&gt;%
                inner_join(wlktrp_mmbr, by='stid')

library(basemaps)
library(RColorBrewer)
numColors &lt;- levels(station_locs$clstrmm) %&gt;% length()
myColors &lt;- colorRampPalette(brewer.pal(8,&quot;Dark2&quot;))(numColors) # Expanding the number of colors available from 8 

station_locs_shp &lt;- st_as_sf(station_locs, coords = c(&quot;lon&quot;, 'lat'), crs = st_crs(4326)) 
ext &lt;- station_locs_shp %&gt;% st_bbox()


  ggplot()+
      basemap_gglayer(ext, map_type = 'light', map_service = 'carto')+
      scale_fill_identity()+
  geom_sf(data = station_locs_shp %&gt;% st_transform(st_crs(3857)),
          aes(color = clstrmm), alpha = .8)+
  scale_color_manual(values = myColors)+ 
     scale_x_continuous(&quot;&quot;, breaks=NULL)+
   scale_y_continuous(&quot;&quot;, breaks=NULL)+
  labs(colour = &quot;Communities&quot;, x = NULL, y = NULL) +
      labs(x=NULL, y=NULL) +
  theme(axis.line = element_blank(),  # Remove all the extraenous stuff from the plot.
        axis.text = element_blank(),
        axis.ticks = element_blank(),
        axis.title = element_blank(),
        axis.ticks.length = unit(0, &quot;pt&quot;), #length of tick marks
        legend.position = &quot;none&quot;,
        panel.background = element_blank(),
        panel.border = element_blank(),
        panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(),
        plot.background = element_blank(), 
        plot.margin = unit(c(0,0,0,0),&quot;mm&quot;))
# Loading basemap 'light' from map service 'carto'...
# Using geom_raster() with maxpixels = 263341.
</code></pre>
<img src="https://nkaza.github.io/post/analysing-urban-neworks/index_files/figure-html/unnamed-chunk-16-1.png" width="768" />
<hr>
<p><strong>Exercise</strong></p>
<ul>
<li>Use tmap instead of ggplot.</li>
<li>Do the clusters change if you use a different algorithm?</li>
<li>Are the clusters different for customers and subscribers? Men and Women?</li>
<li>Are the clusters different at different times of the day? days of the week?</li>
</ul>
<hr>
<h2 id="conclusions">Conclusions</h2>
<p>Network analysis techniques provide a very useful set of tools that we can apply in many contexts in urban analytics. Networks are ubiquitous and the above two are but few of the situations where network tools can be readily applied. They need to be used more, and used judiciously.</p>

      </div>
      <div class="col-12 col-lg-3 docs-toc">
        <ul class="nav toc-top">
          <li>
            <a href="#" id="back_to_top" class="docs-toc-title">
              Contents
            </a>
          </li>
        </ul>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#acquire-data">Acquire Data</a></li>
    <li><a href="#key-nodes-in-a-network">Key nodes in a network</a>
      <ul>
        <li><a href="#adjacency-matrix">Adjacency matrix</a></li>
        <li><a href="#degrees--their-distribution">Degrees &amp; their distribution.</a></li>
        <li><a href="#other-centrality-measures">Other centrality measures</a></li>
        <li><a href="#page-rank-centrality">Page rank centrality</a></li>
      </ul>
    </li>
    <li><a href="#community-detection">Community Detection</a></li>
    <li><a href="#conclusions">Conclusions</a></li>
  </ul>
</nav>
      </div>
    </div>
    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/r/">R</a>
  
  <a class="badge badge-light" href="/tag/teaching/">teaching</a>
  
</div>



<div class="share-box">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://nkaza.github.io/post/analysing-urban-neworks/&amp;text=Analysing%20Urban%20Neworks" target="_blank" rel="noopener" class="share-btn-twitter" aria-label="twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://nkaza.github.io/post/analysing-urban-neworks/&amp;t=Analysing%20Urban%20Neworks" target="_blank" rel="noopener" class="share-btn-facebook" aria-label="facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Analysing%20Urban%20Neworks&amp;body=https://nkaza.github.io/post/analysing-urban-neworks/" target="_blank" rel="noopener" class="share-btn-email" aria-label="envelope">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://nkaza.github.io/post/analysing-urban-neworks/&amp;title=Analysing%20Urban%20Neworks" target="_blank" rel="noopener" class="share-btn-linkedin" aria-label="linkedin-in">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Analysing%20Urban%20Neworks%20https://nkaza.github.io/post/analysing-urban-neworks/" target="_blank" rel="noopener" class="share-btn-whatsapp" aria-label="whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://nkaza.github.io/post/analysing-urban-neworks/&amp;title=Analysing%20Urban%20Neworks" target="_blank" rel="noopener" class="share-btn-weibo" aria-label="weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://nkaza.github.io/"><img class="avatar mr-3 avatar-circle" src="/author/nikhil-kaza/avatar_hub3f48de923d36a3a7f2a35d484d2e93d_2804906_270x270_fill_q75_lanczos_center.jpg" alt="Nikhil Kaza"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://nkaza.github.io/">Nikhil Kaza</a></h5>
      <h6 class="card-subtitle">Professor</h6>
      <p class="card-text">My research interests include urbanization patterns, local energy policy and equity</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.com/citations?user=F0FfN00AAAAJ" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/nkaza" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://orcid.org/0000-0002-9536-7643" target="_blank" rel="noopener">
        <i class="ai ai-orcid"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/nikhilkaza/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>
















  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/post/cleaning-using-spatial-networks/">Cleaning Spatial Networks</a></li>
      
      <li><a href="/post/isochrones-from-routing-engines-osrm/">Isochrones from Routing Engines (OSRM)</a></li>
      
      <li><a href="/post/exploratory-data-analysis-and-visualisation/">Exploratory Data Analysis and Visualisation</a></li>
      
      <li><a href="/post/intersection-density-from-osm-using-qgis-r/">Intersection Density From OSM using QGIS &amp; R</a></li>
      
      <li><a href="/post/analysing-free-form-text/">Analysing Free Form Text</a></li>
      
    </ul>
  </div>
  




  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  



  

  
  <p class="powered-by">
    
      <a href="/privacy/">Privacy Policy</a>
    
    
  </p>
  

  
  <p class="powered-by">
    © 2018-2025 Nikhil Kaza
  </p>
  

  
  





  
  
  
  

  
  
  
    
  

  

  
  <p class="powered-by copyright-license-text">
    Except as otherwise noted, this work is licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0" rel="noopener noreferrer" target="_blank">CC BY SA 4.0</a>, and code samples are licensed under the MIT License.
  </p>
  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-sa/4.0" rel="noopener noreferrer" target="_blank" aria-label="Creative Commons">
      <i class="fab fa-creative-commons fa-2x" aria-hidden="true"></i>
      <i class="fab fa-creative-commons-by fa-2x" aria-hidden="true"></i>
      
      
        <i class="fab fa-creative-commons-sa fa-2x" aria-hidden="true"></i>
      
    </a>
  </p>




  <p class="powered-by">
    
    
    
  </p>
</footer>

    </div>
    
  </div>

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

      

    
    <script src="/js/vendor-bundle.min.b73dfaac3b6499dc997741748a7c3fe2.js"></script>

    
    
    
      
      
        <script src="https://cdn.jsdelivr.net/gh/desandro/imagesloaded@v4.1.4/imagesloaded.pkgd.min.js" integrity="sha512-S5PZ9GxJZO16tT9r3WJp/Safn31eu8uWrzglMahDT4dsmgqWonRY9grk3j+3tfuPr9WJNsfooOR7Gi7HL5W2jw==" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/gh/metafizzy/isotope@v3.0.6/dist/isotope.pkgd.min.js" integrity="sha512-Zq2BOxyhvnRFXu0+WE6ojpZLOU2jdnqbrM1hmVdGzyeCa1DgM3X5Q4A/Is9xA1IkbUeDd7755dNNI/PzSf2Pew==" crossorigin="anonymous"></script>
      

      
      

      

      
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
        
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/r.min.js" crossorigin="anonymous"></script>
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/python.min.js" crossorigin="anonymous"></script>
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/languages/latex.min.js" crossorigin="anonymous"></script>
        
      

    

    
    
    
      <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.min.js" integrity="" crossorigin="anonymous"></script>
    

    
    

    
    
    
      
      <script id="search-hit-fuse-template" type="text/x-template">
        <div class="search-hit" id="summary-{{key}}">
          <div class="search-hit-content">
            <div class="search-hit-name">
              <a href="{{relpermalink}}">{{title}}</a>
              <div class="article-metadata search-hit-type">{{type}}</div>
              <p class="search-hit-description">{{snippet}}</p>
            </div>
          </div>
        </div>
      </script>
      
        <script src="https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
      
    

    
    

    
    
    
    

    
    
      
      
      
      
      
      
      
    

    

    
    
    
    <script id="page-data" type="application/json">{"use_headroom":true}</script>

    
    
      <script src="/js/wowchemy-headroom.1cb9e2fc8399acee94eab837265b73bf.js" type="module"></script>
    
    
    
    
    
    
    
      
      
    
    
    <script src="/en/js/wowchemy.min.247fd8f54253895301106e3006f53f38.js"></script>

    
  <script async defer src="https://buttons.github.io/buttons.js"></script>




</body>
</html>
