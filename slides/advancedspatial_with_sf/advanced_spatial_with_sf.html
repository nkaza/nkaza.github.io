<!DOCTYPE html>
<html lang="en"><head>
<script src="advanced_spatial_with_sf_files/libs/clipboard/clipboard.min.js"></script>
<script src="advanced_spatial_with_sf_files/libs/quarto-html/tabby.min.js"></script>
<script src="advanced_spatial_with_sf_files/libs/quarto-html/popper.min.js"></script>
<script src="advanced_spatial_with_sf_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="advanced_spatial_with_sf_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="advanced_spatial_with_sf_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="advanced_spatial_with_sf_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.335">

  <meta name="author" content="Nikhil Kaza">
  <title>Advanced Spatial Analysis in R</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="advanced_spatial_with_sf_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="advanced_spatial_with_sf_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="advanced_spatial_with_sf_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="advanced_spatial_with_sf_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="advanced_spatial_with_sf_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="advanced_spatial_with_sf_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="advanced_spatial_with_sf_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="advanced_spatial_with_sf_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="advanced_spatial_with_sf_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  
  <script src="advanced_spatial_with_sf_files/libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="advanced_spatial_with_sf_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">
  <script src="advanced_spatial_with_sf_files/libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
  <script src="advanced_spatial_with_sf_files/libs/jquery-1.12.4/jquery.min.js"></script>
  <link href="advanced_spatial_with_sf_files/libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
  <script src="advanced_spatial_with_sf_files/libs/leaflet-1.3.1/leaflet.js"></script>
  <link href="advanced_spatial_with_sf_files/libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
  <script src="advanced_spatial_with_sf_files/libs/proj4-2.6.2/proj4.min.js"></script>
  <script src="advanced_spatial_with_sf_files/libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
  <link href="advanced_spatial_with_sf_files/libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
  <script src="advanced_spatial_with_sf_files/libs/leaflet-binding-2.1.2/leaflet.js"></script>
  <script src="advanced_spatial_with_sf_files/libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
  <script src="advanced_spatial_with_sf_files/libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Advanced Spatial Analysis in R</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Nikhil Kaza 
</div>
</div>
</div>

  <p class="date">5/11/23</p>
</section>
<section id="recap-from-last-week" class="slide level2">
<h2>Recap from last week</h2>
<ul>
<li>Reconceptualising space</li>
<li>Spatial data types</li>
<li>Converting and casting</li>
<li>Visualising spatial data</li>
<li>Reading &amp; writing external files</li>
</ul>
</section>
<section id="a-reminder-about-the-data" class="slide level2">
<h2>A reminder about the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>sm_tbl <span class="sc">%&gt;%</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>    <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 10
  CardID tripid station_name_D station_name_O lon_D lon_O lat_D lat_O
   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1   5690      1 宜山路         星中路          121.  121.  31.2  31.2
2   5690      2 星中路         宜山路          121.  121.  31.2  31.2
3   5951      1 南京东路       新村路          121.  121.  31.2  31.3
4   5951      2 新村路         南京东路        121.  121.  31.3  31.2
5   6032      1 锦绣路         广兰路          122.  122.  31.2  31.2
# ℹ 2 more variables: dat_time_D &lt;dttm&gt;, dat_time_O &lt;dttm&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>distr_sf <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>    <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 5 features and 7 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 120.8527 ymin: 30.94312 xmax: 121.5703 ymax: 31.51392
Geodetic CRS:  WGS 84
  Id     city district citycode adcode Shape_Leng  Shape_Area
1  0 上海城区   青浦区      021 310118  1.9667873 0.063065413
2  0 上海城区   杨浦区      021 310110  0.3234397 0.005743019
3  0 上海城区   闵行区      021 310112  1.5004972 0.035197893
4  0 上海城区   宝山区      021 310113  0.9750052 0.029909024
5  0 上海城区   嘉定区      021 310114  1.2052217 0.043836862
                        geometry
1 MULTIPOLYGON (((121.0643 31...
2 MULTIPOLYGON (((121.5121 31...
3 MULTIPOLYGON (((121.2635 31...
4 MULTIPOLYGON (((121.5023 31...
5 MULTIPOLYGON (((121.3549 31...</code></pre>
</div>
</div>
</section>
<section id="a-reminder-about-the-data-1" class="slide level2">
<h2>A reminder about the data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>subway_stations <span class="ot">&lt;-</span> </span>
<span id="cb5-2"><a href="#cb5-2"></a>    <span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"raw"</span>, <span class="st">"subway_smartcard"</span>, <span class="st">"SUB_Station.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>    <span class="fu">read_csv</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>    <span class="fu">rename</span>(<span class="at">Station=</span><span class="st">"站点"</span>,</span>
<span id="cb5-5"><a href="#cb5-5"></a>           <span class="at">Route=</span><span class="st">"所属线路"</span>,</span>
<span id="cb5-6"><a href="#cb5-6"></a>           <span class="at">District=</span><span class="st">"所属区划"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>    <span class="fu">select</span>(<span class="st">"Station"</span>, <span class="st">"District"</span>)</span>
<span id="cb5-8"><a href="#cb5-8"></a></span>
<span id="cb5-9"><a href="#cb5-9"></a>sm_tbl_2 <span class="ot">&lt;-</span> sm_tbl<span class="sc">%&gt;%</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>      <span class="fu">left_join</span>(subway_stations, </span>
<span id="cb5-11"><a href="#cb5-11"></a>                <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"station_name_D"</span> <span class="ot">=</span> <span class="st">"Station"</span>)</span>
<span id="cb5-12"><a href="#cb5-12"></a>                ) <span class="sc">%&gt;%</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>      <span class="fu">rename</span>(<span class="at">Dist_dest =</span> <span class="st">"District"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-14"><a href="#cb5-14"></a>            <span class="fu">left_join</span>(subway_stations, </span>
<span id="cb5-15"><a href="#cb5-15"></a>                <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"station_name_O"</span> <span class="ot">=</span> <span class="st">"Station"</span>)</span>
<span id="cb5-16"><a href="#cb5-16"></a>                ) <span class="sc">%&gt;%</span></span>
<span id="cb5-17"><a href="#cb5-17"></a>      <span class="fu">rename</span>(<span class="at">Dist_origin =</span> <span class="st">"District"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="font-size: 0.3em">
<div class="cell">
<div class="cell-output-display">

<table class="table table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> CardID </th>
   <th style="text-align:right;"> tripid </th>
   <th style="text-align:left;"> station_name_D </th>
   <th style="text-align:left;"> station_name_O </th>
   <th style="text-align:right;"> lon_D </th>
   <th style="text-align:right;"> lon_O </th>
   <th style="text-align:right;"> lat_D </th>
   <th style="text-align:right;"> lat_O </th>
   <th style="text-align:left;"> dat_time_D </th>
   <th style="text-align:left;"> dat_time_O </th>
   <th style="text-align:left;"> Dist_dest </th>
   <th style="text-align:left;"> Dist_origin </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 5690 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> 宜山路 </td>
   <td style="text-align:left;"> 星中路 </td>
   <td style="text-align:right;"> 121.4226 </td>
   <td style="text-align:right;"> 121.3643 </td>
   <td style="text-align:right;"> 31.18858 </td>
   <td style="text-align:right;"> 31.16001 </td>
   <td style="text-align:left;"> 2015-04-01 12:12:06 </td>
   <td style="text-align:left;"> 2015-04-01 11:52:57 </td>
   <td style="text-align:left;"> 徐汇区 </td>
   <td style="text-align:left;"> 闵行区 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 5690 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 星中路 </td>
   <td style="text-align:left;"> 宜山路 </td>
   <td style="text-align:right;"> 121.3643 </td>
   <td style="text-align:right;"> 121.4226 </td>
   <td style="text-align:right;"> 31.16001 </td>
   <td style="text-align:right;"> 31.18858 </td>
   <td style="text-align:left;"> 2015-04-01 18:39:48 </td>
   <td style="text-align:left;"> 2015-04-01 18:24:04 </td>
   <td style="text-align:left;"> 闵行区 </td>
   <td style="text-align:left;"> 徐汇区 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 5951 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> 南京东路 </td>
   <td style="text-align:left;"> 新村路 </td>
   <td style="text-align:right;"> 121.4801 </td>
   <td style="text-align:right;"> 121.4180 </td>
   <td style="text-align:right;"> 31.24006 </td>
   <td style="text-align:right;"> 31.26578 </td>
   <td style="text-align:left;"> 2015-04-01 14:55:19 </td>
   <td style="text-align:left;"> 2015-04-01 14:24:06 </td>
   <td style="text-align:left;"> 黄浦区 </td>
   <td style="text-align:left;"> 普陀区 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="recap" class="slide level2">
<h2>Recap</h2>
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="fu">tmap_mode</span>(<span class="st">"view"</span>)</span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a>sm_tbl_2 <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>    <span class="fu">group_by</span>(Dist_origin) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6"></a>    <span class="fu">summarise</span>(<span class="at">numtrips =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7"></a>    <span class="fu">inner_join</span>(distr_sf, </span>
<span id="cb6-8"><a href="#cb6-8"></a>               <span class="at">by=</span><span class="fu">c</span>(<span class="st">"Dist_origin"</span> <span class="ot">=</span> <span class="st">"district"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>    <span class="fu">st_as_sf</span>(<span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-10"><a href="#cb6-10"></a>    <span class="fu">tm_shape</span>()<span class="sc">+</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>    <span class="fu">tm_fill</span>(<span class="at">col =</span> <span class="st">"numtrips"</span>, </span>
<span id="cb6-12"><a href="#cb6-12"></a>            <span class="at">palette =</span> <span class="st">"-viridis"</span>, </span>
<span id="cb6-13"><a href="#cb6-13"></a>            <span class="at">type =</span> <span class="st">"seq"</span>,</span>
<span id="cb6-14"><a href="#cb6-14"></a>            <span class="at">style =</span> <span class="st">"quantile"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column fragment">
<div class="cell-output-display">

<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-8c4025cb9b54163173e0" style="width:960px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-8c4025cb9b54163173e0">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"createMapPane","args":["tmap401",401]},{"method":"addProviderTiles","args":["Esri.WorldGrayCanvas",null,"Esri.WorldGrayCanvas",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["OpenStreetMap",null,"OpenStreetMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addProviderTiles","args":["Esri.WorldTopoMap",null,"Esri.WorldTopoMap",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"addPolygons","args":[[[[{"lng":[121.354919433185,121.356689452756,121.362915039298,121.362487792977,121.357727050963,121.354919433185],"lat":[31.2698974612989,31.2727050781768,31.271118164172,31.2691040038467,31.2692871094126,31.2698974612989]}],[{"lng":[121.332092285231,121.329711913774,121.328491210901,121.325500488457,121.322082519693,121.322875976245,121.324523925439,121.328491210901,121.329101562787,121.330505371226,121.331726074099,121.331726074099,121.334106445556,121.338073730119,121.340087890444,121.345092773213,121.348693847543,121.353088379325,121.354919433185,121.354919433185,121.357299804642,121.36010742152,121.361328125293,121.364074706982,121.370300292625,121.374328613275,121.375305175394,121.374084472521,121.372680664081,121.371276855642,121.368103027633,121.365905761742,121.364074706982,121.361511230859,121.359130859402,121.356079101769,121.352294921873,121.349487304995,121.347290039104,121.34429931666,121.344726562081,121.342102050769,121.340515136764,121.337280273566,121.33349609367,121.330078124906,121.32989501934,121.325317382891,121.321105956675,121.31768798791,121.313476562593,121.310913085571,121.308898926145,121.306274413933,121.303527832244,121.301086425598,121.297729492023,121.293884276938,121.290100097941,121.287719726484,121.283508301167,121.282470702961,121.279724121271,121.27752685538,121.279296874951,121.275878906187,121.270080565965,121.266906737956,121.263488769191,121.262512207073,121.260070800427,121.257873535435,121.251281738661,121.246887206879,121.244873046554,121.24230957043,121.238891601666,121.235900879222,121.232727051212,121.228515624996,121.224914550666,121.22247314492,121.219726562331,121.216308593567,121.213500976689,121.209716796793,121.209472656038,121.207092285481,121.204711914024,121.201110839694,121.198303222816,121.195495605038,121.192077636274,121.191894531607,121.188903808264,121.187927246146,121.184509277381,121.18231201149,121.179687500178,121.177490234287,121.174316406277,121.16967773464,121.167114257617,121.165100097292,121.163696288853,121.163085937866,121.161071777541,121.157287597645,121.153930664069,121.151672362989,121.147888183993,121.149475097997,121.149719237853,121.150878906436,121.153930664069,121.156311035526,121.153320312183,121.149902343418,121.147705078427,121.147277832106,121.145874023667,121.144104004097,121.146301269088,121.144470215228,121.142272949337,121.138305663875,121.134704589545,121.135070800677,121.127929687205,121.125305175893,121.124877929573,121.123901367454,121.123718261888,121.123107910002,121.123901367454,121.126525878766,121.127502441784,121.128112792771,121.128723144657,121.127319336218,121.125671387025,121.125671387025,121.125915527779,121.122680663682,121.117675780913,121.11328125003,121.112670898144,121.115295410355,121.11328125003,121.110473633152,121.106872558822,121.104125976233,121.103271484492,121.103271484492,121.103271484492,121.103088378926,121.105102539251,121.108886719147,121.113891601916,121.115295410355,121.111694336025,121.109130859002,121.112670898144,121.115722656675,121.119323730106,121.123901367454,121.127502441784,121.133728027427,121.136718749871,121.144104004097,121.142272949337,121.140075683446,121.142089843771,121.144287109662,121.143676757776,121.14532470697,121.146301269088,121.148498534979,121.149291992432,121.153503417749,121.150878906436,121.150085448984,121.145874023667,121.144104004097,121.146484374654,121.1489257813,121.151306152757,121.154296875201,121.156677245758,121.158874511649,121.158874511649,121.153930664069,121.149291992432,121.14532470697,121.143127441079,121.142700195658,121.142883301223,121.15747070321,121.160888671975,121.164672851871,121.168701171622,121.174926758163,121.179687500178,121.181701660503,121.181274414183,121.181518554937,121.184875488513,121.187683105391,121.190673827835,121.195495605038,121.198730469136,121.201477050825,121.204284667703,121.209289550472,121.209899902359,121.213317871123,121.217285156585,121.221496581902,121.225097656232,121.225280761798,121.226074218351,121.229919433435,121.23107910112,121.233703613331,121.236877441341,121.237487793227,121.239318847987,121.239685058219,121.241699218544,121.243103026983,121.246093750326,121.249694824656,121.251708984082,121.253295898087,121.256713866852,121.25811767619,121.260498046748,121.263122558959,121.263916015512,121.265930175837,121.267089843521,121.269897461299,121.273071289309,121.275878906187,121.278320312832,121.281311035276,121.284484863286,121.287719726484,121.291320800814,121.293518066705,121.296081542829,121.297729492023,121.300720214466,121.301513671919,121.303894043375,121.305114746249,121.306091308367,121.307495116806,121.309692382697,121.312072754154,121.313293457027,121.313110351462,121.310119629018,121.311889648588,121.313293457027,121.31591796834,121.312927245896,121.31408691448,121.315124511787,121.31591796834,121.318908691683,121.320129394556,121.321716308561,121.322326660447,121.322692870679,121.324096680018,121.326477050575,121.329711913774,121.331726074099,121.332092285231,121.330688476792,121.332275390797,121.332275390797,121.330505371226,121.328308105335,121.328918457221,121.328308105335,121.325500488457,121.323303222566,121.314880371032,121.310485840149,121.312072754154,121.311279296702,121.310729980904,121.313110351462,121.316528320226,121.318481445363,121.31768798791,121.316101073906,121.318481445363,121.320129394556,121.321472167806,121.323120117,121.326110839444,121.32672119133,121.324890136571,121.327270508028,121.328918457221,121.331115722213,121.330505371226,121.332519531551,121.334716796543,121.336486816114,121.33349609367,121.332885741784,121.331115722213,121.327880859014,121.328308105335,121.332519531551,121.335510253995,121.33752441432,121.34027099601,121.34112548865,121.338500976439,121.337097168,121.338500976439,121.340087890444,121.341674804449,121.34069824233,121.34387207034,121.341918945203,121.338928222759,121.336486816114,121.334472656688,121.332885741784,121.330688476792,121.327514648782,121.329284668353,121.332092285231],"lat":[31.2977294920225,31.2954711918421,31.2935180667055,31.2921142573671,31.2902832035071,31.2877197264842,31.2864990236111,31.2869262699315,31.2841186521541,31.2819213871624,31.2797241212712,31.2772827146256,31.2758789061866,31.2736816402955,31.2758789061866,31.274902344068,31.2744750977476,31.2730712893086,31.2698974612989,31.2661132814029,31.2620849607524,31.2617187496206,31.2595214846289,31.2592773438744,31.2600708004272,31.2609252930679,31.2567138668515,31.2537231444076,31.2501220700775,31.2468872068791,31.2465209957474,31.247070312445,31.2489013672044,31.2473144531995,31.2429199223166,31.2412719722238,31.2412719722238,31.2395019535523,31.240478515671,31.2412719722238,31.2448730465539,31.2445068363215,31.243286132549,31.2421264648645,31.2393188479865,31.2373046876613,31.2344970698839,31.232482910458,31.23150634744,31.23150634744,31.2299194334352,31.2293090824483,31.2293090824483,31.2305297853214,31.2313232418742,31.2318725585718,31.2327270512125,31.232910155879,31.2341308596515,31.235290527336,31.2412719722238,31.2454833984401,31.247070312445,31.2504882812092,31.2534790036531,31.2539062499735,31.2556762695443,31.2542724611052,31.2548828120921,31.2568969724174,31.2584838864223,31.2609252930679,31.2612915041996,31.2611083986337,31.2609252930679,31.2612915041996,31.2614746097655,31.2623291015069,31.2642822266435,31.2647094729638,31.2642822266435,31.2633056636255,31.2625122070727,31.2589111327426,31.2565307612857,31.2562866214305,31.2587280271767,31.2626953126386,31.2606811523134,31.2614746097655,31.2581176761898,31.2568969724174,31.2561035158646,31.2532958980873,31.2534790036531,31.2556762695443,31.2565307612857,31.2545166018597,31.2542724611052,31.2561035158646,31.2567138668515,31.2583007808564,31.2570800779833,31.2597045901948,31.2625122070727,31.265930175837,31.2681274417281,31.2703247067199,31.2720947262906,31.269714355733,31.2700805659654,31.274902344068,31.2789306638192,31.281494140842,31.2835083011672,31.2858886717249,31.2896728516209,31.2916870119461,31.2937011722713,31.296081542829,31.2985229494746,31.3001098634795,31.3009033200323,31.3032836914892,31.3079223631266,31.3107299809039,31.3074951168063,31.3048706054941,31.304077148042,31.3057250972355,31.3103027345836,31.3134765625933,31.3159179683396,31.318725586117,31.3220825196926,31.3242797855837,31.3270874024617,31.3297119137738,31.3320922852308,31.3339233399902,31.3364868161137,31.3394775394569,31.3441162110943,31.345092773213,31.345092773213,31.3452758787788,31.348876953109,31.3499145504162,31.3529052737594,31.3530883793253,31.3529052737594,31.3524780274391,31.3563232425237,31.3594970705335,31.3630981448636,31.3679199220668,31.3666992191937,31.3682861331985,31.3698730472034,31.3715209963969,31.3729248048359,31.3762817384115,31.3775024412847,31.3789062497237,31.3795166016099,31.3804931637286,31.3811035156148,31.3842773436245,31.386108398384,31.3886718754068,31.3912963867189,31.39349365261,31.3953247073694,31.396301269488,31.3989257816995,31.401489257823,31.4030761718279,31.4050903321532,31.4074707027108,31.4113159177954,31.4124755863793,31.4152832032573,31.4172973635825,31.4223022463516,31.4246826169093,31.4260864253483,31.4274902346866,31.4276733402525,31.4285278319939,31.4301147459988,31.4331054684426,31.4340820314607,31.4351196287679,31.4367065427728,31.438720703098,31.441101074555,31.4440917969989,31.4509277345274,31.4517211910801,31.4512939456591,31.4511108400932,31.452880859664,31.4555053709761,31.4569091794152,31.4598999027584,31.4627075196364,31.4647216799616,31.4675292968396,31.4697265627307,31.4708862304153,31.4729003907405,31.4763183595047,31.4785156253959,31.4807128903876,31.4785156253959,31.4774780271892,31.4780883790755,31.4788818356283,31.4796752930804,31.4837036137308,31.4866943361747,31.4899291993731,31.4946899413877,31.4940795895015,31.4951171877081,31.4921264652642,31.4899291993731,31.4860839842885,31.4821166988266,31.4791259763828,31.4807128903876,31.4843139647177,31.4808959959535,31.4796752930804,31.4808959959535,31.4832763674105,31.484924316604,31.4860839842885,31.4888916011665,31.4888916011665,31.4868774417406,31.4871215815958,31.4890747067324,31.4916992189438,31.4921264652642,31.4921264652642,31.4912719726235,31.4926757810625,31.4926757810625,31.4948730469536,31.4965209961471,31.4984741212837,31.4973144526999,31.4953002932739,31.4946899413877,31.4904785160707,31.4874877927275,31.484924316604,31.4824829099584,31.4822998043925,31.4786987300624,31.4763183595047,31.4741210936136,31.4722900388543,31.4705200192835,31.4697265627307,31.4666748050983,31.4630737307681,31.4592895508721,31.4569091794152,31.457092284981,31.4555053709761,31.4531250004185,31.450500488207,31.4468994138769,31.442504882994,31.4418945311078,31.4406738282347,31.4351196287679,31.4312744136833,31.4302978515647,31.4265136716687,31.4238891603565,31.4204711915922,31.4177246090035,31.4157104495777,31.4129028318003,31.4124755863793,31.4136962892524,31.4107055668085,31.4080810545971,31.4050903321532,31.4035034181483,31.4013061522572,31.3997192382523,31.3992919919319,31.3969116213743,31.3936767581759,31.3909301755872,31.3900756838458,31.3875122068229,31.3848876955108,31.3831176759401,31.3831176759401,31.3811035156148,31.3789062497237,31.3760986328457,31.3746948244067,31.3717041019628,31.3693237305058,31.3666992191937,31.3635253902846,31.3602905270862,31.3580932620944,31.3557128906374,31.3532714839918,31.3524780274391,31.3494873049952,31.3474731446699,31.3457031250992,31.3435058592081,31.3428955082212,31.3389282227593,31.3372802735658,31.3350830076747,31.3325195315512,31.3297119137738,31.3262939450096,31.3234863281316,31.3218994141267,31.3184814453625,31.3182983397966,31.3148803710324,31.3117065430226,31.3084716798242,31.3057250972355,31.3037109378096,31.2990722652729,31.2977294920225]}]],[[{"lng":[121.502319336368,121.502685546601,121.505310058812,121.502319336368],"lat":[31.4085083009174,31.4119262696817,31.4105224612426,31.4085083009174]}],[{"lng":[121.41967773414,121.416687011696,121.415527344012,121.411071777041,121.410095214922,121.407287598044,121.405273437719,121.401489257823,121.3989257817,121.395690917602,121.397277831607,121.399108886366,121.399475097498,121.394897461049,121.393127441478,121.389282226394,121.38989257828,121.38629150395,121.383300781506,121.378906249724,121.377319335719,121.376892089398,121.374511718841,121.371704101963,121.369323730506,121.365295409855,121.361694335525,121.359130859402,121.354919433185,121.357910156529,121.358093262094,121.355102538751,121.351501464421,121.34747314467,121.344726562081,121.343688964774,121.337097168,121.336120605881,121.333129882538,121.331909179665,121.329284668353,121.327514648782,121.330688476792,121.332885741784,121.334472656688,121.336486816114,121.338928222759,121.341918945203,121.34387207034,121.34069824233,121.341674804449,121.340087890444,121.338500976439,121.337097168,121.338500976439,121.34112548865,121.34027099601,121.33752441432,121.335510253995,121.332519531551,121.328308105335,121.327880859014,121.331115722213,121.332885741784,121.33349609367,121.336486816114,121.334716796543,121.332519531551,121.330505371226,121.331115722213,121.328918457221,121.327270508028,121.324890136571,121.32672119133,121.326110839444,121.323120117,121.321472167806,121.320129394556,121.318481445363,121.316101073906,121.31768798791,121.318481445363,121.316528320226,121.313110351462,121.310729980904,121.311279296702,121.312072754154,121.310485840149,121.314880371032,121.323303222566,121.325500488457,121.328308105335,121.328918457221,121.328308105335,121.330505371226,121.332275390797,121.332275390797,121.330688476792,121.332092285231,121.331726074099,121.329711913774,121.326477050575,121.324096680018,121.322692870679,121.322326660447,121.321716308561,121.320129394556,121.318908691683,121.31591796834,121.315124511787,121.31408691448,121.312927245896,121.31591796834,121.313293457027,121.311889648588,121.310119629018,121.313110351462,121.313293457027,121.312072754154,121.309692382697,121.307495116806,121.306091308367,121.305114746249,121.303894043375,121.301513671919,121.300720214466,121.297729492023,121.297485351268,121.297729492023,121.299926757914,121.302307128471,121.305908202801,121.307128906574,121.308715820579,121.311096191136,121.312072754154,121.316284179471,121.315490722919,121.316894531358,121.319091797249,121.320129394556,121.323730468886,121.331298827779,121.338928222759,121.345886230665,121.353088379325,121.357727050963,121.36370849585,121.371704101963,121.401306152257,121.400695800371,121.399475097498,121.401916504143,121.405090332153,121.410705566808,121.414123535573,121.429687499678,121.441528319976,121.459106445306,121.476928710492,121.489074706732,121.49188232451,121.499511718591,121.502319336368,121.516906738355,121.50811767569,121.502929687355,121.499511718591,121.499084472271,121.499511718591,121.50091552703,121.50408935504,121.510498047147,121.521118163672,121.51849365236,121.515930175337,121.513488769591,121.510314941581,121.501708984482,121.499084472271,121.496887207279,121.493896483936,121.491699218944,121.489318847487,121.491699218944,121.494079589502,121.492126465264,121.49188232451,121.492126465264,121.492309569931,121.491271972624,121.487915039048,121.483093261845,121.480285644967,121.476684570637,121.473693847293,121.470275878529,121.467712402405,121.464111328075,121.463684081755,121.460876464877,121.452697754098,121.450683593773,121.448486327882,121.445922851758,121.443298339547,121.442504882994,121.431091309017,121.428283691239,121.430114745999,121.427673340253,121.427490234687,121.42510986323,121.422485351918,121.422119140786,121.418701172022,121.415710449578,121.414916992126,121.414489745805,121.417297363583,121.419128418342,121.418701172022,121.418518066456,121.419921874895,121.419921874895,121.41967773414],"lat":[31.2717285160582,31.2694702149785,31.2677001954078,31.2684936519605,31.2713012697379,31.2719116207248,31.2750854496338,31.2769165034939,31.2785034183981,31.2797241212712,31.2830810548468,31.2860717772907,31.288085937616,31.289489746055,31.2916870119461,31.2938842769379,31.2963256835835,31.2968750002811,31.2965087891494,31.2954711918421,31.2930908203851,31.2913208008143,31.291870117512,31.292297362933,31.2913208008143,31.2916870119461,31.2924804684989,31.2937011722713,31.2958984372631,31.3018798830502,31.3046874999282,31.3043212887965,31.3024902340371,31.3031005859233,31.3018798830502,31.2990722652729,31.298889159707,31.2957153316972,31.296081542829,31.2987060550404,31.2990722652729,31.3037109378096,31.3057250972355,31.3084716798242,31.3117065430226,31.3148803710324,31.3182983397966,31.3184814453625,31.3218994141267,31.3234863281316,31.3262939450096,31.3297119137738,31.3325195315512,31.3350830076747,31.3372802735658,31.3389282227593,31.3428955082212,31.3435058592081,31.3457031250992,31.3474731446699,31.3494873049952,31.3524780274391,31.3532714839918,31.3557128906374,31.3580932620944,31.3602905270862,31.3635253902846,31.3666992191937,31.3693237305058,31.3717041019628,31.3746948244067,31.3760986328457,31.3789062497237,31.3811035156148,31.3831176759401,31.3831176759401,31.3848876955108,31.3875122068229,31.3900756838458,31.3909301755872,31.3936767581759,31.3969116213743,31.3992919919319,31.3997192382523,31.4013061522572,31.4035034181483,31.4050903321532,31.4080810545971,31.4107055668085,31.4136962892524,31.4124755863793,31.4129028318003,31.4157104495777,31.4177246090035,31.4204711915922,31.4238891603565,31.4265136716687,31.4302978515647,31.4312744136833,31.4351196287679,31.4406738282347,31.4418945311078,31.442504882994,31.4468994138769,31.450500488207,31.4531250004185,31.4555053709761,31.457092284981,31.4569091794152,31.4592895508721,31.4630737307681,31.4666748050983,31.4697265627307,31.4705200192835,31.4722900388543,31.4741210936136,31.4763183595047,31.4786987300624,31.4822998043925,31.4824829099584,31.484924316604,31.4874877927275,31.4904785160707,31.4946899413877,31.4953002932739,31.4973144526999,31.4984741212837,31.5012817381618,31.5039062503732,31.5045166013601,31.5068969728171,31.5078735349358,31.5065307616854,31.5039062503732,31.5034790040528,31.5065307616854,31.5062866209308,31.5034790040528,31.5015258789163,31.5020751956138,31.5051269532464,31.506103515365,31.5100708008268,31.5139160159114,31.5120849611521,31.5100708008268,31.508483886822,31.506103515365,31.5029296873552,31.4880981446137,31.4851074221698,31.4822998043925,31.4799194338349,31.4780883790755,31.4744873047454,31.4724731444201,31.4603271481794,31.4525146485323,31.440124511537,31.429321289446,31.4204711915922,31.4179077145694,31.4107055668085,31.4085083009174,31.3969116213743,31.3878784179547,31.3811035156148,31.3756713865253,31.3715209963969,31.3668823238602,31.3638916014163,31.3593139649676,31.3541259766326,31.348876953109,31.3449096676471,31.3461303714196,31.3430786128877,31.3442993166602,31.3477172854244,31.345092773213,31.3422851563349,31.338500976439,31.3356933595609,31.3327026371171,31.3308715823577,31.3284912109007,31.3256835940227,31.3226928706795,31.3189086916829,31.3148803710324,31.3134765625933,31.3134765625933,31.3134765625933,31.3167114257917,31.3167114257917,31.3168945313576,31.3175048832438,31.3176879879103,31.3182983397966,31.3218994141267,31.3228759762454,31.3228759762454,31.3214721678063,31.3204956056877,31.3197021482356,31.3190917972487,31.3211059566746,31.322509766013,31.3204956056877,31.3140869144796,31.3126831051412,31.3087158205787,31.3052978518145,31.3051147462486,31.3016967774843,31.2990722652729,31.298889159707,31.2966918947152,31.2941284176924,31.2930908203851,31.291870117512,31.2896728516209,31.2860717772907,31.281494140842,31.2775268553801,31.2717285160582]}]],[[{"lng":[121.452880859664,121.453918456971,121.454711914423,121.455505370976,121.456115722862,121.456909179415,121.457275390547,121.457702636867,121.458129883188,121.460510253745,121.46209716775,121.463500976189,121.464111328075,121.465087890194,121.465515136514,121.466125488401,121.468322754292,121.470275878529,121.470520019284,121.466674805098,121.464294433641,121.461730956618,121.460510253745,121.461486816763,121.463684081755,121.464904785527,121.463928222509,121.461303711197,121.455078124656,121.452880859664,121.452880859664,121.454528808858,121.457885742433,121.464294433641,121.46527099576,121.464904785527,121.463317871523,121.460327148179,121.458679198986,121.458312987854,121.458312987854,121.454284668103,121.450500488207,121.44812011675,121.447692871329,121.445922851758,121.443725585867,121.44268798856,121.445129394306,121.447082519443,121.447326660197,121.446105957324,121.446472167557,121.444885253552,121.443115233981,121.440917968989,121.438476562344,121.436706542773,121.433715820329,121.43188476557,121.432922362877,121.434326172215,121.433471679574,121.433288574009,121.432678223022,121.43231201189,121.424682616909,121.416870117262,121.413879394818,121.410705566808,121.409484863036,121.408325195351,121.407104492478,121.404479980267,121.400695800371,121.398071289059,121.395324707369,121.390075683846,121.388305664275,121.386901855836,121.389099120828,121.388122558709,121.3903198246,121.3903198246,121.392517089592,121.393676758176,121.395507812935,121.399719238252,121.407714843465,121.409912109356,121.411071777041,121.410705566808,121.408325195351,121.408081054597,121.411499023361,121.415893554244,121.417480469148,121.417480469148,121.417724609004,121.419494628574,121.4215087889,121.423522949225,121.425903320682,121.427490234687,121.428894043126,121.43048095713,121.433105468443,121.432495117456,121.431701660004,121.430908203451,121.432678223022,121.434326172215,121.434875488013,121.437072753905,121.440307617103,121.442871094126,121.444702148885,121.44628906289,121.448486327882,121.450683593773,121.452880859664],"lat":[31.2219238282221,31.2199096678969,31.218322753892,31.216918945453,31.215515137014,31.2133178711229,31.2100830079245,31.2075195309017,31.2055053714757,31.2056884761423,31.2061157224627,31.2031250000188,31.2009277341277,31.1984863283814,31.1961059569244,31.1931152344806,31.1926879881602,31.1918945316074,31.1895141601504,31.1879272461455,31.1860961913862,31.1831054689423,31.1788940427259,31.1743164062772,31.1691284179422,31.163330077721,31.1600952145226,31.1571044920787,31.1514892574233,31.1484985349795,31.1455078125356,31.1412963863192,31.136474609116,31.129882812342,31.125671387025,31.1207275394444,31.1179199216671,31.1135253907842,31.1099243164541,31.1066894532557,31.1038818363777,31.1032714844915,31.1030883789256,31.1032714844915,31.1051025392508,31.1065063476898,31.1072998042426,31.1087036135809,31.1096801756996,31.11010742202,31.1116943360248,31.1151123047891,31.1171264651143,31.1173095706802,31.1166992187939,31.1168823243598,31.115295410355,31.1145019529029,31.114318847337,31.115295410355,31.1187133791192,31.1215209959972,31.1243286128752,31.1259155277795,31.1281127927712,31.1301269530965,31.1301269530965,31.1290893557892,31.1334838866721,31.1373291017567,31.1389160157616,31.1406860353323,31.1433105466444,31.1484985349795,31.1580810550967,31.1641235351731,31.1630859378658,31.1614990238609,31.1665039066301,31.1704711911926,31.1724853515178,31.1749267581634,31.1763305666024,31.1788940427259,31.1798706057439,31.1810913086171,31.1807250974853,31.1818847660692,31.1843261718154,31.1853027339341,31.1873168942593,31.1892700193959,31.1896972657163,31.192077636274,31.1937255863668,31.1928710937261,31.194274902165,31.1961059569244,31.1975097653634,31.1992797849342,31.2005004887067,31.2012939452594,31.2020874027115,31.2026977536984,31.2034912111505,31.2041015621375,31.2061157224627,31.2078857420334,31.2100830079245,31.2125244136708,31.2135009766887,31.2147216795619,31.2161254880009,31.216918945453,31.2175292964399,31.2178955075717,31.218322753892,31.2188720705896,31.2199096678969,31.2213134763359,31.2219238282221]}]],[[{"lng":[121.349670410561,121.351684569987,121.352478027439,121.356079101769,121.358520507515,121.359680176099,121.360900878972,121.361877441091,121.364074706982,121.365295409855,121.366271972873,121.367492675746,121.36871337862,121.371276855642,121.37231445295,121.373291015968,121.374084472521,121.374877929973,121.375488280959,121.375305175394,121.373107910402,121.370300292625,121.364074706982,121.361328125293,121.361083984538,121.359497070533,121.357482910208,121.356079101769,121.354919433185,121.355285644317,121.357299804642,121.359130859402,121.362304687411,121.362670898543,121.356689452756,121.354309082198,121.353088379325,121.348693847543,121.345092773213,121.340087890444,121.338073730119,121.334106445556,121.331726074099,121.331726074099,121.330505371226,121.329101562787,121.328491210901,121.324523925439,121.322875976245,121.321716308561,121.322509766013,121.325500488457,121.328491210901,121.329711913774,121.331909179665,121.334106445556,121.336120605881,121.337097168,121.342285156335,121.344482422226,121.344726562081,121.346496581652,121.348327636411,121.350708007868,121.352478027439,121.355102538751,121.358093262094,121.357910156529,121.354919433185,121.359130859402,121.361694335525,121.365295409855,121.369323730506,121.371704101963,121.374511718841,121.376892089398,121.377319335719,121.378112793171,121.380126953496,121.383300781506,121.38629150395,121.38989257828,121.389282226394,121.393127441478,121.394714355483,121.395690917602,121.399475097498,121.399108886366,121.397277831607,121.395690917602,121.398071289059,121.399902343818,121.401672363389,121.401306152257,121.404724121021,121.406311035026,121.407287598044,121.410095214922,121.411071777041,121.415527344012,121.41650390613,121.417297363583,121.418884277587,121.420104980461,121.422119140786,121.423522949225,121.424926757664,121.426696777234,121.42871093756,121.433471679574,121.437683105791,121.441284180121,121.443725585867,121.445312499872,121.445922851758,121.445129394306,121.446472167557,121.446105957324,121.445129394306,121.443908691433,121.444885253552,121.442321777428,121.439880370783,121.438476562344,121.437316894659,121.434692382448,121.432922362877,121.431274413683,121.429077148691,121.4268798828,121.42510986323,121.423522949225,121.422912597339,121.421081542579,121.418518066456,121.415527344012,121.410888671475,121.411315917795,121.409484863036,121.407104492478,121.404113769135,121.401489257823,121.399108886366,121.395690917602,121.394897461049,121.392272948838,121.384704589945,121.382507324054,121.378906249724,121.374877929973,121.371887206629,121.369079589751,121.366699219194,121.363891601416,121.362304687411,121.361083984538,121.357116699076,121.354919433185,121.351684569987,121.349670410561],"lat":[31.239074707232,31.2401123045393,31.2421264648645,31.2412719722238,31.24188232411,31.2438964844353,31.2462768558922,31.2481079097523,31.2489013672044,31.2476806643313,31.2467041013133,31.2459106447605,31.2473144531995,31.2468872068791,31.2493286135248,31.2510986330955,31.2537231444076,31.2556762695443,31.2573242187378,31.2604980467475,31.2612915041996,31.2600708004272,31.2592773438744,31.2595214846289,31.2614746097655,31.2617187496206,31.2619018551865,31.2628784182045,31.2661132814029,31.2689208982809,31.2692871094126,31.2692871094126,31.2686767575264,31.2705078122858,31.2727050781768,31.2706909178517,31.2730712893086,31.2744750977476,31.274902344068,31.2758789061866,31.2736816402955,31.2758789061866,31.2772827146256,31.2797241212712,31.2819213871624,31.2841186521541,31.2869262699315,31.2864990236111,31.2877197264842,31.289489746055,31.290893554494,31.2921142573671,31.2935180667055,31.2954711918421,31.2963256835835,31.2954711918421,31.2957153316972,31.298889159707,31.298889159707,31.2990722652729,31.3018798830502,31.302673339603,31.3035278322437,31.3016967774843,31.3032836914892,31.3043212887965,31.3046874999282,31.3018798830502,31.2958984372631,31.2937011722713,31.2924804684989,31.2916870119461,31.2913208008143,31.292297362933,31.291870117512,31.2913208008143,31.2930908203851,31.2951049807103,31.296081542829,31.2965087891494,31.2968750002811,31.2963256835835,31.2938842769379,31.2916870119461,31.2899169923754,31.2885131839363,31.288085937616,31.2860717772907,31.2830810548468,31.2797241212712,31.2785034183981,31.2785034183981,31.2778930665119,31.2756958006208,31.2750854496338,31.2747192385021,31.2719116207248,31.2713012697379,31.2684936519605,31.2677001954078,31.2692871094126,31.2705078122858,31.2706909178517,31.2720947262906,31.27392578105,31.2750854496338,31.2764892580728,31.274902344068,31.2733154300631,31.271118164172,31.2694702149785,31.2650756831963,31.2620849607524,31.2603149411817,31.2576904298695,31.2556762695443,31.2531127925214,31.2503051756434,31.248474120884,31.2468872068791,31.2446899409881,31.2437133788694,31.2424926759962,31.2415161129783,31.2410888675573,31.2395019535523,31.2385253905344,31.2374877932271,31.2368774413409,31.2368774413409,31.2351074217701,31.2330932614449,31.2313232418742,31.2310791011197,31.2299194334352,31.227294922123,31.2302856445669,31.2266845702368,31.2252807617978,31.2244873043456,31.2243041987798,31.2230834959067,31.2224731449198,31.2224731449198,31.2205200197831,31.2205200197831,31.2205200197831,31.2208862309149,31.2216796874677,31.2216796874677,31.2224731449198,31.2216796874677,31.2244873043456,31.2250976562319,31.225891113684,31.2279052731099,31.2282714842416,31.2310791011197,31.2354736329019,31.239074707232]}]],[[{"lng":[121.512084961152,121.512329101907,121.510925292568,121.508483886822,121.506103515365,121.503906250373,121.502075195614,121.502075195614,121.501708984482,121.499084472271,121.497497558266,121.494873046954,121.492126465264,121.492126465264,121.491699218944,121.492126465264,121.493286132949,121.495910644261,121.497924804586,121.496887207279,121.493713379269,121.488891601167,121.485900878723,121.48510742217,121.483520508165,121.481079101519,121.481079101519,121.481689453406,121.484497070284,121.486694336175,121.488891601167,121.491271972624,121.492309569931,121.492126465264,121.49188232451,121.492126465264,121.494323730256,121.493713379269,121.491699218944,121.489318847487,121.491699218944,121.493896483936,121.496887207279,121.499084472271,121.501708984482,121.510314941581,121.513488769591,121.515930175337,121.51849365236,121.521118163672,121.541320801214,121.545104980211,121.551513672318,121.554321289196,121.556274414333,121.557678222772,121.557495117206,121.557495117206,121.558288574658,121.561279297102,121.564880371432,121.565307616853,121.564270019546,121.561706542523,121.559326171965,121.554870605894,121.550903320432,121.543273925451,121.536499023111,121.532104492229,121.527709961346,121.523315429563,121.519897460799,121.515930175337,121.512084961152],"lat":[31.2493286135248,31.2532958980873,31.2573242187378,31.2604980467475,31.263122558959,31.2650756831963,31.2681274417281,31.2706909178517,31.2733154300631,31.2750854496338,31.2766723636387,31.2780761720777,31.279113769385,31.280517577824,31.2835083011672,31.2863159180453,31.2879028320501,31.2896728516209,31.2916870119461,31.2966918947152,31.2968750002811,31.2958984372631,31.2949218751445,31.2965087891494,31.3001098634795,31.3060913083672,31.3093261715656,31.3134765625933,31.3134765625933,31.3134765625933,31.3134765625933,31.3134765625933,31.3148803710324,31.3189086916829,31.3226928706795,31.3256835940227,31.3275146487821,31.329528808208,31.3308715823577,31.3327026371171,31.3356933595609,31.338500976439,31.3422851563349,31.345092773213,31.3477172854244,31.3442993166602,31.3430786128877,31.3461303714196,31.3449096676471,31.348876953109,31.3414916988829,31.3399047848779,31.3361206058813,31.3334960936699,31.3300781249056,31.3233032225657,31.3115234374567,31.3054809573803,31.3018798830502,31.2963256835835,31.2874755857297,31.282897949281,31.2778930665119,31.2741088866159,31.271118164172,31.2664794925346,31.2636718747573,31.2581176761898,31.2537231444076,31.2517089840824,31.2504882812092,31.2493286135248,31.2490844727703,31.2490844727703,31.2493286135248]}]],[[{"lng":[121.321716308561,121.322875976245,121.324707031005,121.325500488457,121.326904296896,121.327270508028,121.329528808208,121.329711913774,121.330871582358,121.332275390797,121.333312988104,121.33392333999,121.332702637117,121.335083007675,121.337280273566,121.338317870873,121.339721679312,121.34027099601,121.341491698883,121.342529297089,121.34429931666,121.345703125099,121.34747314467,121.349121093863,121.351074219,121.352478027439,121.349670410561,121.34790039099,121.344116211094,121.345275878779,121.346679687218,121.348876953109,121.354309082198,121.358520507515,121.36010742152,121.361328125293,121.362304687411,121.363281250429,121.364685058868,121.366271972873,121.367126464615,121.36688232386,121.36370849585,121.361694335525,121.359924316854,121.357482910208,121.359313964968,121.355285644317,121.352722168194,121.353698730312,121.348876953109,121.342285156335,121.338928222759,121.337280273566,121.335327148429,121.333129882538,121.331481933345,121.331298827779,121.330688476792,121.330871582358,121.330871582358,121.330688476792,121.329528808208,121.329284668353,121.329101562787,121.329284668353,121.329101562787,121.329101562787,121.329101562787,121.328918457221,121.329101562787,121.328674316467,121.336303710548,121.339111328325,121.335327148429,121.334106445556,121.332092285231,121.330505371226,121.328918457221,121.326477050575,121.324279785584,121.322509766013,121.322509766013,121.321472167806,121.323913574452,121.328674316467,121.340515136764,121.345703125099,121.349487304995,121.353698730312,121.355712890638,121.356689452756,121.356689452756,121.358276366761,121.358520507515,121.358093262094,121.358520507515,121.360717773407,121.359497070533,121.356872558322,121.357299804642,121.357910156529,121.356872558322,121.353515624746,121.350708007868,121.349670410561,121.347290039104,121.348083495657,121.351074219,121.351318359755,121.350097655982,121.347106933538,121.345703125099,121.343505859208,121.341308593317,121.339904784878,121.335510253995,121.332092285231,121.329711913774,121.326477050575,121.323913574452,121.321472167806,121.318481445363,121.315673828484,121.312927245896,121.310119629018,121.308471679824,121.306884765819,121.303527832244,121.302124023805,121.299316406027,121.298095703154,121.294128417692,121.293090820385,121.29107666006,121.290283203507,121.28833007837,121.285522460593,121.284912109606,121.285095215172,121.285888671725,121.286315918045,121.285095215172,121.28430175772,121.281494140842,121.277893066512,121.27709960906,121.275085449634,121.274291992182,121.270874023417,121.268676757526,121.26672363239,121.26489257853,121.262084960752,121.261108398634,121.25811767619,121.25451660186,121.251281738661,121.244873046554,121.242126464865,121.24188232411,121.240112304539,121.240905761991,121.238525390534,121.236328124643,121.233276367011,121.230529785321,121.230102539001,121.222106933788,121.218688965024,121.216491699133,121.213073730368,121.209472656038,121.205871581708,121.203125000019,121.196472168056,121.193725586367,121.190490722269,121.18591308582,121.182678222622,121.179321289046,121.173706054391,121.169494629074,121.16607666031,121.161682128527,121.159484863536,121.157287597645,121.154296875201,121.15252685563,121.151916503744,121.151916503744,121.1489257813,121.145690918101,121.143676757776,121.140319824201,121.13812255831,121.137695312888,121.134277344124,121.132873534786,121.133911132992,121.135070800677,121.135314941431,121.136718749871,121.13629150355,121.12951660121,121.127075195464,121.125915527779,121.123901367454,121.119873046804,121.117675780913,121.112915038898,121.108276367261,121.10650634769,121.108093261695,121.112304687911,121.114685058469,121.11688232436,121.1096801757,121.105712890238,121.103271484492,121.100524901903,121.100097656482,121.098693848043,121.095520019134,121.092102050369,121.090087890943,121.087524413921,121.084472656288,121.085083008174,121.088684081605,121.091491699382,121.092895507821,121.094116210695,121.09252929669,121.090270996509,121.089904785378,121.087280273166,121.084472656288,121.08032226526,121.076904296496,121.072082519293,121.067871093976,121.065490722519,121.063720702948,121.05688476542,121.052124023405,121.048522949075,121.043701171872,121.040710449428,121.038513183537,121.036682128777,121.035888672224,121.03430175822,121.031311034876,121.030273437569,121.02752685588,121.024475097348,121.020690918351,121.020507812785,121.021118163772,121.021911621224,121.023071288909,121.024108887116,121.024291991782,121.025329589989,121.026306152107,121.027099609559,121.027099609559,121.025878906686,121.024719238102,121.023681640795,121.028503417998,121.029479980117,121.030273437569,121.031311034876,121.035888672224,121.038513183537,121.038879394668,121.040710449428,121.040527343862,121.039123535423,121.042724609753,121.04650878875,121.048095702754,121.052673340103,121.052917480857,121.054077148542,121.055908203301,121.057922363626,121.06091308607,121.06408691408,121.06768798841,121.072326660047,121.074279785184,121.076293945509,121.076293945509,121.083679198836,121.089904785378,121.093078613387,121.091308593817,121.091125488251,121.094482421826,121.094909668147,121.095092773713,121.095520019134,121.099487304596,121.099670410161,121.099670410161,121.098327636911,121.09747314427,121.092895507821,121.088500976939,121.084472656288,121.081298828278,121.08392333959,121.0870971676,121.091918945703,121.092285155935,121.095520019134,121.093078613387,121.091491699382,121.089294433491,121.090881347496,121.09069824193,121.087280273166,121.086303711047,121.085327148029,121.082702636717,121.080688476392,121.077880859514,121.076477051075,121.079284667953,121.081726074599,121.083679198836,121.087280273166,121.089477539057,121.089111327925,121.090087890943,121.094299316261,121.09613037102,121.09747314427,121.101318359355,121.104309081799,121.10650634769,121.11370849635,121.113525390784,121.115905761342,121.121520995997,121.122924804436,121.121704101563,121.118896484685,121.11688232436,121.115722656675,121.114318847337,121.111694336025,121.108520508015,121.105895995804,121.104492187365,121.102722167794,121.100524901903,121.097900390591,121.09613037102,121.095092773713,121.095886230265,121.095275879278,121.094482421826,121.093505859708,121.095092773713,121.094116210695,121.09613037102,121.098693848043,121.100708007469,121.100524901903,121.103881836378,121.105895995804,121.108520508015,121.110717773007,121.113525390784,121.115905761342,121.119689941238,121.121887207129,121.125488281459,121.127502441784,121.128723144657,121.130676269794,121.132873534786,121.137329101757,121.13989257788,121.142089843771,121.145507812536,121.14709472654,121.1489257813,121.150878906436,121.151672362989,121.151123047191,121.149902343418,121.15252685563,121.154907226188,121.160095214523,121.161499023861,121.163085937866,121.166870116862,121.170288085627,121.169494629074,121.168518066056,121.170288085627,121.169921875394,121.172912597838,121.174926758163,121.179321289046,121.179870605744,121.178527831594,121.176696777734,121.175720214716,121.176696777734,121.177307128721,121.177490234287,121.183105468942,121.187316894259,121.191528320476,121.193115234481,121.194702148485,121.196899414377,121.19812011725,121.20172119158,121.204711914024,121.212280273816,121.216125488001,121.222290039354,121.222717284775,121.22247314492,121.221496581902,121.220703125349,121.219726562331,121.218505859458,121.217285156585,121.216918945453,121.219299316011,121.222900390341,121.225097656232,121.227478027689,121.229675292681,121.231689453006,121.232299804892,121.232727051212,121.235473632902,121.240295410105,121.240722656426,121.240478515671,121.24230957043,121.244323730756,121.246887206879,121.250305175643,121.253295898087,121.253295898087,121.253906249974,121.257080077983,121.256713866852,121.256713866852,121.260681152313,121.27032470672,121.273071289309,121.276672363639,121.278930663819,121.280517577824,121.282714843715,121.278503418398,121.275329589489,121.272521972611,121.273681640296,121.27392578105,121.276489258073,121.278930663819,121.28112792971,121.283325195601,121.285705566159,121.287719726484,121.291870117512,121.294128417692,121.296875000281,121.30187988305,121.306518554688,121.311279296702,121.314270019146,121.316528320226,121.319091797249,121.321105956675,121.321716308561],"lat":[31.160522460843,31.1588745116495,31.1583251949518,31.1557006836397,31.1536865233144,31.1513061527568,31.1503295897388,31.1483154294136,31.1463012690883,31.1455078125356,31.1439208985307,31.1417236326396,31.1403198242006,31.1390991213274,31.1370849610022,31.1345214839794,31.1323242189875,31.1303100586623,31.1282958983371,31.1273193362184,31.125671387025,31.1234741211338,31.1212768552427,31.1188964846851,31.1154785159208,31.112915038898,31.1107177730069,31.109130859002,31.1087036135809,31.1052856448167,31.1016845704866,31.1019287112411,31.1019287112411,31.1010742186003,31.0980834961564,31.0952758792785,31.0930786133874,31.0914916993825,31.0889282223596,31.0855102535954,31.0828857422832,31.0803222652604,31.080871581958,31.0803222652604,31.0769042964961,31.0745239259385,31.0711059571742,31.0695190431694,31.0687255857172,31.0661010744051,31.0632934566278,31.0617065426229,31.061096191636,31.0642700196457,31.0640869140799,31.0634765621936,31.064880371532,31.0629272463954,31.0604858397497,31.0554809569807,31.0510864260978,31.0477294925221,31.0435180663058,31.0405273438619,31.0369262695318,31.0333251952017,31.0314941404423,31.0285034179984,31.0255126955545,31.0225219722113,31.0189208987805,31.0161132810032,31.0156860355821,31.0164794921349,31.0123291020065,31.0089111332422,31.0061035154649,31.0045166014601,31.0026855467007,30.9998779298227,30.9984741213837,30.9973144527998,30.9921264644648,30.9849243167039,30.9830932619445,30.9830932619445,30.9785156245965,30.9780883791754,30.9786987301623,30.9799194339348,30.9777221680437,30.9736938473932,30.9669189450534,30.9614868159638,30.9581298823882,30.9536743163167,30.9505004883069,30.9498901364207,30.9476928714289,30.9468994139768,30.9442749026647,30.940124511637,30.9368896484386,30.9365234373068,30.9351196288678,30.9332885741085,30.9315185545377,30.9259033198824,30.9230957030043,30.9208984371132,30.9182739258011,30.9151000977913,30.9138793949182,30.9149169922255,30.9141235347734,30.9113159178954,30.9102783205881,30.9088745121491,30.9097290038904,30.9102783205881,30.9113159178954,30.9110717771409,30.910888671575,30.9133300782206,30.9122924809133,30.9113159178954,30.9127197263343,30.9116821290271,30.9121093753474,30.9143066403392,30.9143066403392,30.9113159178954,30.9119262697816,30.9152832033572,30.9171142581166,30.9199218749946,30.9202880861263,30.9194946286742,30.9163208006645,30.9121093753474,30.9097290038904,30.9049072266872,30.9022827144757,30.8992919920319,30.8980712891587,30.898681641045,30.8969116214742,30.8972778317066,30.8994750975977,30.897705078027,30.9019165042433,30.9025268552302,30.9033203126824,30.9047241211213,30.9086914065832,30.9097290038904,30.9099121094563,30.9110717771409,30.9121093753474,30.9113159178954,30.9135131837864,30.9196777342401,30.9218750001312,30.9221191408857,30.9274902347865,30.9276733394531,30.9287109376597,30.9307250979849,30.9298706053442,30.9326782222223,30.9317016601036,30.9290771487914,30.9259033198824,30.9230957030043,30.9221191408857,30.9208984371132,30.9202880861263,30.9194946286742,30.9193115231084,30.9180908202352,30.917480468349,30.9172973636825,30.9172973636825,30.9172973636825,30.9202880861263,30.9223022464516,30.9227294918726,30.9224853511181,30.9216918945654,30.9177246091035,30.9135131837864,30.9127197263343,30.9138793949182,30.9152832033572,30.9166870117962,30.9179077146694,30.9208984371132,30.9208984371132,30.9155273441117,30.9136962893523,30.9124755855798,30.9091186520042,30.9064941406921,30.9035034182482,30.9030761719279,30.9022827144757,30.9041137692351,30.9049072266872,30.9050903322531,30.9030761719279,30.9033203126824,30.900085449484,30.9022827144757,30.9050903322531,30.9107055660091,30.9130859374661,30.9221191408857,30.9235229493247,30.9238891604564,30.9224853511181,30.9221191408857,30.9243164058775,30.9263305662027,30.9281005857734,30.9238891604564,30.9221191408857,30.9188842776873,30.9168701173621,30.9136962893523,30.9124755855798,30.9114990234612,30.9107055660091,30.9078979491311,30.9058837888059,30.9044799803668,30.9069213870125,30.9061279295603,30.90570068324,30.9069213870125,30.9074707028107,30.9074707028107,30.9063110351262,30.9044799803668,30.9061279295603,30.9058837888059,30.9055175785734,30.9055175785734,30.9044799803668,30.9041137692351,30.9020996098092,30.9025268552302,30.906677246258,30.904296874801,30.9047241211213,30.9083251954515,30.9091186520042,30.9099121094563,30.9116821290271,30.9138793949182,30.9166870117962,30.9194946286742,30.9237060548905,30.9265136717686,30.9296874997784,30.9334716796743,30.935729980754,30.9382934568776,30.9420776367735,30.9440917970988,30.9462890620906,30.94812011685,30.9492797854338,30.951904296746,30.9550781247557,30.95849609352,30.9586791990858,30.9592895509721,30.9619140622842,30.9647216800615,30.9677124025054,30.9708862305152,30.9716796870679,30.9714965824014,30.9677124025054,30.9666748042988,30.9639282226094,30.9617309567183,30.9586791990858,30.9581298823882,30.9572753906468,30.9569091795151,30.9570922850809,30.9589233398403,30.9613037112973,30.962280273416,30.9641113281753,30.9652709958598,30.9671020506192,30.9680786136371,30.9705200193835,30.9750976558322,30.9750976558322,30.9835205073656,30.9909057615916,30.9959106443608,30.9984741213837,31.0048828125918,31.0095214842291,31.0114746093658,31.0136718752569,31.0181274413284,31.0222778323561,31.0253295899886,31.0278930661121,31.0297241208715,31.028076171678,31.0285034179984,31.0335083007675,31.0343017582196,31.0408935549936,31.0416870115464,31.0424804689985,31.0449218747448,31.0477294925221,31.0494995120928,31.0509033205319,31.0531005855237,31.0548706050944,31.0529174808571,31.0562744144327,31.0588989257449,31.061096191636,31.0640869140799,31.066711425392,31.0665283207255,31.0632934566278,31.0604858397497,31.0582885738586,31.0582885738586,31.055908203301,31.0584716794245,31.0595092776311,31.0588989257449,31.058715820179,31.0581054691921,31.0604858397497,31.0598754878635,31.0598754878635,31.0612792972018,31.0687255857172,31.0689086912831,31.0720825192929,31.0745239259385,31.0776977539483,31.0783081058345,31.0797119142735,31.0814819338442,31.0825195311515,31.0841064451564,31.0831298830377,31.082275390397,31.0833129886036,31.0864868166133,31.0897216798117,31.0916748049484,31.0933227541419,31.0949096681467,31.0972900387044,31.1016845704866,31.1002807620476,31.103515625246,31.103515625246,31.1051025392508,31.1087036135809,31.11010742202,31.1135253907842,31.1123046879111,31.1110839841386,31.1102905275858,31.1071166995761,31.1052856448167,31.1030883789256,31.1041259762329,31.1010742186003,31.1007080074686,31.1005249019028,31.0999145509159,31.0994873045955,31.0963134765857,31.0963134765857,31.0941162106946,31.0921020503694,31.0933227541419,31.0952758792785,31.1008911130345,31.1038818363777,31.103515625246,31.1029052733597,31.1030883789256,31.1063232421239,31.1102905275858,31.1107177730069,31.1107177730069,31.1132812500297,31.1160888669077,31.1171264651143,31.1198730468037,31.1207275394444,31.1193237301061,31.1207275394444,31.1231079100021,31.1262817380119,31.1292724613551,31.1315307615355,31.1342773441242,31.1398925778802,31.1455078125356,31.1433105466444,31.1414794918851,31.1403198242006,31.1411132816527,31.1417236326396,31.1428833012234,31.1406860353323,31.1403198242006,31.137878417555,31.1397094723143,31.1405029297665,31.1412963863192,31.1389160157616,31.1367187498705,31.1345214839794,31.1318969726672,31.1292724613551,31.1259155277795,31.1220703126948,31.1179199216671,31.1173095706802,31.118103027233,31.1187133791192,31.1193237301061,31.1203002931241,31.1207275394444,31.12408447302,31.1276855464508,31.1282958983371,31.1279296872053,31.1315307615355,31.1328735347859,31.1359252933177,31.1356811525632,31.1354980469973,31.1347045895452,31.1339111329925,31.1306762697941,31.1290893557892,31.1303100586623,31.1331176755403,31.1350708006769,31.1375122073226,31.1367187498705,31.1361083988836,31.1356811525632,31.1376953128884,31.1390991213274,31.1412963863192,31.1444702152283,31.1475219728608,31.1470947265404,31.1494750979974,31.1536865233144,31.1527099611958,31.1533203121827,31.1550903317535,31.1544799807666,31.154724121521,31.1552734373194,31.1561279299601,31.1566772457583,31.1574707032104,31.1591186524039,31.160522460843,31.1621093748478,31.1597290042902,31.160522460843,31.1644897463048,31.1622924804137,31.160522460843]}]],[[{"lng":[121.93908691413,121.942504882894,121.946899413777,121.953125000319,121.965087890993,121.976501464971,121.985473633202,122.004272460506,122.006713867151,122.008300781156,122.00769042927,122.006286620831,122.001098632496,121.995300293174,121.991516113278,121.971679687767,121.966674804998,121.961486816663,121.955505370876,121.948486327782,121.943908691333,121.940673828135,121.938476562244,121.937683105691,121.93908691413],"lat":[31.2177124020058,31.2265014646709,31.2310791011197,31.232482910458,31.232482910458,31.2302856445669,31.2266845702368,31.2230834959067,31.2194824215766,31.2120971682498,31.1940917965992,31.1901245120367,31.1790771482918,31.167114257617,31.1629028322999,31.1608886719747,31.1597290042902,31.1597290042902,31.1614990238609,31.1694946290739,31.1787109371601,31.1890869138301,31.2006835933732,31.2098999023586,31.2177124020058]}],[{"lng":[121.878112793071,121.885925292718,121.893310546944,121.901916504043,121.911315917696,121.919494628474,121.922729492572,121.923522949125,121.921325683234,121.918273925601,121.914672851271,121.909729003691,121.904724120922,121.897521972261,121.885070800977,121.881103515515,121.878479004203,121.877319335619,121.876892090198,121.878112793071],"lat":[31.2424926759962,31.2448730465539,31.2443237307556,31.2416992185442,31.2388916016661,31.2360839847881,31.2318725585718,31.2263183591051,31.2077026364676,31.1990966793683,31.1964721680562,31.1961059569244,31.1975097653634,31.2036743167164,31.2172851565848,31.2227172847749,31.2279052731099,31.2332763670108,31.2385253905344,31.2424926759962]}],[{"lng":[121.566101074305,121.564270019546,121.566528320626,121.566711426191,121.566101074305,121.565490722419,121.562499999975,121.566284179871,121.567321777178,121.569274902315,121.570312499622,121.569519043069,121.567321777178,121.56408691398,121.561523437856,121.558105469092,121.555725097635,121.554504394762,121.551879882551,121.548706054541,121.548522948975,121.552490234437,121.554321289196,121.553894042876,121.555114745749,121.555908203201,121.557922363526,121.556091308767,121.554870605894,121.552490234437,121.550476074112,121.548522948975,121.545898437663,121.543273925451,121.54107666046,121.538696289003,121.538085937116,121.537475586129,121.539489746455,121.54107666046,121.543273925451,121.543273925451,121.544494629224,121.547119140536,121.550292968546,121.548522948975,121.550476074112,121.55371093731,121.554687500328,121.55731201164,121.562683105541,121.564880371432,121.567077636424,121.565124511287,121.562499999975,121.557922363526,121.554321289196,121.551330566752,121.547119140536,121.545288085777,121.547485351668,121.550292968546,121.553527831744,121.55688476532,121.560119628518,121.563110351861,121.561889648089,121.56091308597,121.558715820079,121.558715820079,121.556518555087,121.553894042876,121.555480956881,121.55328369099,121.551086425998,121.549316406427,121.545471191342,121.544128418092,121.54107666046,121.538879394568,121.538085937116,121.534729003541,121.53247070336,121.53112793011,121.527709961346,121.523681640695,121.520507812685,121.517883300474,121.511901855586,121.509887695261,121.509521484129,121.508300781256,121.505920409799,121.503112792921,121.500488281609,121.499694824157,121.496887207279,121.494689941388,121.491699218944,121.488891601167,121.487121581596,121.48510742217,121.481689453406,121.480102539401,121.47790527351,121.473693847293,121.475280761298,121.475891113184,121.473083496306,121.472106933288,121.470092773862,121.46752929684,121.464294433641,121.460693359311,121.463317871523,121.464904785527,121.46527099576,121.464294433641,121.457885742433,121.454528808858,121.452880859664,121.452880859664,121.455078124656,121.461303711197,121.463928222509,121.464904785527,121.463684081755,121.461486816763,121.460510253745,121.461730956618,121.464294433641,121.466674805098,121.470520019284,121.478881835628,121.486328125043,121.489685058619,121.491516113378,121.493713379269,121.496887207279,121.50451660136,121.505493164378,121.505310058812,121.502319336368,121.497680663832,121.494689941388,121.491271972624,121.489685058619,121.488891601167,121.489685058619,121.494689941388,121.498474121284,121.502502441035,121.506713867251,121.512084961152,121.515930175337,121.519897460799,121.523315429563,121.527709961346,121.532104492229,121.536499023111,121.543273925451,121.550903320432,121.554870605894,121.559326171965,121.561706542523,121.564270019546,121.565307616853,121.564880371432,121.561279297102,121.558288574658,121.557495117206,121.557495117206,121.557678222772,121.556274414333,121.554321289196,121.551513672318,121.545104980211,121.541320801214,121.521118163672,121.510498047147,121.50408935504,121.50091552703,121.499511718591,121.499084472271,121.499511718591,121.502929687355,121.50811767569,121.516906738355,121.533691406234,121.555480956881,121.579711914174,121.589477538957,121.594726562481,121.598876953509,121.602478026939,121.606323242024,121.685119629168,121.69451904282,121.708129882688,121.718078613038,121.724670409812,121.739501953452,121.80548095728,121.849304199329,121.859130859302,121.879882812642,121.885498047297,121.94268798846,121.95849609332,121.973327636961,121.986694336075,121.992126465164,121.994323730156,121.992675780963,121.989685058519,121.981079101419,121.966674804998,121.950683593673,121.950317382541,121.951477051125,121.96569824198,121.939697266016,121.920471191492,121.911315917696,121.900512695604,121.789489745955,121.765075683996,121.763916015412,121.767700195308,121.768920898181,121.772277831757,121.771911621524,121.773681640196,121.774108886516,121.774291992082,121.774108886516,121.774475097648,121.775329590288,121.776672363539,121.775878906087,121.774291992082,121.773315429963,121.773315429963,121.770874023318,121.768920898181,121.766906737856,121.763488769092,121.760070801227,121.75769042977,121.759277343774,121.757507324204,121.755920410199,121.751281738561,121.747680664231,121.744079589901,121.739074707132,121.736511230109,121.732910156678,121.73150634734,121.730102538901,121.729125976782,121.727478027589,121.723327636561,121.717712401906,121.713684082155,121.70892334014,121.702514648033,121.697875976395,121.694091796499,121.689880371182,121.686096191286,121.683105468842,121.679321288946,121.676696777634,121.670288085527,121.668273926101,121.664916992525,121.65930175787,121.650329589639,121.642517089992,121.637512207223,121.633483886572,121.62951660201,121.626281737912,121.616516113128,121.61370849625,121.611877441491,121.610473633052,121.607910156029,121.59930419893,121.591125488151,121.579528808608,121.573913573952,121.566101074305],"lat":[31.0012817382616,31.003112793021,31.0046997070259,31.0070800784829,31.0104980472472,31.0128784178048,31.013488769691,31.0156860355821,31.0191040043464,31.0205078127854,31.022888183343,31.0256958011204,31.028076171678,31.026672363239,31.0239257815496,31.0261230465414,31.0255126955545,31.0233154296634,31.021484374904,31.0225219722113,31.0255126955545,31.0256958011204,31.0272827151252,31.0292968745512,31.0321044923285,31.0444946293237,31.0458984377627,31.0466918943155,31.0485229490749,31.0501098630798,31.0526733401026,31.0516967770847,31.0509033205319,31.050720214966,31.0496826167594,31.0487060546408,31.0513305668522,31.0546875004279,31.0576782228717,31.0584716794245,31.0595092776311,31.0634765621936,31.065307616953,31.066711425392,31.0695190431694,31.071899413727,31.0731201174995,31.0747070315044,31.0762939455092,31.0764770510751,31.0789184568214,31.0791015623872,31.0819091792653,31.0841064451564,31.0844726562881,31.0855102535954,31.0853271480295,31.083679198836,31.0847167970426,31.0897216798117,31.0914916993825,31.0928955078215,31.0942993162605,31.0950927737126,31.0944824218263,31.0958862302654,31.0986938480427,31.1010742186003,31.1008911130345,31.1038818363777,31.107727050563,31.1116943360248,31.1137084963501,31.1154785159208,31.1171264651143,31.1157226566753,31.1149291992232,31.1123046879111,31.1130981444638,31.1160888669077,31.1182861327989,31.1166992187939,31.1185302735533,31.1203002931241,31.1201171875582,31.1196899412378,31.1187133791192,31.118103027233,31.1176757809126,31.118103027233,31.1201171875582,31.1217041015631,31.1231079100021,31.1224975590152,31.1207275394444,31.1174926753467,31.1174926753467,31.1231079100021,31.1220703126948,31.1210937496768,31.1239013674542,31.1262817380119,31.1259155277795,31.1234741211338,31.1215209959972,31.1182861327989,31.1157226566753,31.1123046879111,31.1124877925776,31.114318847337,31.1154785159208,31.1132812500297,31.1132812500297,31.1140747065825,31.1179199216671,31.1207275394444,31.125671387025,31.129882812342,31.136474609116,31.1412963863192,31.1455078125356,31.1484985349795,31.1514892574233,31.1571044920787,31.1600952145226,31.163330077721,31.1691284179422,31.1743164062772,31.1788940427259,31.1831054689423,31.1860961913862,31.1879272461455,31.1895141601504,31.1917114260415,31.1934814456123,31.1947021484854,31.1959228513585,31.1976928709293,31.2019042971456,31.2133178711229,31.2166748046985,31.2197265623311,31.2252807617978,31.2301025390011,31.232482910458,31.2351074217701,31.2371215820954,31.2402954101051,31.243286132549,31.2467041013133,31.2479248050857,31.248474120884,31.2487182616385,31.2490844727703,31.2490844727703,31.2490844727703,31.2493286135248,31.2504882812092,31.2517089840824,31.2537231444076,31.2581176761898,31.2636718747573,31.2664794925346,31.271118164172,31.2741088866159,31.2778930665119,31.282897949281,31.2874755857297,31.2963256835835,31.3018798830502,31.3054809573803,31.3115234374567,31.3233032225657,31.3300781249056,31.3334960936699,31.3361206058813,31.3399047848779,31.3414916988829,31.348876953109,31.3541259766326,31.3593139649676,31.3638916014163,31.3668823238602,31.3715209963969,31.3756713865253,31.3811035156148,31.3878784179547,31.3969116213743,31.3906860348327,31.3856811520636,31.3806762692944,31.3784790043027,31.3768920893984,31.3748779299726,31.3726806640814,31.3704833981903,31.3245239254389,31.3192749019153,31.3115234374567,31.3054809573803,31.3002929690454,31.285278320738,31.1990966793683,31.1574707032104,31.1497192378526,31.1328735347859,31.12408447302,31.0681152347303,31.0494995120928,31.0183105468943,30.9707031249493,30.9376831058907,30.9022827144757,30.8770751950643,30.8652954099553,30.8530883785259,30.8414916989828,30.8283081054348,30.8239135745519,30.8195190427697,30.791687012046,30.7794799806167,30.809082030911,30.8153076174526,30.8167114258916,30.8192749020152,30.8527221682935,30.8654785155211,30.877929687705,30.8828735352855,30.8833007816058,30.8881225588091,30.8933105471441,30.8975219724611,30.9025268552302,30.9061279295603,30.9091186520042,30.9130859374661,30.9185180665556,30.9224853511181,30.9257202152158,30.9296874997784,30.9324951175557,30.9338989259947,30.9348754881133,30.9367065428727,30.9392700198956,30.9395141597507,30.9412841793215,30.9437255859671,30.9459228518582,30.9498901364207,30.9528808597639,30.9548950191898,30.9548950191898,30.9586791990858,30.9594726565379,30.9619140622842,30.964477539307,30.9664916996323,30.9685058590582,30.9700927730631,30.9729003908404,30.9769287105916,30.9794921876144,30.9829101563787,30.9866943362746,30.9882812502796,30.989929199473,30.9910888671575,30.9921264644648,30.9924926755966,30.9921264644648,30.9929199219169,30.9937133784697,30.9926757811624,30.9938964840356,30.9943237303559,30.9954833980404,30.9957275387949,30.9954833980404,30.9954833980404,30.9954833980404,30.9953002933739,30.995117187808,30.9981079102519,31.0010986326958,31.0034790041528,31.0032958985869,31.0037231449073,31.0039062495738,31.0026855467007,31.0015258790161,31.0012817382616]}]],[[{"lng":[121.480895995953,121.481079101519,121.481079101519,121.483520508165,121.48510742217,121.485900878723,121.488891601167,121.493713379269,121.496887207279,121.497924804586,121.495910644261,121.493286132949,121.492126465264,121.491699218944,121.492126465264,121.492126465264,121.494873046954,121.497497558266,121.499084472271,121.501708984482,121.502075195614,121.502075195614,121.503906250373,121.506103515365,121.508483886822,121.510925292568,121.512329101907,121.512084961152,121.506713867251,121.502502441035,121.498474121284,121.494689941388,121.490478516071,121.482116698827,121.478698730062,121.477478027189,121.476684570637,121.475708007619,121.476928710492,121.475708007619,121.475891113184,121.47607421875,121.475280761298,121.472900390741,121.47113037117,121.46887207009,121.465881347646,121.463684081755,121.462280273316,121.461303711197,121.459472656438,121.457275390547,121.457092284981,121.456909179415,121.457275390547,121.456726073849,121.455871582108,121.456481933994,121.457702636867,121.458679198986,121.459472656438,121.459899902758,121.459899902758,121.459289550872,121.463073730768,121.463500976189,121.463684081755,121.464111328075,121.467712402405,121.470275878529,121.472717285175,121.47430419918,121.476684570637,121.480285644967,121.480895995953],"lat":[31.3134765625933,31.3093261715656,31.3060913083672,31.3001098634795,31.2965087891494,31.2949218751445,31.2958984372631,31.2968750002811,31.2966918947152,31.2916870119461,31.2896728516209,31.2879028320501,31.2863159180453,31.2835083011672,31.280517577824,31.279113769385,31.2780761720777,31.2766723636387,31.2750854496338,31.2733154300631,31.2706909178517,31.2681274417281,31.2650756831963,31.263122558959,31.2604980467475,31.2573242187378,31.2532958980873,31.2493286135248,31.2487182616385,31.248474120884,31.2479248050857,31.2467041013133,31.2443237307556,31.2460937503264,31.2448730465539,31.2479248050857,31.2501220700775,31.2518920896483,31.2532958980873,31.2548828120921,31.2565307612857,31.2576904298695,31.2611083986337,31.2628784182045,31.2642822266435,31.2662963869687,31.2689208982809,31.2717285160582,31.2736816402955,31.2747192385021,31.2766723636387,31.2792968749509,31.281494140842,31.2844848632859,31.2864990236111,31.2893066404891,31.2915039063802,31.2930908203851,31.29467773439,31.2968750002811,31.2982788087201,31.2996826171591,31.3021240238047,31.3073120121397,31.3082885742584,31.3112792967023,31.3153076173527,31.3178710934762,31.3176879879103,31.3175048832438,31.3170776369234,31.3167114257917,31.3167114257917,31.3167114257917,31.3134765625933]}]],[[{"lng":[121.422912597339,121.424499511343,121.427673340253,121.43048095713,121.43188476557,121.433288574009,121.434326172215,121.431274413683,121.431701660004,121.432922362877,121.43048095713,121.428283691239,121.425903320682,121.422485351918,121.419494628574,121.417724609004,121.416870117262,121.411499023361,121.408081054597,121.404296874701,121.400329590139,121.395507812935,121.390686034833,121.388305664275,121.386108398384,121.380493163729,121.377319335719,121.374511718841,121.367309570181,121.364074706982,121.36010742152,121.357299804642,121.354309082198,121.352478027439,121.348693847543,121.34747314467,121.34387207034,121.34069824233,121.337280273566,121.334899902109,121.328491210901,121.332885741784,121.33349609367,121.334106445556,121.334106445556,121.335876465127,121.336486816114,121.338073730119,121.337097168,121.339111328325,121.340515136764,121.33752441432,121.334472656688,121.336120605881,121.338684082005,121.34112548865,121.341918945203,121.344726562081,121.34429931666,121.347290039104,121.349487304995,121.351684569987,121.354919433185,121.357116699076,121.361083984538,121.362304687411,121.363891601416,121.366699219194,121.369079589751,121.371887206629,121.374877929973,121.378906249724,121.383728026927,121.391723633039,121.395080566615,121.399108886366,121.401489257823,121.404113769135,121.407104492478,121.409484863036,121.411315917795,121.410888671475,121.415527344012,121.418518066456,121.421081542579,121.422912597339],"lat":[31.2310791011197,31.2260742183506,31.2266845702368,31.2266845702368,31.2222900393539,31.2191162113442,31.215515137014,31.2127075192367,31.2100830079245,31.2070922854807,31.2041015621375,31.2031250000188,31.202270507378,31.2009277341277,31.1992797849342,31.1973266597976,31.1937255863668,31.1937255863668,31.1931152344806,31.1931152344806,31.1934814456123,31.1934814456123,31.1937255863668,31.1939086910333,31.1937255863668,31.1928710937261,31.1923217770284,31.1917114260415,31.1895141601504,31.1884765628432,31.1873168942593,31.1870727535048,31.1874999998252,31.1848754885131,31.183471680074,31.1851196292675,31.1843261718154,31.1829223633764,31.1804809567308,31.1818847660692,31.1923217770284,31.194274902165,31.1975097653634,31.2092895504724,31.2133178711229,31.215515137014,31.2191162113442,31.2216796874677,31.2265014646709,31.2291259768824,31.2318725585718,31.2371215820954,31.2385253905344,31.2416992185442,31.2421264648645,31.24188232411,31.2445068363215,31.2448730465539,31.2412719722238,31.240478515671,31.2395019535523,31.2354736329019,31.2310791011197,31.2282714842416,31.2279052731099,31.225891113684,31.2250976562319,31.2244873043456,31.2216796874677,31.2224731449198,31.2216796874677,31.2216796874677,31.220703125349,31.220703125349,31.2214965819018,31.2224731449198,31.2230834959067,31.2243041987798,31.2244873043456,31.2252807617978,31.2266845702368,31.2302856445669,31.227294922123,31.2299194334352,31.2310791011197,31.2310791011197]}]],[[{"lng":[121.263488769191,121.266906737956,121.270080565965,121.275878906187,121.279296874951,121.27752685538,121.279724121271,121.282470702961,121.283508301167,121.287719726484,121.290100097941,121.293884276938,121.297729492023,121.301086425598,121.303527832244,121.306274413933,121.308898926145,121.310913085571,121.313476562593,121.31768798791,121.321105956675,121.325317382891,121.32989501934,121.330078124906,121.332275390797,121.334472656688,121.33752441432,121.34069824233,121.338500976439,121.337097168,121.338073730119,121.336486816114,121.335693359561,121.334106445556,121.334106445556,121.33349609367,121.332885741784,121.328491210901,121.334899902109,121.337280273566,121.34069824233,121.34387207034,121.34747314467,121.348693847543,121.352478027439,121.354309082198,121.357299804642,121.36010742152,121.364074706982,121.367309570181,121.374511718841,121.377319335719,121.380493163729,121.386108398384,121.388305664275,121.390686034833,121.395507812935,121.400329590139,121.404296874701,121.408081054597,121.410705566808,121.411071777041,121.409912109356,121.407714843465,121.399719238252,121.395507812935,121.39349365261,121.3903198246,121.3903198246,121.388122558709,121.389099120828,121.386901855836,121.388305664275,121.390075683846,121.395324707369,121.398071289059,121.400695800371,121.404479980267,121.407104492478,121.408325195351,121.409484863036,121.410705566808,121.413879394818,121.416870117262,121.424682616909,121.432495117456,121.433471679574,121.434326172215,121.432922362877,121.432678223022,121.437683105791,121.440917968989,121.443725585867,121.446105957324,121.447326660197,121.445129394306,121.443115233981,121.445922851758,121.447692871329,121.44812011675,121.450500488207,121.454284668103,121.458312987854,121.458312987854,121.458679198986,121.460327148179,121.464294433641,121.46752929684,121.469909668297,121.471679687867,121.473083496306,121.475891113184,121.475280761298,121.473693847293,121.47790527351,121.479919433835,121.481689453406,121.48510742217,121.487121581596,121.488891601167,121.491699218944,121.494689941388,121.496887207279,121.499694824157,121.500488281609,121.503112792921,121.505920409799,121.508300781256,121.509521484129,121.510925292568,121.517883300474,121.520507812685,121.523681640695,121.527709961346,121.53112793011,121.53247070336,121.534729003541,121.538085937116,121.538879394568,121.54107666046,121.544128418092,121.545471191342,121.549316406427,121.551086425998,121.55328369099,121.555480956881,121.553894042876,121.556518555087,121.558715820079,121.558715820079,121.56091308597,121.561889648089,121.563110351861,121.560729980404,121.55731201164,121.553527831744,121.550292968546,121.547485351668,121.545288085777,121.547119140536,121.551330566752,121.554321289196,121.557922363526,121.562499999975,121.565124511287,121.567077636424,121.564880371432,121.562683105541,121.55688476532,121.55371093731,121.550476074112,121.548522948975,121.551086425998,121.548889160107,121.546874999781,121.544494629224,121.543273925451,121.543518066206,121.54107666046,121.539489746455,121.538085937116,121.536926269432,121.538085937116,121.538696289003,121.54107666046,121.543273925451,121.545898437663,121.548522948975,121.550476074112,121.552490234437,121.554870605894,121.556091308767,121.557922363526,121.555908203201,121.555114745749,121.553894042876,121.554321289196,121.552490234437,121.548522948975,121.548706054541,121.551879882551,121.554504394762,121.555725097635,121.558105469092,121.561523437856,121.56408691398,121.567077636424,121.569519043069,121.570312499622,121.569274902315,121.567321777178,121.566284179871,121.562499999975,121.565490722419,121.566101074305,121.566711426191,121.566528320626,121.564270019546,121.565917968739,121.559509277531,121.55731201164,121.554504394762,121.551879882551,121.549072265673,121.548889160107,121.547912597988,121.545288085777,121.543701171772,121.540893554894,121.538879394568,121.535888672125,121.533081054347,121.529907226338,121.526672363139,121.523071288809,121.519897460799,121.516906738355,121.51672363279,121.515502929916,121.512084961152,121.509277343375,121.506713867251,121.503723144807,121.501098632596,121.498107910152,121.494689941388,121.491699218944,121.489501953053,121.487670898293,121.488525390934,121.484680175849,121.48150634784,121.475097656632,121.471923827723,121.466918944953,121.461120605632,121.456115722862,121.443725585867,121.437500000225,121.43231201189,121.429077148691,121.425903320682,121.419494628574,121.413085937366,121.408691406483,121.404724121021,121.400878905937,121.395324707369,121.389709472714,121.386108398384,121.380920410049,121.377075194964,121.370727538945,121.354309082198,121.349487304995,121.345703125099,121.340515136764,121.328674316467,121.323913574452,121.321472167806,121.322509766013,121.322509766013,121.324279785584,121.326477050575,121.328918457221,121.330505371226,121.332092285231,121.334106445556,121.335327148429,121.339111328325,121.336303710548,121.328674316467,121.329101562787,121.328918457221,121.329101562787,121.329101562787,121.329284668353,121.329101562787,121.329284668353,121.329528808208,121.330688476792,121.330871582358,121.330871582358,121.330688476792,121.331909179665,121.336303710548,121.338928222759,121.342285156335,121.348876953109,121.353698730312,121.352722168194,121.355285644317,121.359313964968,121.357482910208,121.359924316854,121.363098144864,121.367126464615,121.366271972873,121.364685058868,121.362670898543,121.361328125293,121.36010742152,121.358520507515,121.354309082198,121.348876953109,121.346679687218,121.345275878779,121.344116211094,121.34790039099,121.349670410561,121.352478027439,121.351074219,121.349121093863,121.34747314467,121.345703125099,121.34429931666,121.342102050769,121.339904784878,121.338317870873,121.337280273566,121.335083007675,121.333129882538,121.333312988104,121.331726074099,121.329711913774,121.327087402462,121.325500488457,121.324096680018,121.321716308561,121.320495605688,121.318481445363,121.317321777678,121.31591796834,121.314270019146,121.313110351462,121.311096191136,121.309875488263,121.308471679824,121.307128906574,121.305725097235,121.304077148042,121.302490234037,121.299682617159,121.29827880872,121.296691894715,121.294128417692,121.292114257367,121.289123534923,121.28790283205,121.286315918045,121.282287597395,121.277709960946,121.27349853473,121.270507812286,121.267272949087,121.264526367398,121.261474609766,121.259521484629,121.258300780856,121.254882812092,121.256713866852,121.255310058413,121.253723144408,121.252929687855,121.2526855471,121.249877929323,121.249694824656,121.248474120884,121.245727539195,121.243896484435,121.240905761991,121.2387084961,121.236328124643,121.236511230209,121.237670898793,121.240905761991,121.242675781562,121.244323730756,121.247070312445,121.249694824656,121.252075195214,121.257873535435,121.260070800427,121.262512207073,121.263488769191],"lat":[31.2548828120921,31.2542724611052,31.2556762695443,31.2539062499735,31.2534790036531,31.2504882812092,31.247070312445,31.2454833984401,31.2412719722238,31.235290527336,31.2341308596515,31.232910155879,31.2327270512125,31.2318725585718,31.2313232418742,31.2305297853214,31.2293090824483,31.2293090824483,31.2299194334352,31.23150634744,31.23150634744,31.232482910458,31.2344970698839,31.2373046876613,31.2387084961003,31.2382812497799,31.2371215820954,31.2310791011197,31.2288818361279,31.2265014646709,31.2216796874677,31.2191162113442,31.2156982425799,31.2133178711229,31.2092895504724,31.1975097653634,31.194274902165,31.1923217770284,31.1818847660692,31.1804809567308,31.1829223633764,31.1843261718154,31.1851196292675,31.183471680074,31.1848754885131,31.1874999998252,31.1870727535048,31.1873168942593,31.1884765628432,31.1895141601504,31.1917114260415,31.1923217770284,31.1928710937261,31.1937255863668,31.1939086910333,31.1937255863668,31.1934814456123,31.1934814456123,31.1931152344806,31.1911010741553,31.1892700193959,31.1873168942593,31.1853027339341,31.1843261718154,31.1818847660692,31.1807250974853,31.1809082030512,31.1788940427259,31.1763305666024,31.1749267581634,31.1724853515178,31.1704711911926,31.1665039066301,31.1614990238609,31.1630859378658,31.1641235351731,31.1580810550967,31.1484985349795,31.1433105466444,31.1406860353323,31.1389160157616,31.1373291017567,31.1334838866721,31.1290893557892,31.1301269530965,31.1292724613551,31.1248779295728,31.1215209959972,31.1187133791192,31.1149291992232,31.1149291992232,31.1168823243598,31.1168823243598,31.1165161132281,31.1107177730069,31.1096801756996,31.1082763672606,31.1065063476898,31.1051025392508,31.1032714844915,31.1030883789256,31.1032714844915,31.1038818363777,31.1066894532557,31.1099243164541,31.1135253907842,31.1132812500297,31.1132812500297,31.1154785159208,31.1146850584688,31.1124877925776,31.1123046879111,31.1157226566753,31.1182861327989,31.1215209959972,31.1234741211338,31.1259155277795,31.1262817380119,31.1239013674542,31.1210937496768,31.1220703126948,31.1231079100021,31.1174926753467,31.1174926753467,31.1207275394444,31.1224975590152,31.1231079100021,31.1217041015631,31.1201171875582,31.1179199216671,31.118103027233,31.1187133791192,31.1196899412378,31.1201171875582,31.1203002931241,31.1185302735533,31.1166992187939,31.1182861327989,31.1160888669077,31.1130981444638,31.1123046879111,31.1149291992232,31.1157226566753,31.1171264651143,31.1154785159208,31.1137084963501,31.1116943360248,31.107727050563,31.1038818363777,31.1008911130345,31.1010742186003,31.0986938480427,31.0958862302654,31.0947265625808,31.0949096681467,31.0942993162605,31.0928955078215,31.0914916993825,31.0897216798117,31.0847167970426,31.083679198836,31.0853271480295,31.0855102535954,31.0844726562881,31.0841064451564,31.0819091792653,31.0791015623872,31.0789184568214,31.0764770510751,31.0747070315044,31.0731201174995,31.071899413727,31.0697021487352,31.0687255857172,31.066711425392,31.065307616953,31.0634765621936,31.0595092776311,31.0584716794245,31.0576782228717,31.055908203301,31.0538940429757,31.0513305668522,31.0487060546408,31.0496826167594,31.050720214966,31.0509033205319,31.0516967770847,31.0526733401026,31.0501098630798,31.0485229490749,31.0466918943155,31.0458984377627,31.0444946293237,31.0321044923285,31.0292968745512,31.0272827151252,31.0256958011204,31.0255126955545,31.0225219722113,31.021484374904,31.0233154296634,31.0255126955545,31.0261230465414,31.0239257815496,31.026672363239,31.028076171678,31.0256958011204,31.022888183343,31.0205078127854,31.0191040043464,31.0156860355821,31.013488769691,31.0128784178048,31.0104980472472,31.0070800784829,31.0046997070259,31.003112793021,31.0015258790161,30.9984741213837,30.997924804686,30.997924804686,30.9965209962471,30.9960937499267,30.9937133784697,30.9907226560258,30.9907226560258,30.9937133784697,30.9957275387949,30.9960937499267,30.9960937499267,30.9965209962471,30.9976806639315,30.997924804686,30.999328613125,31.0015258790161,31.001708984582,31.0046997070259,31.0076904294698,31.0092773434747,31.0078735350357,31.0070800784829,31.0067138673512,31.0061035154649,31.0045166014601,31.0012817382616,31.000305176143,31.005920409899,31.012512206673,31.01489257813,31.0170898440211,31.016296386569,31.0155029300163,31.0155029300163,31.0140991206779,31.0109252926682,31.009704589795,31.0095214842291,31.008300781356,31.0061035154649,31.0039062495738,31.0004882808096,30.9965209962471,30.9945068359218,30.9931030274828,30.9923095700307,30.9916992190438,30.9909057615916,30.9902954106047,30.9895019531527,30.9876708983933,30.9866943362746,30.9849243167039,30.9799194339348,30.9786987301623,30.9780883791754,30.9785156245965,30.9830932619445,30.9830932619445,30.9849243167039,30.9921264644648,30.9973144527998,30.9984741213837,30.9998779298227,31.0026855467007,31.0045166014601,31.0061035154649,31.0089111332422,31.0123291020065,31.0164794921349,31.0156860355821,31.0161132810032,31.0189208987805,31.0225219722113,31.0255126955545,31.0285034179984,31.0324707034603,31.0369262695318,31.0405273438619,31.0435180663058,31.0477294925221,31.0510864260978,31.0554809569807,31.0604858397497,31.0640869140799,31.0642700196457,31.061096191636,31.0617065426229,31.0632934566278,31.0661010744051,31.0687255857172,31.0695190431694,31.0711059571742,31.0745239259385,31.0769042964961,31.0806884763921,31.0817260745987,31.0855102535954,31.0889282223596,31.0925292966897,31.0952758792785,31.0980834961564,31.1010742186003,31.1019287112411,31.1019287112411,31.1016845704866,31.1052856448167,31.1087036135809,31.109130859002,31.1107177730069,31.112915038898,31.1154785159208,31.1188964846851,31.1212768552427,31.1234741211338,31.125671387025,31.1276855464508,31.1315307615355,31.1345214839794,31.1370849610022,31.1390991213274,31.1409301760868,31.1439208985307,31.1458740236673,31.1494750979974,31.15252685563,31.1557006836397,31.1585083005177,31.1610717775405,31.1636962888527,31.1658935547438,31.167907715069,31.1699218753943,31.1727294922723,31.1765136721683,31.1793212890463,31.1810913086171,31.1831054689423,31.1853027339341,31.187683105391,31.1898803712822,31.1923217770284,31.1951293948058,31.1968994143765,31.1990966793683,31.2019042971456,31.2039184574709,31.2045288084578,31.2028808592643,31.2011108396936,31.1978759764952,31.1962890624903,31.1956787106041,31.1978759764952,31.2003173831408,31.2033081055847,31.2055053714757,31.20892334024,31.2122802738156,31.2149047851278,31.216918945453,31.2197265623311,31.2233276366612,31.2274780276889,31.2318725585718,31.2349243162043,31.236694335775,31.2387084961003,31.2395019535523,31.2416992185442,31.2423095704304,31.2424926759962,31.2431030269831,31.2460937503264,31.2489013672044,31.2509155275296,31.2534790036531,31.2565307612857,31.2584838864223,31.2604980467475,31.2611083986337,31.2609252930679,31.2584838864223,31.2568969724174,31.2548828120921]}]],[[{"lng":[121.064270019646,121.062316894509,121.062316894509,121.064270019646],"lat":[31.1978759764952,31.1968994143765,31.1989135738024,31.1978759764952]}],[{"lng":[121.318908691683,121.315490722919,121.311279296702,121.306518554688,121.30187988305,121.296875000281,121.294128417692,121.291870117512,121.287719726484,121.285705566159,121.283325195601,121.28112792971,121.278930663819,121.276489258073,121.27392578105,121.273681640296,121.272521972611,121.275329589489,121.278503418398,121.282714843715,121.279724121271,121.276672363639,121.273071289309,121.27032470672,121.260681152313,121.256713866852,121.257080077983,121.253479003653,121.253295898087,121.250305175643,121.246887206879,121.243286132549,121.240722656426,121.240295410105,121.235473632902,121.232727051212,121.232299804892,121.230712890887,121.227478027689,121.224121094113,121.219299316011,121.216918945453,121.217285156585,121.218505859458,121.219726562331,121.220703125349,121.221496581902,121.222717284775,121.222290039354,121.216125488001,121.212280273816,121.204711914024,121.20172119158,121.19812011725,121.196899414377,121.193908691033,121.191528320476,121.187316894259,121.183105468942,121.177490234287,121.177307128721,121.176696777734,121.175720214716,121.176696777734,121.178527831594,121.179870605744,121.179321289046,121.173889159957,121.169921875394,121.170288085627,121.168518066056,121.169494629074,121.170288085627,121.166870116862,121.163085937866,121.161499023861,121.160095214523,121.153686523314,121.149902343418,121.151123047191,121.151306152757,121.1489257813,121.14709472654,121.145507812536,121.142089843771,121.13989257788,121.137329101757,121.131713867101,121.128723144657,121.127502441784,121.125488281459,121.121887207129,121.119689941238,121.115905761342,121.113525390784,121.1096801757,121.105895995804,121.103881836378,121.100708007469,121.098693848043,121.09613037102,121.094116210695,121.095092773713,121.093505859708,121.094909668147,121.095886230265,121.095092773713,121.096923828472,121.100524901903,121.102722167794,121.104919433685,121.108520508015,121.111694336025,121.114318847337,121.115722656675,121.11688232436,121.118896484685,121.121704101563,121.122497559015,121.114929199223,121.10650634769,121.104309081799,121.101318359355,121.09747314427,121.09613037102,121.094299316261,121.090087890943,121.089111327925,121.089477539057,121.087280273166,121.083679198836,121.081726074599,121.079284667953,121.076477051075,121.077880859514,121.080688476392,121.082702636717,121.085327148029,121.086303711047,121.087280273166,121.089721679812,121.091674804948,121.090881347496,121.089294433491,121.091491699382,121.093078613387,121.095520019134,121.092285155935,121.091918945703,121.0870971676,121.08392333959,121.081298828278,121.084472656288,121.088500976939,121.092895507821,121.09747314427,121.098327636911,121.099670410161,121.099670410161,121.099487304596,121.095520019134,121.095092773713,121.094909668147,121.094482421826,121.091125488251,121.091308593817,121.093078613387,121.089904785378,121.083679198836,121.076293945509,121.076293945509,121.074279785184,121.072326660047,121.06768798841,121.06408691408,121.06091308607,121.057922363626,121.055908203301,121.054077148542,121.052917480857,121.052673340103,121.048095702754,121.04650878875,121.042724609753,121.039123535423,121.040527343862,121.040710449428,121.038696289103,121.035888672224,121.031311034876,121.030273437569,121.029479980117,121.028503417998,121.023681640795,121.019897460899,121.01489257813,121.01171875012,121.009521484229,121.007507323904,121.00811767579,121.010681151914,121.008728027676,121.006896972917,121.005126953346,121.003295898587,120.999328613125,120.997680663932,120.992492675597,120.989501953153,120.987487792827,120.990478515271,120.988891601266,120.988525391034,120.987670898393,120.988525391034,120.992675781162,120.995910644361,120.998107910252,120.996520996247,120.994079589601,120.992492675597,120.990722656026,120.990478515271,120.986328125143,120.986694336275,120.987121581696,120.987304687262,120.987304687262,120.985717773257,120.984313964818,120.979492187614,120.973693847393,120.968688964624,120.964721680062,120.960876464977,120.95892333984,120.960510253845,120.956909179515,120.95532226551,120.954101562637,120.949890136421,120.945495605538,120.945922851858,120.945922851858,120.931701660104,120.935119628868,120.929687499778,120.927673339453,120.92510986333,120.922485351118,120.913513183786,120.906494140692,120.905883788806,120.897277831707,120.896728515908,120.897277831707,120.897521972461,120.897705078027,120.895690917702,120.892883300824,120.892700195258,120.891296386819,120.890502929367,120.890502929367,120.891906738705,120.89349365271,120.894714355583,120.895690917702,120.898498535479,120.900695800471,120.898071289159,120.895690917702,120.892883300824,120.891723633139,120.889709472814,120.887329101357,120.883483886272,120.878295898837,120.87408447262,120.874877930072,120.87231445305,120.868713378719,120.865722656276,120.861083984638,120.858886718747,120.855102538851,120.852722168293,120.854125976732,120.856079101869,120.857727051063,120.860473632752,120.864685058968,120.866699218394,120.867309570281,120.868896484285,120.870727539045,120.87231445305,120.87408447262,120.876708983933,120.894470214829,120.901916504243,120.904296874801,120.908508301017,120.9129028319,120.917480468349,120.926086425448,120.948486327982,120.970275878629,120.980712890488,120.986877441841,121.002929687455,121.013916016011,121.01849365246,121.018310546894,121.021301269338,121.022277832356,121.02392578155,121.024291991782,121.026672363239,121.029113769885,121.031677246008,121.033081054447,121.036926269532,121.038330077971,121.038696289103,121.037109375098,121.039916991976,121.040893554994,121.04467773399,121.045715332197,121.048522949075,121.051330566852,121.052917480857,121.055908203301,121.058898925745,121.061279297202,121.064270019646,121.063720702948,121.067077636524,121.068725585717,121.072509765613,121.072326660047,121.068908691283,121.072875976745,121.070922851608,121.067871093976,121.06768798841,121.070922851608,121.069702148735,121.066894530958,121.070922851608,121.0645141604,121.066711425392,121.066894530958,121.065673828085,121.064270019646,121.063903808514,121.062683105641,121.062072753755,121.061523437057,121.06091308607,121.060302734184,121.059509277631,121.058898925745,121.058471679425,121.059326172065,121.060729980504,121.062927246395,121.058898925745,121.058288573859,121.059692383197,121.059082031311,121.055480956981,121.056701659854,121.05731201174,121.05731201174,121.057922363626,121.058105469192,121.062072753755,121.065124511387,121.06811523473,121.072082519293,121.075317382491,121.078125000269,121.080078125405,121.07672119183,121.077880859514,121.080078125405,121.082519531152,121.084899902609,121.088500976939,121.090881347496,121.092102050369,121.093322754142,121.09387206994,121.096923828472,121.099121093464,121.1010742186,121.104309081799,121.107299804243,121.109924316454,121.113098144464,121.115722656675,121.116271972474,121.120117187558,121.122680663682,121.126892089898,121.130310058662,121.133911132992,121.136474609116,121.138305663875,121.139709472314,121.144897460649,121.149291992432,121.149475097997,121.147888183993,121.151672362989,121.153930664069,121.157287597645,121.161071777541,121.163085937866,121.163696288853,121.165100097292,121.167114257617,121.16967773464,121.174316406277,121.177490234287,121.179687500178,121.18231201149,121.184509277381,121.187927246146,121.188903808264,121.191894531607,121.192077636274,121.195495605038,121.198303222816,121.201110839694,121.204711914024,121.207092285481,121.209472656038,121.209716796793,121.213500976689,121.216308593567,121.219726562331,121.22247314492,121.224914550666,121.228515624996,121.232727051212,121.235900879222,121.238891601666,121.24230957043,121.244873046554,121.247924805086,121.246276855892,121.244323730756,121.242675781562,121.240905761991,121.237670898793,121.236511230209,121.236328124643,121.2387084961,121.240905761991,121.243713378869,121.245727539195,121.248474120884,121.249694824656,121.249877929323,121.2526855471,121.252929687855,121.253479003653,121.255310058413,121.256713866852,121.254882812092,121.258300780856,121.259521484629,121.261474609766,121.264526367398,121.268127441728,121.270874023417,121.27349853473,121.277709960946,121.282287597395,121.286315918045,121.28790283205,121.289123534923,121.292907714819,121.295288086276,121.296691894715,121.29827880872,121.299682617159,121.302490234037,121.304077148042,121.305725097235,121.307128906574,121.308471679824,121.309875488263,121.311096191136,121.313110351462,121.314270019146,121.31591796834,121.317504883244,121.318908691683],"lat":[31.1652832028576,31.1600952145226,31.1621093748478,31.160522460843,31.1591186524039,31.1574707032104,31.1566772457583,31.1561279299601,31.1552734373194,31.154724121521,31.1544799807666,31.1550903317535,31.1533203121827,31.1527099611958,31.1536865233144,31.1494750979974,31.1470947265404,31.1475219728608,31.1444702152283,31.1412963863192,31.1384887694412,31.1356811525632,31.1361083988836,31.1367187498705,31.1375122073226,31.1345214839794,31.1303100586623,31.1301269530965,31.1339111329925,31.1347045895452,31.1354980469973,31.1359252933177,31.1325073245534,31.1279296872053,31.1282958983371,31.1276855464508,31.12408447302,31.1204833986899,31.1193237301061,31.1185302735533,31.1173095706802,31.1179199216671,31.1220703126948,31.1259155277795,31.1292724613551,31.1318969726672,31.1345214839794,31.137878417555,31.1412963863192,31.1405029297665,31.1397094723143,31.137878417555,31.1403198242006,31.1406860353323,31.1428833012234,31.1414794918851,31.1403198242006,31.1414794918851,31.1433105466444,31.1455078125356,31.1398925778802,31.1342773441242,31.1315307615355,31.1292724613551,31.1262817380119,31.1231079100021,31.1207275394444,31.1201171875582,31.1198730468037,31.1171264651143,31.1160888669077,31.1132812500297,31.1107177730069,31.1107177730069,31.1102905275858,31.1063232421239,31.1030883789256,31.1032714844915,31.1038818363777,31.1008911130345,31.0941162106946,31.0921020503694,31.0941162106946,31.0963134765857,31.0963134765857,31.0994873045955,31.0999145509159,31.1007080074686,31.1010742186003,31.1041259762329,31.1030883789256,31.1052856448167,31.1071166995761,31.1102905275858,31.1110839841386,31.112915038898,31.11010742202,31.1087036135809,31.1038818363777,31.103515625246,31.1002807620476,31.1016845704866,31.0972900387044,31.0949096681467,31.0925292966897,31.0897216798117,31.0864868166133,31.0828857422832,31.0831298830377,31.0841064451564,31.082275390397,31.0797119142735,31.0783081058345,31.0776977539483,31.0745239259385,31.0720825192929,31.0689086912831,31.0687255857172,31.0609130860701,31.059692383197,31.058715820179,31.0588989257449,31.0595092776311,31.0584716794245,31.055908203301,31.0582885738586,31.0582885738586,31.0604858397497,31.0632934566278,31.0665283207255,31.066711425392,31.0640869140799,31.061096191636,31.0588989257449,31.0562744144327,31.0529174808571,31.0548706050944,31.0531005855237,31.0509033205319,31.0494995120928,31.0482788083204,31.0468749998814,31.0449218747448,31.0424804689985,31.0416870115464,31.0408935549936,31.0343017582196,31.0335083007675,31.0285034179984,31.028076171678,31.0297241208715,31.0278930661121,31.0253295899886,31.0222778323561,31.0181274413284,31.0136718752569,31.0114746093658,31.0095214842291,31.0048828125918,30.9984741213837,30.9959106443608,30.9909057615916,30.9835205073656,30.9750976558322,30.9750976558322,30.9705200193835,30.9680786136371,30.9671020506192,30.9652709958598,30.9641113281753,30.962280273416,30.9613037112973,30.9589233398403,30.9570922850809,30.9569091795151,30.9572753906468,30.9581298823882,30.9586791990858,30.9617309567183,30.9639282226094,30.9666748042988,30.9677124025054,30.9714965824014,30.9716796870679,30.9708862305152,30.9677124025054,30.9647216800615,30.960693359411,30.9586791990858,30.95849609352,30.9550781247557,30.951904296746,30.9492797854338,30.9473266602972,30.9448852536516,30.943908691533,30.9431152340808,30.9462890620906,30.9467163084109,30.9495239261883,30.9509277346273,30.9517211911801,30.952697754198,30.9512939457591,30.9498901364207,30.9492797854338,30.9533081051849,30.952697754198,30.9572753906468,30.9605102538452,30.9608764649769,30.9663085940664,30.9685058590582,30.9708862305152,30.9733276371608,30.9746704104111,30.9769287105916,30.9799194339348,30.9821166989266,30.9854736325022,30.9915161134779,30.9938964840356,30.9974975583657,30.9967041018129,30.9990844723706,31.0032958985869,31.0065307617853,31.0100708009268,31.0126953122389,31.016296386569,31.017272949587,31.018676758026,31.018676758026,31.0184936524602,31.018676758026,31.0194702145788,31.0227050777772,31.0236816407951,31.0264892576732,31.0308837894553,31.0322875978944,31.0313110348764,31.0269165039935,31.0198974608991,31.018676758026,31.0117187501203,31.0123291020065,31.0136718752569,31.0139160160114,31.0136718752569,31.0150756836959,31.0140991206779,31.018676758026,31.0203247072195,31.0239257815496,31.0289306643188,31.0358886722245,31.0407104494278,31.0418701171122,31.047912598088,31.0509033205319,31.0526733401026,31.0562744144327,31.061096191636,31.0654907225189,31.0692749024149,31.072875976745,31.0797119142735,31.0805053708262,31.0819091792653,31.0864868166133,31.0892944334914,31.0892944334914,31.0925292966897,31.0936889652736,31.0966796877175,31.0964965821516,31.0974731442702,31.0980834961564,31.1007080074686,31.1013183593549,31.1021118168069,31.1005249019028,31.1002807620476,31.1027221677938,31.1029052733597,31.1060791013695,31.1107177730069,31.1116943360248,31.1140747065825,31.1165161132281,31.119506835672,31.1229248044363,31.1270751954639,31.129882812342,31.1317138671013,31.1337280274266,31.1353149414314,31.1369018554363,31.1383056638753,31.136474609116,31.1370849610022,31.1376953128884,31.1384887694412,31.1403198242006,31.1436767577762,31.1405029297665,31.1359252933177,31.1340942385583,31.1353149414314,31.1354980469973,31.1362915035501,31.1403198242006,31.1427001956575,31.1428833012234,31.1448974606494,31.1458740236673,31.1439208985307,31.1436767577762,31.1436767577762,31.1422729493372,31.1395263667485,31.1403198242006,31.1431274410786,31.1484985349795,31.1519165037437,31.1530761714282,31.1558837892056,31.1566772457583,31.1533203121827,31.1527099611958,31.1533203121827,31.154724121521,31.1549072261876,31.1541137696348,31.1516723629892,31.1506958008706,31.154724121521,31.1563110355259,31.1583251949518,31.1602783200885,31.1635131832869,31.1644897463048,31.1672973631828,31.1723022459519,31.1715087893992,31.1735229488251,31.1752929683958,31.1781005861732,31.1823120114902,31.1857299802545,31.1859130858203,31.1892700193959,31.1932983400464,31.1954956050382,31.1978759764952,31.2017211915798,31.2056884761423,31.2091064449066,31.211730957118,31.2144775388074,31.2175292964399,31.22113037077,31.223510742227,31.225891113684,31.2293090824483,31.232910155879,31.233886718897,31.236694335775,31.240478515671,31.2443237307556,31.2479248050857,31.2479248050857,31.2509155275296,31.2548828120921,31.2583007808564,31.264526367398,31.2691040038467,31.2698974612989,31.2703247067199,31.271118164172,31.2714843753037,31.2719116207248,31.2741088866159,31.2775268553801,31.279113769385,31.2827148437151,31.289489746055,31.2927246092534,31.2938842769379,31.2910766600598,31.2888793941688,31.2850952151721,31.281494140842,31.2786865230647,31.2770996090597,31.2764892580728,31.277709960946,31.2808837889557,31.28430175772,31.286682129177,31.2872924801639,31.2860717772907,31.288085937616,31.2855224605931,31.2830810548468,31.2827148437151,31.2813110352761,31.2794799805167,31.2789306638192,31.2794799805167,31.2775268553801,31.2772827146256,31.2785034183981,31.274902344068,31.2700805659654,31.269714355733,31.2720947262906,31.2703247067199,31.2681274417281,31.265930175837,31.2625122070727,31.2597045901948,31.2570800779833,31.2583007808564,31.2567138668515,31.2561035158646,31.2542724611052,31.2545166018597,31.2565307612857,31.2556762695443,31.2534790036531,31.2532958980873,31.2561035158646,31.2568969724174,31.2581176761898,31.2614746097655,31.2606811523134,31.2626953126386,31.2587280271767,31.2562866214305,31.2565307612857,31.2589111327426,31.2625122070727,31.2633056636255,31.2642822266435,31.2647094729638,31.2642822266435,31.2623291015069,31.2614746097655,31.2612915041996,31.2609252930679,31.2598876957606,31.2581176761898,31.2565307612857,31.2532958980873,31.2509155275296,31.2489013672044,31.2460937503264,31.2431030269831,31.2424926759962,31.2423095704304,31.2416992185442,31.2395019535523,31.2387084961003,31.236694335775,31.2349243162043,31.2318725585718,31.228698730562,31.2238769533587,31.2197265623311,31.216918945453,31.2149047851278,31.2122802738156,31.20892334024,31.2055053714757,31.2033081055847,31.1997070312545,31.1975097653634,31.1956787106041,31.1962890624903,31.1978759764952,31.2011108396936,31.2028808592643,31.2045288084578,31.2033081055847,31.2009277341277,31.1987304691359,31.1968994143765,31.1951293948058,31.1923217770284,31.1898803712822,31.187683105391,31.1853027339341,31.1831054689423,31.1810913086171,31.1793212890463,31.1765136721683,31.1727294922723,31.1699218753943,31.1672973631828,31.1652832028576]}]],[[{"lng":[121.478088379076,121.477111816058,121.475524902053,121.471923827723,121.469726562731,121.46752929684,121.465087890194,121.461486816763,121.459106445306,121.460083007425,121.461486816763,121.46209716775,121.462524414071,121.462707519636,121.463073730768,121.462890625202,121.461303711197,121.459106445306,121.456115722862,121.452270507778,121.452514648532,121.451904296646,121.450073241887,121.448486327882,121.44628906289,121.444702148885,121.442871094126,121.440307617103,121.437072753905,121.434692382448,121.433288574009,121.432128906324,121.431518554438,121.431091309017,121.430114745999,121.427673340253,121.425903320682,121.424682616909,121.42327880847,121.422912597339,121.423522949225,121.42510986323,121.426696777234,121.429077148691,121.431274413683,121.432922362877,121.434692382448,121.437316894659,121.438476562344,121.439880370783,121.442321777428,121.444885253552,121.443908691433,121.445129394306,121.446105957324,121.446472167557,121.445129394306,121.445922851758,121.445312499872,121.443725585867,121.441284180121,121.437683105791,121.433471679574,121.42871093756,121.426696777234,121.424926757664,121.423522949225,121.422119140786,121.420471191592,121.419921874895,121.419921874895,121.419921874895,121.419921874895,121.418701172022,121.418273925701,121.418701172022,121.419128418342,121.417297363583,121.414489745805,121.414916992126,121.415710449578,121.418701172022,121.422119140786,121.422119140786,121.422912597339,121.425720215116,121.427307129121,121.427490234687,121.427490234687,121.428100585674,121.430114745999,121.428283691239,121.429687499678,121.43188476557,121.442504882994,121.443298339547,121.445922851758,121.448486327882,121.450683593773,121.452697754098,121.460876464877,121.463684081755,121.463928222509,121.463684081755,121.463500976189,121.463073730768,121.459289550872,121.459899902758,121.459899902758,121.459472656438,121.458679198986,121.457702636867,121.456481933994,121.455871582108,121.456726073849,121.457275390547,121.456909179415,121.457092284981,121.457275390547,121.459472656438,121.461303711197,121.462280273316,121.463684081755,121.465881347646,121.46887207009,121.471496582301,121.473693847293,121.475524902053,121.47607421875,121.475891113184,121.475708007619,121.476928710492,121.475708007619,121.476684570637,121.477478027189,121.478088379076],"lat":[31.2448730465539,31.2424926759962,31.2423095704304,31.243286132549,31.2431030269831,31.24188232411,31.2412719722238,31.2429199223166,31.243286132549,31.2396850582189,31.2371215820954,31.235290527336,31.232910155879,31.2299194334352,31.2280883786758,31.2260742183506,31.225891113684,31.225891113684,31.225891113684,31.2255249025523,31.2236938477929,31.2216796874677,31.2208862309149,31.2199096678969,31.2188720705896,31.218322753892,31.2178955075717,31.2175292964399,31.216918945453,31.2166748046985,31.2188720705896,31.2213134763359,31.223510742227,31.225891113684,31.2274780276889,31.2266845702368,31.2263183591051,31.2252807617978,31.2266845702368,31.2313232418742,31.2330932614449,31.2351074217701,31.2368774413409,31.2368774413409,31.2374877932271,31.2385253905344,31.2395019535523,31.2410888675573,31.2415161129783,31.2424926759962,31.2437133788694,31.2446899409881,31.2468872068791,31.248474120884,31.2503051756434,31.2531127925214,31.2556762695443,31.2576904298695,31.2603149411817,31.2620849607524,31.2650756831963,31.2694702149785,31.271118164172,31.2733154300631,31.274902344068,31.2764892580728,31.2750854496338,31.27392578105,31.2728881837427,31.2761230469411,31.2783203128322,31.280517577824,31.2821044918289,31.2847290040403,31.286682129177,31.2896728516209,31.291870117512,31.2930908203851,31.2941284176924,31.2966918947152,31.298889159707,31.2990722652729,31.3004760746112,31.3024902340371,31.3051147462486,31.3054809573803,31.3076782223721,31.3096923826973,31.3117065430226,31.3137207033478,31.3140869144796,31.3204956056877,31.3226928706795,31.3223266604471,31.3211059566746,31.3190917972487,31.3197021482356,31.3204956056877,31.3214721678063,31.3228759762454,31.3228759762454,31.3218994141267,31.3181152342307,31.3153076173527,31.3112792967023,31.3082885742584,31.3073120121397,31.3021240238047,31.2996826171591,31.2982788087201,31.2968750002811,31.29467773439,31.2930908203851,31.2915039063802,31.2893066404891,31.2864990236111,31.2844848632859,31.281494140842,31.2792968749509,31.2766723636387,31.2747192385021,31.2736816402955,31.2717285160582,31.2689208982809,31.2662963869687,31.2640991210776,31.2623291015069,31.2609252930679,31.2576904298695,31.2565307612857,31.2548828120921,31.2532958980873,31.2518920896483,31.2501220700775,31.2479248050857,31.2448730465539]}]],[[{"lng":[121.453308105085,121.452514648532,121.452270507778,121.456115722862,121.459106445306,121.461303711197,121.462890625202,121.463073730768,121.462707519636,121.462524414071,121.46209716775,121.461486816763,121.460083007425,121.459106445306,121.461486816763,121.465087890194,121.46752929684,121.469726562731,121.471923827723,121.475524902053,121.477478027189,121.480712890388,121.482910156279,121.489685058619,121.488891601167,121.489685058619,121.491271972624,121.494689941388,121.497680663832,121.502319336368,121.505310058812,121.505493164378,121.50451660136,121.496887207279,121.493713379269,121.491516113378,121.489685058619,121.486328125043,121.478881835628,121.471496582301,121.470275878529,121.468322754292,121.466125488401,121.465515136514,121.465087890194,121.464111328075,121.463500976189,121.46209716775,121.460510253745,121.458129883188,121.457702636867,121.457275390547,121.456909179415,121.456115722862,121.455505370976,121.454711914423,121.453918456971,121.453308105085],"lat":[31.222106933788,31.2236938477929,31.2255249025523,31.225891113684,31.225891113684,31.225891113684,31.2260742183506,31.2280883786758,31.2299194334352,31.232910155879,31.235290527336,31.2371215820954,31.2396850582189,31.243286132549,31.2429199223166,31.2412719722238,31.24188232411,31.2431030269831,31.243286132549,31.2423095704304,31.2429199223166,31.2457275391946,31.2462768558922,31.243286132549,31.2402954101051,31.2371215820954,31.2351074217701,31.232482910458,31.2301025390011,31.2252807617978,31.2197265623311,31.2166748046985,31.2133178711229,31.2019042971456,31.1976928709293,31.1959228513585,31.1947021484854,31.1934814456123,31.1917114260415,31.1898803712822,31.1918945316074,31.1926879881602,31.1931152344806,31.1961059569244,31.1984863283814,31.2009277341277,31.2031250000188,31.2061157224627,31.2056884761423,31.2055053714757,31.2075195309017,31.2100830079245,31.2133178711229,31.215515137014,31.216918945453,31.218322753892,31.2199096678969,31.222106933788]}]]],["嘉定区","宝山区","徐汇区","普陀区","杨浦区","松江区","浦东新区","虹口区","长宁区","闵行区","青浦区","静安区","黄浦区"],".",{"interactive":true,"className":"","pane":"tmap401","stroke":false,"color":"#FFFFFF","weight":1,"opacity":0,"fill":true,"fillColor":["#FDE725","#21908C","#440154","#21908C","#5DC863","#FDE725","#440154","#21908C","#3B528B","#3B528B","#FDE725","#5DC863","#440154"],"fillOpacity":[1,1,1,1,1,1,1,1,1,1,1,1,1],"dashArray":"none","smoothFactor":1,"noClip":false},["<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>嘉定区<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>numtrips<\/nobr><\/td><td align=\"right\"><nobr>113,070<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>宝山区<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>numtrips<\/nobr><\/td><td align=\"right\"><nobr>268,179<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>徐汇区<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>numtrips<\/nobr><\/td><td align=\"right\"><nobr>564,778<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>普陀区<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>numtrips<\/nobr><\/td><td align=\"right\"><nobr>294,341<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>杨浦区<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>numtrips<\/nobr><\/td><td align=\"right\"><nobr>191,150<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>松江区<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>numtrips<\/nobr><\/td><td align=\"right\"><nobr>122,333<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>浦东新区<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>numtrips<\/nobr><\/td><td align=\"right\"><nobr>955,837<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>虹口区<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>numtrips<\/nobr><\/td><td align=\"right\"><nobr>238,704<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>长宁区<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>numtrips<\/nobr><\/td><td align=\"right\"><nobr>350,027<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>闵行区<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>numtrips<\/nobr><\/td><td align=\"right\"><nobr>402,925<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>青浦区<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>numtrips<\/nobr><\/td><td align=\"right\"><nobr>38,202<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>静安区<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>numtrips<\/nobr><\/td><td align=\"right\"><nobr>141,659<\/nobr><\/td><\/tr><\/table><\/div>","<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\/style><div style=\"max-height:25em;padding-right:0px;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>黄浦区<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\"><nobr>numtrips<\/nobr><\/td><td align=\"right\"><nobr>415,913<\/nobr><\/td><\/tr><\/table><\/div>"],null,["嘉定区","宝山区","徐汇区","普陀区","杨浦区","松江区","浦东新区","虹口区","长宁区","闵行区","青浦区","静安区","黄浦区"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLegend","args":[{"colors":["#FDE725","#5DC863","#21908C","#3B528B","#440154"],"labels":["38,202 to 130,063","130,063 to 229,193","229,193 to 305,478","305,478 to 410,718","410,718 to 955,837"],"na_color":null,"na_label":"NA","opacity":1,"position":"topright","type":"unknown","title":"numtrips","extra":null,"layerId":"legend401","className":"info legend .","group":"."}]},{"method":"addLayersControl","args":[["Esri.WorldGrayCanvas","OpenStreetMap","Esri.WorldTopoMap"],".",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]}],"limits":{"lat":[30.7794799806167,31.5139160159114],"lng":[120.852722168293,122.008300781156]},"fitBounds":[30.7794799806167,120.852722168293,31.5139160159114,122.008300781156,[]]},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</section>
<section id="recap-1" class="slide level2">
<h2>Recap</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">tmap_mode</span>(<span class="st">"plot"</span>)</span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a>sm_tbl_2 <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>    <span class="fu">mutate</span>(<span class="at">hr =</span> <span class="fu">hour</span>(dat_time_O),</span>
<span id="cb7-5"><a href="#cb7-5"></a>           <span class="at">time_of_day =</span> hr <span class="sc">%&gt;%</span> </span>
<span id="cb7-6"><a href="#cb7-6"></a>               <span class="fu">cut</span>(<span class="at">breaks=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">6</span>,<span class="dv">10</span>,<span class="dv">16</span>,<span class="dv">20</span>,<span class="dv">24</span>), <span class="at">include.lowest =</span> <span class="cn">TRUE</span>, </span>
<span id="cb7-7"><a href="#cb7-7"></a>                   <span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Midnight - 6AM"</span>, </span>
<span id="cb7-8"><a href="#cb7-8"></a>                            <span class="st">"6AM - 10AM"</span>, </span>
<span id="cb7-9"><a href="#cb7-9"></a>                            <span class="st">"10AM - 4PM"</span>, </span>
<span id="cb7-10"><a href="#cb7-10"></a>                            <span class="st">"4PM - 8PM"</span>, </span>
<span id="cb7-11"><a href="#cb7-11"></a>                            <span class="st">"8PM - Midnight"</span>))</span>
<span id="cb7-12"><a href="#cb7-12"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="fu">group_by</span>(Dist_origin, time_of_day) <span class="sc">%&gt;%</span></span>
<span id="cb7-14"><a href="#cb7-14"></a>    <span class="fu">summarise</span>(<span class="at">numtrips =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb7-15"><a href="#cb7-15"></a>    <span class="fu">inner_join</span>(distr_sf, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"Dist_origin"</span> <span class="ot">=</span> <span class="st">"district"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-16"><a href="#cb7-16"></a>    <span class="fu">st_as_sf</span>(<span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-17"><a href="#cb7-17"></a>    <span class="fu">tm_shape</span>()<span class="sc">+</span></span>
<span id="cb7-18"><a href="#cb7-18"></a>    <span class="fu">tm_fill</span>(<span class="at">col =</span> <span class="st">"numtrips"</span>, </span>
<span id="cb7-19"><a href="#cb7-19"></a>            <span class="at">palette =</span> <span class="st">"-viridis"</span>, </span>
<span id="cb7-20"><a href="#cb7-20"></a>            <span class="at">type =</span> <span class="st">"seq"</span>,</span>
<span id="cb7-21"><a href="#cb7-21"></a>            <span class="at">style =</span> <span class="st">"quantile"</span>) <span class="sc">+</span></span>
<span id="cb7-22"><a href="#cb7-22"></a>    <span class="fu">tm_facets</span>(<span class="at">by =</span> <span class="st">"time_of_day"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="advanced_spatial_with_sf_files/figure-revealjs/unnamed-chunk-6-1.png" width="960" class="r-stretch"></section>
<section id="todays-plan" class="slide level2">
<h2>Today’s plan</h2>
<ul>
<li>Understanding spatial relationships</li>
<li>DE-9IM</li>
<li>Space as a graph</li>
<li>Other geometric operations</li>
<li>Further Work</li>
</ul>
</section>
<section id="filter-again" class="slide level2">
<h2><code>filter</code> again</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>sm_tbl <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>    <span class="fu">filter</span>(station_name_O <span class="sc">%in%</span>  <span class="fu">c</span>(<span class="st">"星中路"</span>, <span class="st">"南京东路"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="font-size: 0.45em">
<div class="cell">
<div class="cell-output-display">

<table class="table table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> CardID </th>
   <th style="text-align:right;"> tripid </th>
   <th style="text-align:left;"> station_name_D </th>
   <th style="text-align:left;"> station_name_O </th>
   <th style="text-align:right;"> lon_D </th>
   <th style="text-align:right;"> lon_O </th>
   <th style="text-align:right;"> lat_D </th>
   <th style="text-align:right;"> lat_O </th>
   <th style="text-align:left;"> dat_time_D </th>
   <th style="text-align:left;"> dat_time_O </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 5690 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> 宜山路 </td>
   <td style="text-align:left;background-color: green !important;"> 星中路 </td>
   <td style="text-align:right;"> 121.4226 </td>
   <td style="text-align:right;"> 121.3643 </td>
   <td style="text-align:right;"> 31.18858 </td>
   <td style="text-align:right;"> 31.16001 </td>
   <td style="text-align:left;"> 2015-04-01 12:12:06 </td>
   <td style="text-align:left;"> 2015-04-01 11:52:57 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 5951 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 新村路 </td>
   <td style="text-align:left;background-color: green !important;"> 南京东路 </td>
   <td style="text-align:right;"> 121.4180 </td>
   <td style="text-align:right;"> 121.4801 </td>
   <td style="text-align:right;"> 31.26578 </td>
   <td style="text-align:right;"> 31.24006 </td>
   <td style="text-align:left;"> 2015-04-01 16:21:04 </td>
   <td style="text-align:left;"> 2015-04-01 15:50:06 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 93715 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 枫桥路 </td>
   <td style="text-align:left;background-color: green !important;"> 南京东路 </td>
   <td style="text-align:right;"> 121.4068 </td>
   <td style="text-align:right;"> 121.4801 </td>
   <td style="text-align:right;"> 31.24368 </td>
   <td style="text-align:right;"> 31.24006 </td>
   <td style="text-align:left;"> 2015-04-01 19:02:47 </td>
   <td style="text-align:left;"> 2015-04-01 18:35:18 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 113573 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 江湾体育场 </td>
   <td style="text-align:left;background-color: green !important;"> 南京东路 </td>
   <td style="text-align:right;"> 121.5089 </td>
   <td style="text-align:right;"> 121.4801 </td>
   <td style="text-align:right;"> 31.30631 </td>
   <td style="text-align:right;"> 31.24006 </td>
   <td style="text-align:left;"> 2015-04-01 15:32:09 </td>
   <td style="text-align:left;"> 2015-04-01 15:12:06 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 129540 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 娄山关路 </td>
   <td style="text-align:left;background-color: green !important;"> 南京东路 </td>
   <td style="text-align:right;"> 121.3994 </td>
   <td style="text-align:right;"> 121.4801 </td>
   <td style="text-align:right;"> 31.21300 </td>
   <td style="text-align:right;"> 31.24006 </td>
   <td style="text-align:left;"> 2015-04-01 13:48:41 </td>
   <td style="text-align:left;"> 2015-04-01 13:30:15 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="breaking-it-down.-whats-happening-with-in" class="slide level2">
<h2>Breaking it down. What’s happening with <code>%in%</code>?</h2>
<div class="cell" data-output.lines="4">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>sm_tbl<span class="sc">$</span>station_name_O <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"星中路"</span>, <span class="st">"南京东路"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    [1]  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
   [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
   [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
   [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
...</code></pre>
</div>
</div>
</section>
<section id="breaking-it-down.-whats-happening-with-filter" class="slide level2">
<h2>Breaking it down. What’s happening with filter?</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>sm_tbl <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>    <span class="fu">filter</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, ...))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="font-size: 0.45em">
<div class="cell">
<div class="cell-output-display">

<table class="table table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> CardID </th>
   <th style="text-align:right;"> tripid </th>
   <th style="text-align:left;"> station_name_D </th>
   <th style="text-align:left;"> station_name_O </th>
   <th style="text-align:right;"> lon_D </th>
   <th style="text-align:right;"> lon_O </th>
   <th style="text-align:right;"> lat_D </th>
   <th style="text-align:right;"> lat_O </th>
   <th style="text-align:left;"> dat_time_D </th>
   <th style="text-align:left;"> dat_time_O </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 5690 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> 宜山路 </td>
   <td style="text-align:left;"> 星中路 </td>
   <td style="text-align:right;"> 121.4226 </td>
   <td style="text-align:right;"> 121.3643 </td>
   <td style="text-align:right;"> 31.18858 </td>
   <td style="text-align:right;"> 31.16001 </td>
   <td style="text-align:left;"> 2015-04-01 12:12:06 </td>
   <td style="text-align:left;"> 2015-04-01 11:52:57 </td>
  </tr>
  <tr>
   <td style="text-align:right;text-decoration: line-through;background-color: yellow !important;"> 5690 </td>
   <td style="text-align:right;text-decoration: line-through;background-color: yellow !important;"> 2 </td>
   <td style="text-align:left;text-decoration: line-through;background-color: yellow !important;"> 星中路 </td>
   <td style="text-align:left;text-decoration: line-through;background-color: yellow !important;"> 宜山路 </td>
   <td style="text-align:right;text-decoration: line-through;background-color: yellow !important;"> 121.3643 </td>
   <td style="text-align:right;text-decoration: line-through;background-color: yellow !important;"> 121.4226 </td>
   <td style="text-align:right;text-decoration: line-through;background-color: yellow !important;"> 31.16001 </td>
   <td style="text-align:right;text-decoration: line-through;background-color: yellow !important;"> 31.18858 </td>
   <td style="text-align:left;text-decoration: line-through;background-color: yellow !important;"> 2015-04-01 18:39:48 </td>
   <td style="text-align:left;text-decoration: line-through;background-color: yellow !important;"> 2015-04-01 18:24:04 </td>
  </tr>
  <tr>
   <td style="text-align:right;text-decoration: line-through;background-color: yellow !important;"> 5951 </td>
   <td style="text-align:right;text-decoration: line-through;background-color: yellow !important;"> 1 </td>
   <td style="text-align:left;text-decoration: line-through;background-color: yellow !important;"> 南京东路 </td>
   <td style="text-align:left;text-decoration: line-through;background-color: yellow !important;"> 新村路 </td>
   <td style="text-align:right;text-decoration: line-through;background-color: yellow !important;"> 121.4801 </td>
   <td style="text-align:right;text-decoration: line-through;background-color: yellow !important;"> 121.4180 </td>
   <td style="text-align:right;text-decoration: line-through;background-color: yellow !important;"> 31.24006 </td>
   <td style="text-align:right;text-decoration: line-through;background-color: yellow !important;"> 31.26578 </td>
   <td style="text-align:left;text-decoration: line-through;background-color: yellow !important;"> 2015-04-01 14:55:19 </td>
   <td style="text-align:left;text-decoration: line-through;background-color: yellow !important;"> 2015-04-01 14:24:06 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 5951 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 新村路 </td>
   <td style="text-align:left;"> 南京东路 </td>
   <td style="text-align:right;"> 121.4180 </td>
   <td style="text-align:right;"> 121.4801 </td>
   <td style="text-align:right;"> 31.26578 </td>
   <td style="text-align:right;"> 31.24006 </td>
   <td style="text-align:left;"> 2015-04-01 16:21:04 </td>
   <td style="text-align:left;"> 2015-04-01 15:50:06 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 6032 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> 锦绣路 </td>
   <td style="text-align:left;"> 广兰路 </td>
   <td style="text-align:right;"> 121.5357 </td>
   <td style="text-align:right;"> 121.6169 </td>
   <td style="text-align:right;"> 31.18973 </td>
   <td style="text-align:right;"> 31.21325 </td>
   <td style="text-align:left;"> 2015-04-01 14:42:53 </td>
   <td style="text-align:left;"> 2015-04-01 14:17:33 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output-display">

<table class="table table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> CardID </th>
   <th style="text-align:right;"> tripid </th>
   <th style="text-align:left;"> station_name_D </th>
   <th style="text-align:left;"> station_name_O </th>
   <th style="text-align:right;"> lon_D </th>
   <th style="text-align:right;"> lon_O </th>
   <th style="text-align:right;"> lat_D </th>
   <th style="text-align:right;"> lat_O </th>
   <th style="text-align:left;"> dat_time_D </th>
   <th style="text-align:left;"> dat_time_O </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 5690 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> 宜山路 </td>
   <td style="text-align:left;"> 星中路 </td>
   <td style="text-align:right;"> 121.4226 </td>
   <td style="text-align:right;"> 121.3643 </td>
   <td style="text-align:right;"> 31.18858 </td>
   <td style="text-align:right;"> 31.16001 </td>
   <td style="text-align:left;"> 2015-04-01 12:12:06 </td>
   <td style="text-align:left;"> 2015-04-01 11:52:57 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 5951 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 新村路 </td>
   <td style="text-align:left;"> 南京东路 </td>
   <td style="text-align:right;"> 121.4180 </td>
   <td style="text-align:right;"> 121.4801 </td>
   <td style="text-align:right;"> 31.26578 </td>
   <td style="text-align:right;"> 31.24006 </td>
   <td style="text-align:left;"> 2015-04-01 16:21:04 </td>
   <td style="text-align:left;"> 2015-04-01 15:50:06 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 93715 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 枫桥路 </td>
   <td style="text-align:left;"> 南京东路 </td>
   <td style="text-align:right;"> 121.4068 </td>
   <td style="text-align:right;"> 121.4801 </td>
   <td style="text-align:right;"> 31.24368 </td>
   <td style="text-align:right;"> 31.24006 </td>
   <td style="text-align:left;"> 2015-04-01 19:02:47 </td>
   <td style="text-align:left;"> 2015-04-01 18:35:18 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 113573 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 江湾体育场 </td>
   <td style="text-align:left;"> 南京东路 </td>
   <td style="text-align:right;"> 121.5089 </td>
   <td style="text-align:right;"> 121.4801 </td>
   <td style="text-align:right;"> 31.30631 </td>
   <td style="text-align:right;"> 31.24006 </td>
   <td style="text-align:left;"> 2015-04-01 15:32:09 </td>
   <td style="text-align:left;"> 2015-04-01 15:12:06 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 129540 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 娄山关路 </td>
   <td style="text-align:left;"> 南京东路 </td>
   <td style="text-align:right;"> 121.3994 </td>
   <td style="text-align:right;"> 121.4801 </td>
   <td style="text-align:right;"> 31.21300 </td>
   <td style="text-align:right;"> 31.24006 </td>
   <td style="text-align:left;"> 2015-04-01 13:48:41 </td>
   <td style="text-align:left;"> 2015-04-01 13:30:15 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
<section id="same-thing-with-spatial-relationships" class="slide level2">
<h2>Same thing with spatial relationships</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb12-2"><a href="#cb12-2"></a></span>
<span id="cb12-3"><a href="#cb12-3"></a>scard_sf <span class="ot">&lt;-</span> </span>
<span id="cb12-4"><a href="#cb12-4"></a>    sm_tbl <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>    <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"lon_D"</span>, <span class="st">"lat_D"</span>), <span class="at">crs =</span> <span class="dv">4326</span>) </span>
<span id="cb12-6"><a href="#cb12-6"></a></span>
<span id="cb12-7"><a href="#cb12-7"></a>center_pt <span class="ot">&lt;-</span> </span>
<span id="cb12-8"><a href="#cb12-8"></a>    <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="fl">121.469170</span>, <span class="fl">31.224361</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-9"><a href="#cb12-9"></a>    <span class="fu">st_sfc</span>(<span class="at">crs=</span><span class="dv">4326</span>)</span>
<span id="cb12-10"><a href="#cb12-10"></a></span>
<span id="cb12-11"><a href="#cb12-11"></a>scard_sf <span class="sc">%&gt;%</span></span>
<span id="cb12-12"><a href="#cb12-12"></a>    <span class="fu">filter</span>(<span class="fu">st_distance</span>(., center_pt)[,<span class="dv">1</span>]<span class="sc">&lt;</span> units<span class="sc">::</span><span class="fu">set_units</span>(<span class="dv">4</span>, <span class="st">"km"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div style="font-size: 0.45em">
<div class="cell">
<div class="cell-output-display">

<table class="table table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> CardID </th>
   <th style="text-align:right;"> tripid </th>
   <th style="text-align:left;"> station_name_D </th>
   <th style="text-align:left;"> station_name_O </th>
   <th style="text-align:right;"> lon_O </th>
   <th style="text-align:right;"> lat_O </th>
   <th style="text-align:left;"> dat_time_D </th>
   <th style="text-align:left;"> dat_time_O </th>
   <th style="text-align:left;"> geometry </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 5951 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> 南京东路 </td>
   <td style="text-align:left;"> 新村路 </td>
   <td style="text-align:right;"> 121.4180 </td>
   <td style="text-align:right;"> 31.26578 </td>
   <td style="text-align:left;"> 2015-04-01 14:55:19 </td>
   <td style="text-align:left;"> 2015-04-01 14:24:06 </td>
   <td style="text-align:left;"> POINT (121.4801 31.24006) </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 6138 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> 鲁班路 </td>
   <td style="text-align:left;"> 虹桥火车站 </td>
   <td style="text-align:right;"> 121.3144 </td>
   <td style="text-align:right;"> 31.19599 </td>
   <td style="text-align:left;"> 2015-04-01 10:16:49 </td>
   <td style="text-align:left;"> 2015-04-01 09:28:39 </td>
   <td style="text-align:left;"> POINT (121.4706 31.20117) </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 6138 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:left;"> 鲁班路 </td>
   <td style="text-align:left;"> 云山路 </td>
   <td style="text-align:right;"> 121.5686 </td>
   <td style="text-align:right;"> 31.25259 </td>
   <td style="text-align:left;"> 2015-04-01 15:07:16 </td>
   <td style="text-align:left;"> 2015-04-01 14:31:28 </td>
   <td style="text-align:left;"> POINT (121.4706 31.20117) </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
<section id="lets-break-it-down" class="slide level2">
<h2>Let’s break it down!</h2>
<div class="fragment">
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>units<span class="sc">::</span><span class="fu">set_units</span>(<span class="dv">4</span>, <span class="st">"km"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column fragment">
<div class="cell-output cell-output-stdout">
<pre><code>4 [km]</code></pre>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>scard_sf <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>    <span class="fu">head</span>(<span class="dv">5</span>)<span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>    <span class="fu">st_distance</span>(.,center_pt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column fragment">
<div class="cell-output cell-output-stdout">
<pre><code>Units: [m]
          [,1]
[1,]  5956.142
[2,] 12277.587
[3,]  2033.359
[4,]  6696.058
[5,]  7410.832</code></pre>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="cell columns column-output-location">
<div class="column">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">st_distance</span>(scard_sf[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,],center_pt)[,<span class="dv">1</span>] <span class="sc">&lt;</span> units<span class="sc">::</span><span class="fu">set_units</span>(<span class="dv">4</span>, <span class="st">"km"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div><div class="column fragment">
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE FALSE FALSE</code></pre>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>scard_sf <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>    <span class="fu">filter</span>(<span class="fu">st_distance</span>(., center_pt)[,<span class="dv">1</span>]<span class="sc">&lt;</span> units<span class="sc">::</span><span class="fu">set_units</span>(<span class="dv">4</span>, <span class="st">"km"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="font-size: 0.30em">
<div class="cell">
<div class="cell-output-display">

<table class="table table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> CardID </th>
   <th style="text-align:right;"> tripid </th>
   <th style="text-align:left;"> station_name_D </th>
   <th style="text-align:left;"> station_name_O </th>
   <th style="text-align:right;"> lon_O </th>
   <th style="text-align:right;"> lat_O </th>
   <th style="text-align:left;"> dat_time_D </th>
   <th style="text-align:left;"> dat_time_O </th>
   <th style="text-align:left;"> geometry </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 5951 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> 南京东路 </td>
   <td style="text-align:left;"> 新村路 </td>
   <td style="text-align:right;"> 121.4180 </td>
   <td style="text-align:right;"> 31.26578 </td>
   <td style="text-align:left;"> 2015-04-01 14:55:19 </td>
   <td style="text-align:left;"> 2015-04-01 14:24:06 </td>
   <td style="text-align:left;"> POINT (121.4801 31.24006) </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 6138 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> 鲁班路 </td>
   <td style="text-align:left;"> 虹桥火车站 </td>
   <td style="text-align:right;"> 121.3144 </td>
   <td style="text-align:right;"> 31.19599 </td>
   <td style="text-align:left;"> 2015-04-01 10:16:49 </td>
   <td style="text-align:left;"> 2015-04-01 09:28:39 </td>
   <td style="text-align:left;"> POINT (121.4706 31.20117) </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 6138 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:left;"> 鲁班路 </td>
   <td style="text-align:left;"> 云山路 </td>
   <td style="text-align:right;"> 121.5686 </td>
   <td style="text-align:right;"> 31.25259 </td>
   <td style="text-align:left;"> 2015-04-01 15:07:16 </td>
   <td style="text-align:left;"> 2015-04-01 14:31:28 </td>
   <td style="text-align:left;"> POINT (121.4706 31.20117) </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</section>
<section id="other-spatial-relationships" class="slide level2">
<h2>Other spatial relationships</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20" data-code-line-numbers="7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>distr_sf <span class="ot">&lt;-</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>    <span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"raw"</span>, <span class="st">"subway_smartcard"</span>, <span class="st">"districts.shp"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>    <span class="fu">st_read</span>()</span>
<span id="cb20-4"><a href="#cb20-4"></a></span>
<span id="cb20-5"><a href="#cb20-5"></a>scard_sf <span class="sc">%&gt;%</span></span>
<span id="cb20-6"><a href="#cb20-6"></a>    <span class="fu">filter</span>(</span>
<span id="cb20-7"><a href="#cb20-7"></a>        <span class="fu">st_within</span>(., distr_sf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(district <span class="sc">==</span> <span class="st">"嘉定区"</span>), <span class="at">sparse =</span> F)[,<span class="dv">1</span>]</span>
<span id="cb20-8"><a href="#cb20-8"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="font-size: 0.5em">
<div class="cell">
<div class="cell-output-display">

<table class="table table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> CardID </th>
   <th style="text-align:right;"> tripid </th>
   <th style="text-align:left;"> station_name_D </th>
   <th style="text-align:left;"> station_name_O </th>
   <th style="text-align:right;"> lon_O </th>
   <th style="text-align:right;"> lat_O </th>
   <th style="text-align:left;"> dat_time_D </th>
   <th style="text-align:left;"> dat_time_O </th>
   <th style="text-align:left;"> geometry </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 58829 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> 丰庄 </td>
   <td style="text-align:left;"> 行知路 </td>
   <td style="text-align:right;"> 121.4168 </td>
   <td style="text-align:right;"> 31.28676 </td>
   <td style="text-align:left;"> 2015-04-01 19:30:01 </td>
   <td style="text-align:left;"> 2015-04-01 18:52:43 </td>
   <td style="text-align:left;"> POINT (121.3505 31.24443) </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 85334 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> 金运路 </td>
   <td style="text-align:left;"> 陕西南路 </td>
   <td style="text-align:right;"> 121.4542 </td>
   <td style="text-align:right;"> 31.21705 </td>
   <td style="text-align:left;"> 2015-04-01 08:11:52 </td>
   <td style="text-align:left;"> 2015-04-01 07:28:33 </td>
   <td style="text-align:left;"> POINT (121.3148 31.24293) </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 85713 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> 嘉定新城 </td>
   <td style="text-align:left;"> 祁连山路 </td>
   <td style="text-align:right;"> 121.3714 </td>
   <td style="text-align:right;"> 31.27349 </td>
   <td style="text-align:left;"> 2015-04-01 07:55:26 </td>
   <td style="text-align:left;"> 2015-04-01 07:37:33 </td>
   <td style="text-align:left;"> POINT (121.2499 31.33204) </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="spatial-relationships" class="slide level2">
<h2>Spatial Relationships</h2>

<img data-src="imgs/overlay_within.jpg" class="r-stretch quarto-figure-center"><div style="font-size: 0.3em">
<p>Source: Michael Mann, Steven Chao, Jordan Graesser, Nina Feldman, https://pygis.io/docs/e_spatial_joins.html</p>
</div>
</section>
<section id="spatial-relationships-1" class="slide level2">
<h2>Spatial Relationships</h2>

<img data-src="imgs/overlay_crosses.jpg" class="r-stretch quarto-figure-center"><div style="font-size: 0.3em">
<p>Source: Michael Mann, Steven Chao, Jordan Graesser, Nina Feldman, https://pygis.io/docs/e_spatial_joins.html</p>
</div>
</section>
<section id="spatial-relationships-2" class="slide level2">
<h2>Spatial Relationships</h2>

<img data-src="imgs/overlay_overlaps.jpg" class="r-stretch quarto-figure-center"><div style="font-size: 0.3em">
<p>Source: Michael Mann, Steven Chao, Jordan Graesser, Nina Feldman, https://pygis.io/docs/e_spatial_joins.html</p>
</div>
</section>
<section id="spatial-relationships-3" class="slide level2">
<h2>Spatial Relationships</h2>

<img data-src="imgs/overlay_intersects.jpg" class="r-stretch quarto-figure-center"><div style="font-size: 0.3em">
<p>Source: Michael Mann, Steven Chao, Jordan Graesser, Nina Feldman, https://pygis.io/docs/e_spatial_joins.html</p>
</div>
</section>
<section id="spatial-relationships-4" class="slide level2">
<h2>Spatial Relationships</h2>

<img data-src="imgs/overlay_touches.jpg" class="r-stretch quarto-figure-center"><div style="font-size: 0.3em">
<p>Source: Michael Mann, Steven Chao, Jordan Graesser, Nina Feldman, https://pygis.io/docs/e_spatial_joins.html</p>
</div>
</section>
<section id="spatial-relationships-5" class="slide level2">
<h2>Spatial Relationships</h2>

<img data-src="imgs/overlay_contains.jpg" class="r-stretch quarto-figure-center"><div style="font-size: 0.3em">
<p>Source: Michael Mann, Steven Chao, Jordan Graesser, Nina Feldman, https://pygis.io/docs/e_spatial_joins.html</p>
</div>
</section>
<section id="dimensionally-extended-9-intersection-model-de-9im" class="slide level2">
<h2>Dimensionally Extended 9-Intersection Model (DE-9IM)</h2>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<p><img data-src="imgs/de9im2.jpg" data-fig-align="center" height="200"> <img data-src="imgs/de9im1.jpg" data-fig-align="center" height="200"></p>
</div>
</div>
</div>
<div style="font-size: 0.3em">
<p>Source: Paul Ramsey &amp; Mark Leslie, https://postgis.net/workshops/postgis-intro/de9im.html</p>
</div>
</section>
<section id="dimensionally-extended-9-intersection-model-de-9im-1" class="slide level2">
<h2>Dimensionally Extended 9-Intersection Model (DE-9IM)</h2>

<img data-src="imgs/de9im3.jpg" class="r-stretch"><div style="font-size: 0.3em">
<p>Source: Paul Ramsey &amp; Mark Leslie, https://postgis.net/workshops/postgis-intro/de9im.html</p>
</div>
</section>
<section id="using-de-9im-for-filters" class="slide level2">
<h2>Using DE-9IM for filters</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>scard_sf <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>    <span class="fu">filter</span>(</span>
<span id="cb21-3"><a href="#cb21-3"></a>        <span class="fu">st_relate</span>(., </span>
<span id="cb21-4"><a href="#cb21-4"></a>                  distr_sf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(district <span class="sc">==</span> <span class="st">"嘉定区"</span>), </span>
<span id="cb21-5"><a href="#cb21-5"></a>                  <span class="at">pattern =</span> <span class="st">"T*F**F***"</span>,</span>
<span id="cb21-6"><a href="#cb21-6"></a>                  <span class="at">sparse =</span> F)[,<span class="dv">1</span>]</span>
<span id="cb21-7"><a href="#cb21-7"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>is same as</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>scard_sf <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>    <span class="fu">filter</span>(</span>
<span id="cb22-3"><a href="#cb22-3"></a>        <span class="fu">st_within</span>(., </span>
<span id="cb22-4"><a href="#cb22-4"></a>                  distr_sf <span class="sc">%&gt;%</span> <span class="fu">filter</span>(district <span class="sc">==</span> <span class="st">"嘉定区"</span>), </span>
<span id="cb22-5"><a href="#cb22-5"></a>                  <span class="at">sparse =</span> F)[,<span class="dv">1</span>]</span>
<span id="cb22-6"><a href="#cb22-6"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>but can do lot more!</p>
</section>
<section id="using-de-9im-for-filters-1" class="slide level2">
<h2>Using DE-9IM for filters</h2>

<img data-src="imgs/ccc.jpg" class="r-stretch quarto-figure-center"><p>Treatment: Inside &amp; touching</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="fu">st_relate</span>(A, B, <span class="at">pattern =</span> <span class="st">"T*F*TF***"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Control: Outside &amp; touching</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">st_relate</span>(A, B, <span class="at">pattern =</span> <span class="st">"F*T*T****"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="when-within-is-not-within" class="slide level2">
<h2>When <code>within</code> is not <code>within</code></h2>

<img data-src="imgs/esri_withins.jpg" width="900" class="r-stretch quarto-figure-center"><div style="font-size: 0.3em">
<p>https://twitter.com/RhoBott/status/788810834747154432/photo/1</p>
</div>
</section>
<section id="rethink-polygons-digression" class="slide level2">
<h2>Rethink polygons (digression)</h2>

<img data-src="imgs/polygons.png" width="900" class="r-stretch quarto-figure-center"></section>
<section id="invalid-polygons-digression" class="slide level2">
<h2>Invalid polygons (digression)</h2>

<img data-src="imgs/unitpolygons_hugo_ledoux.png" class="r-stretch quarto-figure-center"><div style="font-size: 0.3em">
<p>Source: Hugo Ledoux</p>
</div>
<p>Try and make them valid with <code>st_make_valid</code></p>
</section>
<section id="sometimes-simple-is-better" class="slide level2">
<h2>Sometimes simple is better</h2>

<img data-src="imgs/us-simp-1.png" class="r-stretch"><div style="font-size: 0.3em">
<p>Source: Robin Lovelace, Jakub Nowosad, Jannes Muenchow</p>
</div>
</section>
<section id="different-types-of-distances" class="slide level2">
<h2>Different types of distances</h2>

<img data-src="imgs/distance.png" width="793" class="r-stretch quarto-figure-center"><div style="font-size: 0.3em">
<p>Source: Maarten Grootendorst</p>
</div>
</section>
<section id="distances-depend-on-crs" class="slide level2">
<h2>Distances depend on crs</h2>
<p><img data-src="imgs/grid_ground_distance.png" width="789"> <img data-src="imgs/datum.png" width="417"></p>
</section>
<section id="epsg-www.epsg.io" class="slide level2">
<h2>EPSG (www.epsg.io)</h2>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img data-src="imgs/epsg4326.png" width="300"> <img data-src="imgs/epsg4480.png" width="300"> <img data-src="imgs/epsg32315.png" width="300"></p>
</div>
</div>
</div>
</section>
<section id="transform-the-geometry" class="slide level2">
<h2>Transform the geometry</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>distr_sf_transform <span class="ot">&lt;-</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>    <span class="fu">st_transform</span>(distr_sf, <span class="dv">32651</span>)</span>
<span id="cb25-3"><a href="#cb25-3"></a></span>
<span id="cb25-4"><a href="#cb25-4"></a><span class="fu">st_distance</span>(distr_sf_transform)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div style="font-size: 0.5em">
<div class="cell">
<div class="cell-output-display">

<table class="table table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> geometry </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> MULTIPOLYGON (((121.0643 31... </td>
  </tr>
  <tr>
   <td style="text-align:left;"> MULTIPOLYGON (((121.5121 31... </td>
  </tr>
  <tr>
   <td style="text-align:left;"> MULTIPOLYGON (((121.2635 31... </td>
  </tr>
  <tr>
   <td style="text-align:left;"> MULTIPOLYGON (((121.5023 31... </td>
  </tr>
  <tr>
   <td style="text-align:left;"> MULTIPOLYGON (((121.3549 31... </td>
  </tr>
</tbody>
</table>

</div>
<div class="cell-output cell-output-stdout">
<pre><code>Units: [m]
          [,1]     [,2]      [,3]      [,4]     [,5]     [,6]      [,7]
[1,]     0.000 20431.79     0.000  8874.997     0.00 12884.10     0.000
[2,] 20431.793     0.00 11727.622     0.000 11246.64     0.00 40360.928
[3,]     0.000 11727.62     0.000  6349.408     0.00     0.00  7025.979
[4,]  8874.997     0.00  6349.408     0.000     0.00     0.00 39762.252
[5,]     0.000 11246.64     0.000     0.000     0.00 10951.17 34038.524
[6,] 12884.102     0.00     0.000     0.000 10951.17     0.00 22431.655
[7,]     0.000 40360.93  7025.979 39762.252 34038.52 22431.65     0.000</code></pre>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div style="font-size: 0.5em">
<div class="cell">
<div class="cell-output-display">

<table class="table table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> geometry </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> MULTIPOLYGON (((315569.8 34... </td>
  </tr>
  <tr>
   <td style="text-align:left;"> MULTIPOLYGON (((358318.1 34... </td>
  </tr>
  <tr>
   <td style="text-align:left;"> MULTIPOLYGON (((334652.9 34... </td>
  </tr>
  <tr>
   <td style="text-align:left;"> MULTIPOLYGON (((357628 3475... </td>
  </tr>
  <tr>
   <td style="text-align:left;"> MULTIPOLYGON (((343384.7 34... </td>
  </tr>
</tbody>
</table>

</div>
<div class="cell-output cell-output-stdout">
<pre><code>Units: [m]
          [,1]     [,2]      [,3]      [,4]     [,5]     [,6]      [,7]
[1,]     0.000 20445.97     0.000  8881.829     0.00 12907.37     0.000
[2,] 20445.966     0.00 11731.071     0.000 11261.07     0.00 40268.432
[3,]     0.000 11731.07     0.000  6330.611     0.00     0.00  7004.715
[4,]  8881.829     0.00  6330.611     0.000     0.00     0.00 39647.414
[5,]     0.000 11261.07     0.000     0.000     0.00 10970.45 33945.272
[6,] 12907.367     0.00     0.000     0.000 10970.45     0.00 22432.682
[7,]     0.000 40268.43  7004.715 39647.414 33945.27 22432.68     0.000</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="what-is-a-neighborhood" class="slide level2">
<h2>What is a neighborhood?</h2>
<p>Often defined with a spatial relationship</p>
<ul>
<li>Distance <span class="math inline">\(&lt; D\)</span></li>
<li>Touches <span class="math inline">\(==TRUE\)</span></li>
<li>Intersects <span class="math inline">\(==TRUE\)</span></li>
</ul>
<p>…</p>
<p>Or combinations such as</p>
<ul>
<li>Distance <span class="math inline">\(&lt;D\)</span> <code>&amp;</code> Touches <span class="math inline">\(==TRUE\)</span></li>
<li>Distance <span class="math inline">\(&lt;D\)</span> <code>|</code> Touches <span class="math inline">\(==TRUE\)</span></li>
</ul>
<p>…</p>
</section>
<section id="neighbors" class="slide level2">
<h2>Neighbors</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">library</span>(spdep)</span>
<span id="cb28-2"><a href="#cb28-2"></a></span>
<span id="cb28-3"><a href="#cb28-3"></a>nb_matrix <span class="ot">&lt;-</span> <span class="fu">poly2nb</span>(distr_sf_transform) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4"></a>                <span class="fu">nb2mat</span>(<span class="at">zero.policy =</span> T, <span class="at">style =</span> <span class="st">"B"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="advanced_spatial_with_sf_files/figure-revealjs/unnamed-chunk-30-1.png" width="960" class="r-stretch"></section>
<section id="neighborhood-adjacency-matrix" class="slide level2">
<h2>Neighborhood adjacency matrix</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="co">#create unique district ids</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>distr_sf_transform<span class="sc">$</span>id_val <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"D"</span>, <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(distr_sf_transform))</span>
<span id="cb29-3"><a href="#cb29-3"></a></span>
<span id="cb29-4"><a href="#cb29-4"></a>sm_tbl_3 <span class="ot">&lt;-</span> sm_tbl_2 <span class="sc">%&gt;%</span></span>
<span id="cb29-5"><a href="#cb29-5"></a><span class="fu">group_by</span>(Dist_origin) <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6"></a>    <span class="fu">summarise</span>(<span class="at">numtrips =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb29-7"><a href="#cb29-7"></a>    <span class="fu">inner_join</span>(distr_sf_transform, <span class="at">by=</span><span class="fu">c</span>(<span class="st">"Dist_origin"</span> <span class="ot">=</span> <span class="st">"district"</span>)) </span>
<span id="cb29-8"><a href="#cb29-8"></a>    </span>
<span id="cb29-9"><a href="#cb29-9"></a>nb_matrix <span class="ot">&lt;-</span> <span class="fu">poly2nb</span>(distr_sf_transform, <span class="at">queen =</span> F) <span class="sc">%&gt;%</span></span>
<span id="cb29-10"><a href="#cb29-10"></a>                <span class="fu">nb2mat</span>(<span class="at">zero.policy =</span> T, <span class="at">style =</span> <span class="st">"B"</span>)</span>
<span id="cb29-11"><a href="#cb29-11"></a></span>
<span id="cb29-12"><a href="#cb29-12"></a><span class="fu">row.names</span>(nb_matrix) <span class="ot">&lt;-</span> <span class="fu">colnames</span>(nb_matrix) <span class="ot">&lt;-</span> distr_sf_transform<span class="sc">$</span>id_val</span>
<span id="cb29-13"><a href="#cb29-13"></a></span>
<span id="cb29-14"><a href="#cb29-14"></a><span class="co"># rearrange the nb_matrix rows and columns to match the order of district ids in sm_tbl_3</span></span>
<span id="cb29-15"><a href="#cb29-15"></a>nb_matrix <span class="ot">&lt;-</span></span>
<span id="cb29-16"><a href="#cb29-16"></a>    nb_matrix[sm_tbl_3<span class="sc">$</span>id_val,sm_tbl_3<span class="sc">$</span>id_val]</span>
<span id="cb29-17"><a href="#cb29-17"></a></span>
<span id="cb29-18"><a href="#cb29-18"></a>sm_tbl_3 <span class="ot">&lt;-</span> sm_tbl_3 <span class="sc">%&gt;%</span></span>
<span id="cb29-19"><a href="#cb29-19"></a>    <span class="fu">mutate</span>(<span class="at">Neigh_numtrips =</span> nb_matrix <span class="sc">%*%</span> numtrips)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div style="font-size: 0.5em">
<div class="cell">
<div class="cell-output-display">

<table class="table table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Dist_origin </th>
   <th style="text-align:right;"> numtrips </th>
   <th style="text-align:right;"> Neigh_numtrips </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 嘉定区 </td>
   <td style="text-align:right;"> 113070 </td>
   <td style="text-align:right;"> 1353674 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 宝山区 </td>
   <td style="text-align:right;"> 268179 </td>
   <td style="text-align:right;"> 1934761 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 徐汇区 </td>
   <td style="text-align:right;"> 564778 </td>
   <td style="text-align:right;"> 2266361 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 普陀区 </td>
   <td style="text-align:right;"> 294341 </td>
   <td style="text-align:right;"> 872935 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="boundary-precision-matters" class="slide level2">
<h2>Boundary precision matters!</h2>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="fu">st_overlaps</span>(distr_sf_transform, </span>
<span id="cb30-2"><a href="#cb30-2"></a>            distr_sf_transform, </span>
<span id="cb30-3"><a href="#cb30-3"></a>            <span class="at">sparse =</span> F )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="cell-output-display">
<p><img data-src="advanced_spatial_with_sf_files/figure-revealjs/unnamed-chunk-35-1.png" width="384"></p>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="imgs/overlay_overlaps_highlight.png" width="390"></p>
</div>
</div>
</div>
</section>
<section id="boundary-precision-matters-1" class="slide level2">
<h2>Boundary precision matters!</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">poly2nb</span>(distr_sf_transform) <span class="sc">%&gt;%</span></span>
<span id="cb31-2"><a href="#cb31-2"></a>    <span class="fu">nb2mat</span>(<span class="at">zero.policy =</span> T, <span class="at">style =</span> <span class="st">"B"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3"></a>    <span class="fu">as.logical</span>() <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4"></a>    <span class="fu">matrix</span>(<span class="at">nrow =</span> <span class="fu">nrow</span>(distr_sf_transform), <span class="at">byrow =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="advanced_spatial_with_sf_files/figure-revealjs/unnamed-chunk-37-1.png" width="288"></p>
</div>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="fu">st_relate</span>(distr_sf_transform, </span>
<span id="cb32-2"><a href="#cb32-2"></a>          distr_sf_transform,</span>
<span id="cb32-3"><a href="#cb32-3"></a>          <span class="at">pattern =</span> <span class="st">"F*T*T****"</span>, </span>
<span id="cb32-4"><a href="#cb32-4"></a>          <span class="at">sparse =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="advanced_spatial_with_sf_files/figure-revealjs/unnamed-chunk-39-1.png" width="288"></p>
</div>
</div>
</div>
</div>
</section>
<section id="boundary-precision-matters-2" class="slide level2">
<h2>Boundary precision matters!</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>temp_poly <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(distr_sf_transform,.<span class="dv">01</span>)</span>
<span id="cb33-2"><a href="#cb33-2"></a><span class="fu">st_relate</span>(temp_poly, </span>
<span id="cb33-3"><a href="#cb33-3"></a>          temp_poly, </span>
<span id="cb33-4"><a href="#cb33-4"></a>          <span class="at">pattern =</span> <span class="st">"T*T***T**"</span>, </span>
<span id="cb33-5"><a href="#cb33-5"></a>          <span class="at">sparse =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="advanced_spatial_with_sf_files/figure-revealjs/unnamed-chunk-41-1.png" width="288"></p>
</div>
</div>
</div>
</div>
</section>
<section id="boundary-precision-matters-3" class="slide level2">
<h2>Boundary precision matters!</h2>
<div class="cell quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img data-src="advanced_spatial_with_sf_files/figure-revealjs/unnamed-chunk-42-1.png" width="384"></p>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img data-src="advanced_spatial_with_sf_files/figure-revealjs/unnamed-chunk-42-2.png" width="384"></p>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img data-src="advanced_spatial_with_sf_files/figure-revealjs/unnamed-chunk-42-3.png" width="384"></p>
</div>
</div>
</div>
</section>
<section id="rethinking-joins" class="slide level2">
<h2>Rethinking joins</h2>
<div>
<p><img data-src="imgs/left-join_1.gif" width="300"> <img data-src="imgs/right-join.gif" width="300"> <img data-src="imgs/inner-join.gif" width="300"></p>
</div>
<div style="font-size: 0.8em">
<ul>
<li>Join on any column including
<ul>
<li>number</li>
<li>name/string</li>
<li>date/time</li>
<li><strong>geometry</strong></li>
</ul></li>
<li>Joining is fundamentally filtering and matching together</li>
</ul>
</div>
</section>
<section id="other-geometric-operations" class="title-slide slide level1 center">
<h1>Other geometric operations</h1>

<img data-src="imgs/affine-trans-1.png" class="r-stretch"><div style="font-size: 0.3em">
<p>Source: Robin Lovelace, Jakub Nowosad, Jannes Muenchow</p>
</div>
</section>

<section>
<section id="other-geometric-operations-1" class="title-slide slide level1 center">
<h1>Other geometric operations</h1>

<img data-src="imgs/venn-clip-1.png" class="r-stretch"><div style="font-size: 0.3em">
<p>Source: Robin Lovelace, Jakub Nowosad, Jannes Muenchow</p>
</div>
</section>
<section id="conclusions-spatial-is-somewhat-special" class="slide level2">
<h2>Conclusions: Spatial is <code>somewhat</code> special</h2>
<ul>
<li>Learn to think about spatial objects without plotting</li>
<li>Topological relationships are not embedded in simple features. They have to be inferred</li>
<li>Pay attention to units, especially for distance/areas</li>
<li>Pay attention to coordinate systems</li>
</ul>
</section>
<section id="further-work" class="slide level2">
<h2>Further Work</h2>
<ul>
<li>Find the nearest subway station to the air quality monitoring station.</li>
<li>Compute the trips in the neighbourhood of each station by restricting the neighborhood both by space and the transit line. Pay attention that stations might belong to multiple lines.</li>
<li>Instead of districts, make a regular grid and assign the number of trip ends to each grid.</li>
<li>Practise different choropleth map options using <code>tmap</code>.</li>
</ul>
</section>
<section id="thank-you" class="slide level2">
<h2>Thank you</h2>
<div class="footer footer-default">
<p><a href="https://nkaza.github.io">nkaza.github.io</a>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/meghall06/neair">Theme from Meghan Hall</a></p>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="advanced_spatial_with_sf_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="advanced_spatial_with_sf_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="advanced_spatial_with_sf_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="advanced_spatial_with_sf_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="advanced_spatial_with_sf_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="advanced_spatial_with_sf_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="advanced_spatial_with_sf_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="advanced_spatial_with_sf_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="advanced_spatial_with_sf_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="advanced_spatial_with_sf_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="advanced_spatial_with_sf_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true,"boardmarkerWidth":5},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>